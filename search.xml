<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>umi ts å‡çº§</title>
      <link href="2021/01/22/umi-ts-%E5%8D%87%E7%BA%A7/"/>
      <url>2021/01/22/umi-ts-%E5%8D%87%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<h3 id="umié…ç½®tsçš„è¿‡ç¨‹"><a href="#umié…ç½®tsçš„è¿‡ç¨‹" class="headerlink" title="umié…ç½®tsçš„è¿‡ç¨‹"></a>umié…ç½®tsçš„è¿‡ç¨‹</h3><h4 id="èƒŒæ™¯ï¼ˆä¸ºä»€ä¹ˆè¦é…ç½®TSï¼‰"><a href="#èƒŒæ™¯ï¼ˆä¸ºä»€ä¹ˆè¦é…ç½®TSï¼‰" class="headerlink" title="èƒŒæ™¯ï¼ˆä¸ºä»€ä¹ˆè¦é…ç½®TSï¼‰"></a>èƒŒæ™¯ï¼ˆä¸ºä»€ä¹ˆè¦é…ç½®TSï¼‰</h4><p>  1.æœ¬æ¥é¡¹ç›®æ˜¯ä¸€ä¸ªè€çš„é¡¹ç›®ï¼Œä¹‹å‰æœ‰è¿‡å‡çº§ä½†æ˜¯ç”±äºå¤§å®¶æŠ€æœ¯æ°´å¹³çš„ä¸ç»Ÿä¸€ï¼ŒTSå­¦ä¹ æˆæœ¬é«˜ï¼Œå¯¼è‡´ä¸€ç›´åœ¨ææµ…ä¸­ã€‚<br>  2.ç”±äºç°åœ¨tsçš„æ™®åŠä»¥åŠæœ€è¿‘ä»£ç è´¨é‡è¶Šæ¥è¶Šéš¾ä»¥æŠŠæ§ï¼Œæ‰€ä»¥å¼•å…¥tsæ˜¯æ§åˆ¶è´¨é‡çš„ä¸€ç§æ–¹å¼ã€‚</p><h5 id="tsæœ‰å•¥å¥½å‘¢ï¼Ÿ"><a href="#tsæœ‰å•¥å¥½å‘¢ï¼Ÿ" class="headerlink" title="tsæœ‰å•¥å¥½å‘¢ï¼Ÿ"></a>tsæœ‰å•¥å¥½å‘¢ï¼Ÿ</h5><p>  1.å¯è¯»æ€§ï¼šç±»å‹æ˜ç¡®ï¼Œä¸éœ€è¦é¢å¤–æ³¨é‡Šç±»å‹ï¼›çœ‹åˆ°ç±»å‹å°±çŸ¥é“æ€ä¹ˆç”¨ï¼›<br>  2.å¯ç»´æŠ¤æ€§ï¼šåœ¨ç¼–è¯‘é—´æ–­å°±å¯ä»¥å‘ç°é”™è¯¯ï¼Œé¿å…è®¤ä¸ºé”™è¯¯å‡ºç°ï¼›<br>  3.å…¼å®¹æ€§ï¼šå…¼å®¹jsè¯­æ³•ï¼›å¯ä»¥ç›´æ¥å°†<code>*.js</code>æ”¹ä¸º<code>*.ts</code>ä½¿ç”¨ï¼›å®Œå…¨æ”¯æŒES6è§„èŒƒï¼›<br>  4.ç¬¬ä¸‰æ–¹åº“ï¼šå…¼å®¹ç¬¬ä¸‰æ–¹åº“ï¼Œå³ä½¿ç¬¬ä¸‰æ–¹åº“ä¸æ˜¯ç”¨tstå†™çš„ï¼Œä¹Ÿå¯ä»¥ç¼–å†™å•ç‹¬çš„ç±»å‹æ–‡ä»¶ä¾›tsè¯»å–ï¼›</p><h5 id="tsæœ‰å•¥ä¸å¥½å‘¢ï¼Ÿ"><a href="#tsæœ‰å•¥ä¸å¥½å‘¢ï¼Ÿ" class="headerlink" title="tsæœ‰å•¥ä¸å¥½å‘¢ï¼Ÿ"></a>tsæœ‰å•¥ä¸å¥½å‘¢ï¼Ÿ</h5><p>  1.ä»çº¯jsè½¬è¿‡æ¥æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œå¥½å¤šå†™æ³•ç±»ä¼¼javaï¼›<br>  2.ç±»å‹å®šä¹‰æ¯”è¾ƒç¹çå’Œjsç›¸æ¯”ï¼›<br>  3.ä¸€äº›åº“å…¼å®¹æ€§ä¸æ˜¯å¾ˆå¥½ï¼›<br>  4.éœ€è¦é¢å¤–çš„æ„å»ºå·¥ä½œé‡ï¼›</p><h4 id="umiæ€ä¹ˆé…ç½®"><a href="#umiæ€ä¹ˆé…ç½®" class="headerlink" title="umiæ€ä¹ˆé…ç½®"></a>umiæ€ä¹ˆé…ç½®</h4><ul><li><p>æ–°çš„umi 3 createå·¥å…·åŒ…ä¼šè‡ªåŠ¨å¸®ä½ é…å¥½ã€‚è€çš„é¡¹ç›®éœ€è¦æ‰‹åŠ¨é…ç½®ï¼›æˆ‘ä»¬è¿™é‡Œä¸»è¦ä»‹ç»è€é¡¹ç›®çš„é…ç½®ï¼›</p></li><li><p>ä¸ç®¡æ˜¯è€é¡¹ç›®è¿˜æ˜¯æ–°é¡¹ç›®ï¼Œæˆ‘ä»¬è‡³å°‘éƒ½è¦æ‡‚ä»–çš„é…ç½®ï¼Œè¿™æ ·ä¾¿äºæˆ‘ä»¬åæœŸå¦‚æœé¡¹ç›®å˜åºå¤§å¤æ‚äº†ï¼Œè¿™æ˜¯å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ï¼›</p></li></ul><h5 id="umi3è„šæ‰‹æ¶é…ç½®"><a href="#umi3è„šæ‰‹æ¶é…ç½®" class="headerlink" title="umi3è„šæ‰‹æ¶é…ç½®"></a>umi3è„šæ‰‹æ¶é…ç½®</h5><p>  æŒ‰umiæ ‡å‡†æ–‡æ¡£é…ç½®å°±å¯ä»¥äº†ï¼›<br>  umi <code>create-app</code>æ–‡æ¡£ï¼š<a href="https://umijs.org/zh-CN/docs">https://umijs.org/zh-CN/docs</a></p><pre><code>    $ yarn create @umijs/umi-app      Copy:  .editorconfig      Write: .gitignore      Copy:  .prettierignore      Copy:  .prettierrc      Write: .umirc.ts      Copy:  mock/.gitkeep      Write: package.json      Copy:  README.md      Copy:  src/pages/index.less      Copy:  src/pages/index.tsx      Copy:  tsconfig.json      Copy:  typings.d.ts      .      .      .</code></pre><p>  ç›®å½•ç»“æ„</p><pre><code>    .    â”œâ”€â”€ package.json    â”œâ”€â”€ .umirc.ts    â”œâ”€â”€ .env    â”œâ”€â”€ dist    â”œâ”€â”€ mock    â”œâ”€â”€ public    â””â”€â”€ src        â”œâ”€â”€ .umi        â”œâ”€â”€ layouts/index.tsx        â”œâ”€â”€ pages            â”œâ”€â”€ index.less            â””â”€â”€ index.tsx        â””â”€â”€ app.ts  balabala ... è¿™é‡Œçœç•¥ä¸€ä¸‡å­—ï¼ˆå…·ä½“çœ‹æ–‡æ¡£å°±å¯ä»¥äº†)</code></pre><h5 id="umiè€çš„é¡¹ç›®é…ç½®"><a href="#umiè€çš„é¡¹ç›®é…ç½®" class="headerlink" title="umiè€çš„é¡¹ç›®é…ç½®"></a>umiè€çš„é¡¹ç›®é…ç½®</h5><p>  (1).umirc.ts<br>  å®˜æ–¹è§£é‡Šï¼š é…ç½®æ–‡ä»¶ï¼ŒåŒ…å« umi å†…ç½®åŠŸèƒ½å’Œæ’ä»¶çš„é…ç½®ã€‚<br>  è¯ä¸å¤šè¯´ï¼Œå’Œè€çš„<code>.js</code>ä¸€æ ·å¹¶ä¸”å¯ä»¥å…±ç”¨ã€‚å³è¿è¡Œæ—¶é…ç½®ã€‚</p><p>  (2)tsconfig.json<br>  å®˜æ–¹è§£é‡Šï¼š TypeScripté¡¹ç›®çš„æ ¹ç›®å½•ï¼›<br>  æˆ‘çš„è§£é‡Šï¼šç”¨æ¥é…ç½®ç¼–è¯‘tsé¡¹ç›®çš„æ ¹æ–‡ä»¶å’Œç¼–è¯‘é…ç½®ï¼›</p><pre><code>  {    &quot;compilerOptions&quot;: {      &quot;target&quot;: &quot;esnext&quot;,      &quot;module&quot;: &quot;esnext&quot;,      &quot;moduleResolution&quot;: &quot;node&quot;,      &quot;importHelpers&quot;: true,      &quot;jsx&quot;: &quot;react&quot;,      &quot;esModuleInterop&quot;: true,      &quot;sourceMap&quot;: true,      &quot;baseUrl&quot;: &quot;.&quot;,      &quot;strict&quot;: true,      &quot;allowUnreachableCode&quot;:false, // ä¸æŠ¥å‘Šæ‰§è¡Œä¸åˆ°çš„ä»£ç é”™è¯¯ã€‚      &quot;allowJs&quot;: true, //å…è®¸ç¼–è¯‘javascriptæ–‡ä»¶ã€‚      &quot;allowSyntheticDefaultImports&quot;: true, //å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚è¿™å¹¶ä¸å½±å“ä»£ç çš„è¾“å‡ºï¼Œä»…ä¸ºäº†ç±»å‹æ£€æŸ¥ã€‚      &quot;experimentalDecorators&quot;: true,      &quot;outDir&quot;: &quot;dist/&quot;,      &quot;paths&quot;: {        &quot;@/*&quot;: [&quot;src/*&quot;],        &quot;@*&quot;: [&quot;src/*&quot;],        &quot;@SDVariableJS&quot;: [&quot;config/variableConfig.js&quot;],      }    },    &quot;files&quot;: [      &quot;core.ts&quot;,      &quot;sys.ts&quot;,      &quot;types.ts&quot;,    ],    &quot;include&quot;:[],    &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;dist&quot;]  }</code></pre><p>  å¸¸ç”¨çš„å‚æ•°é…ç½®ï¼š</p><p>  <code>allowUnreachableCode</code>:é»˜è®¤å€¼-<code>false</code> è§£é‡Šï¼šä¸æŠ¥å‘Šæ‰§è¡Œä¸åˆ°çš„ä»£ç é”™è¯¯ã€‚<br>  <code>allowJs</code>:é»˜è®¤å€¼-<code>true</code> è§£é‡Šï¼šå…è®¸ç¼–è¯‘javascriptæ–‡ä»¶ã€‚<br>  <code>allowSyntheticDefaultImports</code>:é»˜è®¤å€¼-<code>true</code> è§£é‡Šï¼šå…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚è¿™å¹¶ä¸å½±å“ä»£ç çš„è¾“å‡ºï¼Œä»…ä¸ºäº†ç±»å‹æ£€æŸ¥ã€‚<br>  <code>noImplicitUseStrict</code>:é»˜è®¤å€¼-<code>alse</code> è§£é‡Šï¼šæ¨¡å—è¾“å‡ºä¸­ä¸åŒ…å« â€œuse strictâ€æŒ‡ä»¤ã€‚<br>  <code>alwaysStrict</code>:é»˜è®¤å€¼-<code>false</code> è§£é‡Šï¼šä»¥ä¸¥æ ¼æ¨¡å¼è§£æå¹¶ä¸ºæ¯ä¸ªæºæ–‡ä»¶ç”Ÿæˆ â€œuse strictâ€è¯­å¥<br>  <code>checkJs</code>:é»˜è®¤å€¼-<code>false</code> è§£é‡Šï¼šåœ¨<code>.js</code>æ–‡ä»¶ä¸­æŠ¥å‘Šé”™è¯¯ã€‚ä¸ <code>allowJs</code>é…åˆä½¿ç”¨ã€‚</p><p>  æ›´å¤šå‚æ•°é…ç½®è§ï¼š<a href="https://www.tslang.cn/docs/handbook/compiler-options.html">https://www.tslang.cn/docs/handbook/compiler-options.html</a></p><p>  (3)typings.d.ts</p><p>  é‡Šä¹‰ï¼šå­˜æ”¾ä¸€äº›å£°æ˜ï¼Œç±»ä¼¼äºC/C++çš„.hå¤´æ–‡ä»¶ã€‚(ä¸çŸ¥é“å¤§å®¶ç†è§£ä¹ˆï¼Œå†™è¿‡Cçš„åº”è¯¥æ‡‚è¿™ä¸ª)</p><ul><li><p>TypeScriptç›¸æ¯”JavaScriptå¢åŠ äº†ç±»å‹å£°æ˜ã€‚è¿™äº›ç±»å‹å£°æ˜å¸®åŠ©ç¼–è¯‘å™¨è¯†åˆ«ç±»å‹ï¼Œä»è€Œé˜²æ­¢å¼€å‘è€…â€œæ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šâ€ã€‚åŸåˆ™ä¸ŠTypeScript éœ€è¦å¼€å‘è€…åšåˆ°å…ˆå£°æ˜åä½¿ç”¨ã€‚è¿™å°±å¯¼è‡´å¼€å‘è€…åœ¨è°ƒç”¨å¾ˆå¤šåŸç”Ÿæ¥å£ï¼ˆæµè§ˆå™¨ã€Node.jsï¼‰æˆ–è€…ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ—¶å€™ï¼Œå› ä¸ºæŸäº›å…¨å±€å˜é‡æˆ–è€…å¯¹è±¡çš„æ–¹æ³•å¹¶æ²¡æœ‰å£°æ˜è¿‡ï¼Œå¯¼è‡´ç¼–è¯‘å™¨çš„ç±»å‹æ£€æŸ¥å¤±è´¥ã€‚</p></li><li><p>ç”¨tså†™çš„æ¨¡å—åœ¨å‘å¸ƒçš„æ—¶å€™ä»ç„¶æ˜¯ç”¨jså‘å¸ƒ;<br>è¿™å°±å¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šts é‚£ä¹ˆå¤šç±»å‹æ•°æ®éƒ½æ²¡äº†ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ª<code>*.d.ts</code>æ–‡ä»¶æ¥æ ‡è®°æŸä¸ªjsåº“é‡Œé¢å¯¹è±¡çš„ç±»å‹ç„¶åtypingså°±æ˜¯ä¸€ä¸ªç½‘ç»œä¸Šçš„d.tsæ•°æ®åº“;</p></li><li><p><code>*.d.ts</code>ç±»å‹å®šä¹‰æ–‡ä»¶ï¼Œæˆ‘æ„Ÿè§‰ç°åœ¨å¯¹æˆ‘çš„ç”¨å¤„å°±æ˜¯ç¼–è¾‘å™¨çš„æ™ºèƒ½æç¤º</p><p>(4)tslint.json</p><p>é‡Šä¹‰ï¼šä¿å­˜äº†è¦ä½¿ç”¨çš„ä»£ç æ£€æŸ¥å™¨çš„è®¾ç½®ã€‚<br>TSLint å¯¹TypeScript æ”¯æŒå¾—å¾ˆå¥½ï¼Œå¹¶ä¸”å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ VsCode IDEï¼Œè¿˜æœ‰å‡ºè‰²çš„æ’ä»¶æ”¯æŒã€‚</p><p>tslint.json</p><pre><code>{&quot;defaultSeverity&quot;: &quot;error&quot;,&quot;extends&quot;: [  &quot;tslint:latest&quot;,  &quot;tslint-react&quot;,  &quot;tslint-config-prettier&quot; // å®‰è£…tslint-config-prettieråï¼Œtslint-config-prettierç¦ç”¨TSLintçš„æ‰€æœ‰æ ¼å¼è®¾ç½®è§„åˆ™, TSLint å’Œ prettieråœ¨ä»£ç æ ¼å¼åŒ–è§„åˆ™ä¸Šå°±ä¸ä¼šæœ‰å†²çªäº†],&quot;jsRules&quot;: {},&quot;rules&quot;: {  &quot;object-literal-sort-keys&quot;: false,  &quot;no-console&quot;: true,  &quot;jsx-no-lambda&quot;: false,  &quot;no-submodule-imports&quot;: false,  &quot;no-implicit-dependencies&quot;: false}}</code></pre><p>tslintä¿å­˜æ—¶æ ¡éªŒé…ç½®</p><pre><code>&quot;editor.codeActionsOnSave&quot;: {  &quot;source.fixAll.eslint&quot;: true, // For ESLint  &quot;source.fixAll.tslint&quot;: true, // For TSLint  &quot;source.fixAll.stylelint&quot;: trueï¼Œ // For Stylelint}</code></pre><p>prettierä¿å­˜æ—¶æ ¡éªŒé…ç½®</p><pre><code>&quot;editor.formatOnSave&quot;: true,</code></pre></li><li><p>ps: ä½¿ç”¨<code>tslint-config-prettier</code>å…³é—­tslintä¸­æœ‰å…³æ ¼å¼çš„è§„åˆ™ï¼Œé¿å…tslintä¸prettieråœ¨æ ¼å¼è§„åˆ™ä¸Šäº§ç”Ÿå†²çªã€‚ç›®å‰æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼ˆ.jsxï¼‰ä¸­æ²¡æœ‰å¼€å¯è¿™ä¸€é¡¹ã€‚</p></li></ul><p>  å½“æŒ‰ctrl+sä¿å­˜ä»£ç æ—¶ï¼Œtslintæ’ä»¶ä¼šè‡ªåŠ¨æŒ‰ç…§é»˜è®¤é…ç½®æ–‡ä»¶ï¼ˆé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>tslint.json</code>ï¼‰æ£€æŸ¥ä»£ç é”™è¯¯ï¼Œprettieræ’ä»¶ä¼šè‡ªåŠ¨æŒ‰ç…§é»˜è®¤é…ç½®æ–‡ä»¶ï¼ˆé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>.prettierrc</code>ï¼‰æ£€æŸ¥ä»£ç é£æ ¼ï¼Œå¹¶è‡ªåŠ¨çŸ«æ­£ã€‚(ä¸å»ºè®®ä½¿ç”¨)</p><h4 id="VSCodeé…ç½®"><a href="#VSCodeé…ç½®" class="headerlink" title="VSCodeé…ç½®"></a>VSCodeé…ç½®</h4><p>  å»ºè®®å®‰è£…tsLint æ’ä»¶æ’ä»¶ï¼ŒvsCodeä¸­ç›´æ¥æœç´¢å®‰è£…ï¼›</p><ul><li><p>psï¼šè¿™ä¸ªåº“å¯<code>esLint</code>åº“å¯ä»¥å…±å­˜ï¼Œä½†æ˜¯éœ€è¦è¿›è¡Œé…ç½®ï¼Œä¿è¯åœ¨<code>.jsx</code>/<code>.tsx</code>æ–‡ä»¶ä¸­åªæœ‰ä¸€ä¸ªç”Ÿæ•ˆï¼Œä¸ç„¶é”™è¯¯æç¤ºä¼šæœ‰è¯¯æŠ¥çš„æƒ…å†µã€‚<br>å…·ä½“é…ç½®åœ°å€ï¼š<a href="https://github.com/Microsoft/typescript-tslint-pluginï¼›">https://github.com/Microsoft/typescript-tslint-pluginï¼›</a></p><p><img src="https://img.imgdb.cn/item/600ee2ed3ffa7d37b3236844.png" alt=""></p><p>åˆ°æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„ç¯å¢ƒå°±é…å¥½äº†ï¼Œæ¥ä¸‹æ¥å†™ä¸€ä¸ªå°çš„Reactçš„demo.tsxå§ï¼›</p></li></ul><h4 id="React-typescriptå†™æ³•"><a href="#React-typescriptå†™æ³•" class="headerlink" title="React typescriptå†™æ³•"></a>React typescriptå†™æ³•</h4><p>  å‡ ä¸ªæ¦‚å¿µReact.FCï¼š<br>  -FC = Functional Component<br>  -SFC = Stateless Functional Component (å·²å¼ƒç”¨)</p><p>  å­¦ä¹ typescriptçš„åŸºæœ¬è¯­æ³•,å…·ä½“tsè§ï¼š<a href="https://www.runoob.com/typescript/ts-variables.html">https://www.runoob.com/typescript/ts-variables.html</a></p><ul><li><p>ps: æˆ‘æœ‰è§†é¢‘ï¼Œå¦‚æœ‰éœ€è¦å¯æ‰¾æˆ‘è¦å“ˆğŸ˜„ï¼›</p><p>æœ‰äº†ä»¥ä¸Štypescrtå§¿åŠ¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™tsä»£ç äº†ã€‚â›½ï¸</p><p>ä¸‹é¢æ˜¯æˆ‘å†™çš„ä¸¤ç§å¸¸è§å†™æ³•çš„demoï¼›</p></li></ul><h5 id="æ³›å‹ç»„ä»¶å†™æ³•-å¯¹æ ‡Classå†™æ³•"><a href="#æ³›å‹ç»„ä»¶å†™æ³•-å¯¹æ ‡Classå†™æ³•" class="headerlink" title="æ³›å‹ç»„ä»¶å†™æ³•(å¯¹æ ‡Classå†™æ³•)"></a>æ³›å‹ç»„ä»¶å†™æ³•(å¯¹æ ‡Classå†™æ³•)</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> UseInfo <span class="token keyword">from</span> <span class="token string">"./UseInfo"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¼•ç”¨å…¶ä»–ç»„ä»¶ï¼ˆå¯ä»¥æ˜¯.tsxï¼Œä¹Ÿå¯ä»¥æ˜¯.jsxï¼‰</span><span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./test.less'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¼•ç”¨æ ·å¼æ–‡ä»¶</span><span class="token keyword">function</span> <span class="token function">getExclamationMarks</span><span class="token punctuation">(</span>numChars<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token function">Array</span><span class="token punctuation">(</span>numChars <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> string<span class="token punctuation">;</span>  enthusiasmLevel<span class="token punctuation">:</span> number<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>  now<span class="token punctuation">:</span> string<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>Props<span class="token punctuation">,</span> State<span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">:</span>Props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>      now<span class="token punctuation">:</span> <span class="token string">"fff"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> clickTest <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span>string<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>now<span class="token punctuation">:</span> <span class="token string">'###'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> enthusiasmLevel <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> now <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'@@@@@'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> hello <span class="token punctuation">:</span> string <span class="token operator">=</span> <span class="token number">111</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hello<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>enthusiasmLevel <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'You could be a little more enthusiastic. :D'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"hello"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>UseInfo <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"greeting"</span><span class="token operator">></span>          <span class="token punctuation">{</span><span class="token template-string"><span class="token string">`Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name <span class="token operator">+</span> <span class="token function">getExclamationMarks</span><span class="token punctuation">(</span>enthusiasmLevel<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>button<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clickTest</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Test<span class="token punctuation">;</span></code></pre><h5 id="Hookså†™æ³•"><a href="#Hookså†™æ³•" class="headerlink" title="Hookså†™æ³•"></a>Hookså†™æ³•</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Fragment<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> UseInfo <span class="token keyword">from</span> <span class="token string">"./UseInfo"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¼•ç”¨å…¶ä»–ç»„ä»¶ï¼ˆå¯ä»¥æ˜¯.tsxï¼Œä¹Ÿå¯ä»¥æ˜¯.jsxï¼‰</span><span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./base.less'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¼•ç”¨æ ·å¼æ–‡ä»¶</span><span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>    changeTitle<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> Auth <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">:</span> IProps<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">[</span>houseTitle<span class="token punctuation">,</span> setHoueseTitle<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>Fragment<span class="token operator">></span>      <span class="token operator">&lt;</span>useInfo <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>input            type<span class="token operator">=</span><span class="token string">"text"</span>            className<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>demo1<span class="token punctuation">}</span>            placeholder<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'please input'</span><span class="token punctuation">}</span>            value<span class="token operator">=</span><span class="token punctuation">{</span>houseTitle<span class="token punctuation">}</span>            onChange<span class="token operator">=</span><span class="token punctuation">{</span>changeTitle<span class="token punctuation">}</span>        <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">></span><span class="token punctuation">)</span>    <span class="token keyword">function</span> <span class="token function">changeTitle</span><span class="token punctuation">(</span>e<span class="token punctuation">:</span>any<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// æˆ¿å±‹æ ‡é¢˜</span>        <span class="token function">setHoueseTitle</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> Auth</code></pre><p>å¥½äº†ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªå®Œæ•´çš„<code>umi</code>æ”¯æŒ<code>ts</code>å†™æ³•åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›å¤§å®¶éƒ½å­¦ä¼šäº†ã€‚</p><h4 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h4><p>éšç€å‰ç«¯æŠ€æœ¯çš„å‘å±•ã€‚å¼±ç±»å‹åŸºæœ¬ä¸èƒ½æ»¡è¶³æˆ‘ä»¬æ—¥ç›Šå¤æ‚çš„ä¸šåŠ¡ï¼Œå¼ºç±»å‹è¯­è¨€æ˜¯æœªæ¥çš„è¶‹åŠ¿ã€‚<br>Framework - Angular2ã€UI - ant-designã€library - RxJSç­‰é¡¹ç›®å·²ç»éƒ½è¿ç§»åˆ°typescriptäº†ï¼Œæˆ‘ä»¬è¿˜ä¸è·Ÿè¿›å—ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¨ç«™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> umi </tag>
            
            <tag> ts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ios safari è¿”å›æ—¶ä¸æ‰§è¡Œä»£ç é—®é¢˜è§£æ</title>
      <link href="2020/12/22/ios-goBack-catch/"/>
      <url>2020/12/22/ios-goBack-catch/</url>
      
        <content type="html"><![CDATA[<h4 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h4><p>  æœ€è¿‘åœ¨è°ƒè¯•é’‰é’‰/ä¼ä¸šå¾®ä¿¡æ—¶å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨iosä¸Šä½¿ç”¨è¿”å›é”®æ—¶ï¼Œä¸Šä¸€é¡µçš„å†…å®¹ä¸æ‰§è¡Œjsä»£ç ï¼Œå¯¼è‡´reactçš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…componentDidMountéƒ½ä¸æ‰§è¡Œï¼Œç”±äºè¿™ä¸¤ä¸ªå¹³å°éƒ½æ²¡æœ‰å¼€å‘è€…å·¥å…·ï¼Œæ— æ³•è¿›è¡Œè°ƒè¯•ç€å®åºŸäº†ä¸€ç•ªåŠŸå¤«ã€‚</p><ul><li><p>é—®é¢˜æè¿°</p><p>æœ€è¿‘åœ¨å¼€å‘é’‰é’‰/ä¼ä¸šå¾®ä¿¡å†…åµŒç¬¬ä¸‰æ–¹é¡µé¢æ—¶ï¼Œä½¿ç”¨è¿”å›æ—¶ï¼Œä¼šå¯¼è‡´é¡µé¢ç™½å±é—®é¢˜ï¼Œé—®é¢˜æ¯”è¾ƒæ£˜æ‰‹ï¼ŒèŠ±äº†3-4dayç”¨æ¥å®šä½é—®é¢˜ï¼ŒæœŸé—´èµ°äº†ä¸€äº›å¼¯è·¯ã€‚<br><img src="https://pic.downk.cc/item/5fea06dd3ffa7d37b382ee7e.png" alt=""></p><p>å¦‚ä¸Šå›¾ï¼Œé¡µé¢ä¸Šæœ‰ä¸¤ä¸ªå«æœ‰æ»šåŠ¨æ¡çš„DIVï¼Œä¸€ä¸ªæ˜¯é¡¶éƒ¨çš„ä¸‹æ‹‰modalï¼Œä¸€ä¸ªæ˜¯bodyä¸­çš„åˆ—è¡¨ï¼Œä½†ç‚¹å‡»åˆ°è¯¦æƒ…çš„æ—¶å€™ï¼ˆç¬¬ä¸‰å¼ å›¾ï¼‰ï¼Œç„¶åå†ç‚¹å‡»è¿”å›ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé¡¶éƒ¨çš„ä¸‹æ‹‰modalä¸­å°±ä¼šæœ‰éƒ¨åˆ†å†…å®¹ä¸é™æ—¶ï¼Œå¦‚å›¾äºŒï¼Œå…¶å®æ˜¯æœ‰å†…å®¹çš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œåªè¦å°†bodyä¸­çš„å†…å®¹æ»šåŠ¨ä¸€ä¸‹ï¼Œmodalçš„å†…å®¹å°±éƒ½å‡ºæ¥äº†ã€‚</p></li><li><p>ä»¥ä¸‹æ˜¯åˆ†æè¿‡ç¨‹ï¼š</p></li></ul><h5 id="æ•°æ®é—®é¢˜"><a href="#æ•°æ®é—®é¢˜" class="headerlink" title="æ•°æ®é—®é¢˜"></a>æ•°æ®é—®é¢˜</h5><p>  çœ‹åˆ°é—®é¢˜åç¬¬ä¸€ä¸ªæ€€ç–‘çš„å°±æ˜¯æ•°æ®å’Œä»£ç ç»“æ„é—®é¢˜,å¯¼è‡´æ•°æ®è¢«è¦†ç›–æˆ–è€…æ²¡æ¶æ„æˆªå–çš„å‰11ä¸ªï¼Œä»¥ä¸ºåˆ‡æ¢ä¸åŒçš„è´¦å·ï¼Œå‘ç°æ¯æ¬¡éƒ½æ˜¾ç¤ºå‰11ä¸ªï¼Œåé¢çš„ä¸æ˜¾ç¤ºï¼Œä»£ç å¦‚ä¸‹</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token comment" spellcheck="true">// æ¸²æŸ“å…¨éƒ¨æ ‡ç­¾</span>  renderALlTags <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> currentTag<span class="token punctuation">,</span> activeIndex<span class="token punctuation">,</span> selectTabIndex <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> backlogTagList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>    <span class="token keyword">const</span> showTagList <span class="token operator">=</span> backlogTagList<span class="token operator">?</span><span class="token punctuation">.</span><span class="token punctuation">[</span>activeIndex <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'pendingList'</span> <span class="token punctuation">:</span> <span class="token string">'doneList'</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>tagList<span class="token punctuation">}</span><span class="token operator">></span>        <span class="token punctuation">{</span>showTagList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token keyword">return</span> <span class="token punctuation">(</span>            <span class="token operator">&lt;</span>div              className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>style<span class="token punctuation">.</span>tagItem<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>                <span class="token function">Number</span><span class="token punctuation">(</span>currentTag<span class="token punctuation">)</span> <span class="token operator">===</span> item<span class="token punctuation">.</span>tag <span class="token operator">&amp;&amp;</span> selectTabIndex <span class="token operator">===</span> activeIndex                  <span class="token operator">?</span> style<span class="token punctuation">.</span>active                  <span class="token punctuation">:</span> <span class="token string">''</span>              <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span>              key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>tag<span class="token punctuation">}</span>              onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleTagChange</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token punctuation">}</span>            <span class="token operator">></span>              <span class="token punctuation">{</span>item<span class="token punctuation">.</span>tagName<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token function">filterNum</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>total<span class="token punctuation">)</span><span class="token punctuation">}</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>          <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>checkä»£ç å‘ç°å’Œä¸Šé¢çš„æ²¡æœ‰å…³ç³»ã€‚<br>ç„¶åä½¿ç”¨å¼ºåˆ¶æ»šåŠ¨ï¼Œå‘ç°ä»£ç å‹æ ¹å°±æ²¡æœ‰æ‰§è¡Œï¼Œè¿consoleéƒ½æ²¡æœ‰æ‰“å°ã€‚ã€‚ã€‚ã€‚</p><h5 id="è¿è¡Œç¯å¢ƒé—®é¢˜"><a href="#è¿è¡Œç¯å¢ƒé—®é¢˜" class="headerlink" title="è¿è¡Œç¯å¢ƒé—®é¢˜"></a>è¿è¡Œç¯å¢ƒé—®é¢˜</h5><ul><li>å› ä¸ºå†æœ¬åœ°å¼€å‘ç¯å¢ƒæ²¡æœ‰å‡ºç°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œåªæœ‰å†éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šæ‰å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥å‡ºç°è¿™ä¸ªé—®é¢˜åº”è¯¥å’Œç¯å¢ƒæœ‰å…³ã€‚</li><li>æ¥ä¸‹æ¥å‘ç°å†æœ‰å†iosç³»ç»Ÿä¸Šæ‰æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå®‰å“å¹¶æ²¡æœ‰ï¼Œæœç„¶æ˜¯è¿è¡Œç¯å¢ƒçš„é—®é¢˜ğŸ˜„ï¼Œé«˜å…´çš„å¤ªæ—©äº†ã€‚</li><li>çŸ¥é“ç¯å¢ƒé—®é¢˜åï¼Œå°±å¼€å§‹ä¸€é€šç™¾åº¦ã€‚ã€‚ã€‚ã€‚<br>è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</li></ul><pre class=" language-javascript"><code class="language-javascript">  <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">var</span> isPageHide <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>isPageHide<span class="token punctuation">)</span> <span class="token punctuation">{</span>              window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pagehide'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          isPageHide <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//æˆ–è€…</span>  <span class="token keyword">function</span> <span class="token function">pushHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"popstate"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"å›é€€ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// window.history.back();</span>    <span class="token comment" spellcheck="true">//åœ¨å†å²è®°å½•ä¸­åé€€,è¿™å°±åƒç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨çš„åé€€æŒ‰é’®ä¸€æ ·ã€‚</span>    <span class="token comment" spellcheck="true">// window.history.go(-1);</span>    <span class="token comment" spellcheck="true">//ä½ å¯ä»¥ä½¿ç”¨go()æ–¹æ³•ä»å½“å‰ä¼šè¯çš„å†å²è®°å½•ä¸­åŠ è½½é¡µé¢ï¼ˆå½“å‰é¡µé¢ä½ç½®ç´¢å¼•å€¼ä¸º0ï¼Œä¸Šä¸€é¡µå°±æ˜¯-1ï¼Œä¸‹ä¸€é¡µä¸º1ï¼‰ã€‚</span>    <span class="token comment" spellcheck="true">// self.location=document.referrer;</span>    <span class="token comment" spellcheck="true">//å¯ä»¥è·å–å‰ä¸€é¡µé¢çš„URLåœ°å€çš„æ–¹æ³•,å¹¶è¿”å›ä¸Šä¸€é¡µã€‚</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">var</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>    title<span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span>    url<span class="token punctuation">:</span> <span class="token string">"#"</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>   window<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>å·´æ‹‰å·´æ‹‰æ‰¾äº†ä¸€å †ï¼Œpopstateï¼Œpageshowï¼ŒforceUpdateç­‰ã€‚ã€‚ã€‚ä¸€ä¸ªä¸€ä¸ªçš„è¯•ï¼Œå‘ç°éƒ½ä¸è¡Œï¼Œæ­¤å¤„çœç•¥åä¸‡ä¸ªå­—ã€‚<br>ç»æœ›äº†ã€‚ã€‚ã€‚ã€‚</p><h5 id="æ³¨é‡Šä»£ç å’Œä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"><a href="#æ³¨é‡Šä»£ç å’Œä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="æ³¨é‡Šä»£ç å’Œä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"></a>æ³¨é‡Šä»£ç å’Œä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</h5><p>  1.æ²¡æœ‰åŠæ³•çš„æƒ…å†µä¸‹å¼€å§‹æ³¨é‡Šä»£ç ï¼Œä¸æ–­çš„æ³¨é‡Šï¼Œä¸æ–­çš„å°è¯•ï¼Œå±…ç„¶æ²¡æœ‰ä¸€æ¬¡å¯ä»¥ï¼Œå‘ç°é—®é¢˜éšè—æ¯”è¾ƒæ·±ã€‚<br>  2.æ³¨é‡Šä»£ç ä¸è¡Œå°±å¼€å§‹å§ä½¿ç”¨çš„antdåº“å…¨éƒ¨ç”¨åŸç”Ÿdivè¿›è¡Œé‡å†™ï¼Œå†™å®Œä¹‹åå‘ç°é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œå¯ä»¥è‚¯å®šè¿™ä¸ªä¸æ˜¯å’Œåˆ†è£…æœ‰å…³ï¼Œå¼€å§‹æ€€ç–‘æ˜¯æŸäº›æ ·å¼æˆ–è€…jsåœ¨è¿™ä¸ªç¯å¢ƒä¸‹ä¸æ”¯æŒã€‚<br>  3.è¿™ä¸ªæ—¶å€™å¼€å§‹æƒ³æ€ä¹ˆèƒ½debuggerä¸€ä¸‹ï¼Œå¼€å§‹æ‰¾å„ç§å·¥å…·å°è¯•ã€‚<br>  emmï¼Œä¸€å¤©è¿‡å»äº†ï¼Œé—®é¢˜ä¾ç„¶æ²¡æœ‰å¤´ç»ª</p><h5 id="Safariè°ƒè¯•æ¨¡å¼"><a href="#Safariè°ƒè¯•æ¨¡å¼" class="headerlink" title="Safariè°ƒè¯•æ¨¡å¼"></a>Safariè°ƒè¯•æ¨¡å¼</h5><p>  1.çªç„¶æƒ³èµ·æ¥ï¼Œsafariåœ¨macä¸Šæä¾›äº†å¼€å‘è€…æ¨¡å¼ï¼Œå¯ä»¥è”æœºè°ƒè¯•ï¼Œè¯´å¹²å°±å¹²ï¼Œæ‰’tokenï¼Œæˆæƒï¼Œç„¶åå¯åŠ¨ã€‚<br>  2.ç³»ç»Ÿå€’æ˜¯æ­£å¸¸è¿è¡Œèµ·æ¥äº†ï¼Œä½†æ˜¯é—®é¢˜æ²¡æœ‰å¤ç°ï¼Œåå¤ç¡®å®šåå‘ç°åªæœ‰åœ¨é’‰é’‰/ä¼ä¸šå¾®ä¿¡é‡Œæ‰ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶æœ‰Safariçš„è°ƒè¯•æ€è·¯ï¼Œæ‰¾é’‰é’‰çš„å¼€å‘è¿™æ¨¡å¼ã€‚<br>  3.é’‰é’‰æ–‡æ¡£ï¼š<a href="https://ding-doc.dingtalk.com/doc#/kn6zg7/qg4y64">https://ding-doc.dingtalk.com/doc#/kn6zg7/qg4y64</a> è°ƒè¯•å·¥å…·ä¸æ”¯æŒiosç‰ˆæœ¬ã€‚ã€‚ã€‚æ— è§£</p><p>  <img src="https://pic.downk.cc/item/5fea0bb23ffa7d37b38512c9.png" alt=""></p><p>  è¿™æ—¶å€™å·²ç»é™·å…¥ç»æœ›äº†ã€‚æ— æ³•è°ƒè¯•ï¼Œé—®é¢˜å°±æ— æ³•å®šä½ï¼Œåªèƒ½é ç›²çŒœã€‚</p><h5 id="react-infinite-scrollerç ”è¯»"><a href="#react-infinite-scrollerç ”è¯»" class="headerlink" title="react-infinite-scrollerç ”è¯»"></a>react-infinite-scrollerç ”è¯»</h5><p>  æ²¡æœ‰å…¶ä»–ä¾¿æ·çš„æ–¹æ³•åï¼Œå¼€å§‹åˆ†æä»£ç ï¼Œè€ƒè™‘æœ‰å¯èƒ½å‡ºç°é—®é¢˜çš„ä½ç½®è¿›è¡Œå®šä½ã€‚react-infinite-scrollerè¿™ä¸ªåº“çš„æ–‡æ¡£ä»”ç»†çœ‹äº†ä¸€ä¸‹<br>  <a href="https://www.npmjs.com/package/react-infinite-scroller">https://www.npmjs.com/package/react-infinite-scroller</a><br>  æœ‰å‡ ä¸ªAPIæ¯”è¾ƒå¯ç–‘ä½†æ˜¯è¯•äº†ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼›<br>  <img src="https://pic.downk.cc/item/5fea0cdd3ffa7d37b3859cf0.png" alt=""></p><p>  åœ¨è¿™é‡Œå‘ç°äº†æ»šåŠ¨åŒºåŸŸçš„é—®é¢˜ï¼Œä½†æ˜¯è¯•äº†ä¸€ä¸‹ï¼Œæ”¹å˜æ»šåŠ¨åŒºç»‘å®šçš„ä½ç½®é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼š</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token operator">&lt;</span>InfiniteScroll    initialLoad<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>    pageStart<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>    loadMore<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInfiniteOnLoad<span class="token punctuation">}</span>    hasMore<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>    getScrollParent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrollParentRef<span class="token punctuation">}</span>    threshold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">350</span><span class="token punctuation">}</span>  <span class="token operator">></span>  <span class="token comment" spellcheck="true">//æ»šåŠ¨å†…å®¹</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>InfiniteScroll<span class="token operator">></span></code></pre><p>  çœ‹äº†è¿™ä¸ªæ–‡æ¡£åå¼€å§‹å¾€æ»šåŠ¨åŒºåŸŸä¸Šæƒ³ï¼Œç„¶åå„ç§å°è¯•ï¼Œå„ç§ç»‘å®šï¼Œå±…ç„¶éƒ½ä¸èƒ½æ»šåŠ¨åŠ è½½æ›´å¤šäº†ğŸ˜­ã€‚<br>  ç„¶åå°±å¼€å§‹ç ”ç©¶æ»šåŠ¨é—®é¢˜ã€‚æœ€å¼€å§‹æ€€ç–‘è¿‡ï¼Œä½†æ˜¯è‡ªè®¤ä¸ºä¸å¯èƒ½ï¼Œæ²¡æœ‰å¾€è¿™ä¸ªæ–¹é¢æ·±å…¥ã€‚</p><h5 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h5><p>  iosé¡µé¢åŠ è½½ä¸å…¨ä¸èƒ½æ»šåŠ¨</p><ul><li><p>é—®é¢˜æè¿° ï¼šiosä»é¦–é¡µè¿›å…¥ï¼Œè·³è½¬å…¶ä»–é¡µé¢å†åé€€åˆ°é¦–é¡µï¼Œé¦–é¡µåªæ˜¾ç¤ºä¸€å±å†…å®¹ä¸”æ— æ³•æ»šåŠ¨ã€‚</p></li><li><p>é—®é¢˜åŸå› ï¼šåœ¨äºiosæµè§ˆå™¨å†…æ ¸çš„åˆ«è‡´æ¸²æŸ“é€»è¾‘ï¼šå®ƒä¼šé¢„å…ˆæ‰¾åˆ°ç›¸åº”çš„overflow: scrollå…ƒç´ ï¼Œå¦‚æœå­å…ƒç´ é«˜åº¦é«˜äºçˆ¶å…ƒç´ ï¼Œåˆ™å»ºç«‹åŸç”Ÿçš„scrollViewå®ç°æ»šåŠ¨ã€‚é—®é¢˜å°±å‡ºç°åœ¨è¿™ä¸ªâ€œé¢„å…ˆâ€ä¸Šï¼Œå®ƒé¢„å…ˆè·å–çš„é«˜åº¦å¹¶ä¸æ˜¯å­å…ƒç´ æ¸²æŸ“åçš„çœŸå®é«˜åº¦ã€‚</p></li><li><p>è§£å†³åŠæ³•ï¼šç»™è®¾ç½®äº†æ»šåŠ¨çš„#rootå…ƒç´ ä¸‹çš„å­å…ƒç´ wrapperè®¾ç½®min-height: 100vh; å…ˆè®©wrapperå†…å®¹è®¾ç½®ä¸ºæ»šåŠ¨åŒºåŸŸï¼Œè¿›è¡Œæ’‘å¼€ï¼Œç„¶åå°†æ»šåŠ¨åŠ è½½æ›´å¤šäº‹ä»¶ç»‘å®šåœ¨wrapperä¸Šè¿›è¡Œç›‘å¬ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token id">#root</span></span><span class="token punctuation">{</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token important">!important</span><span class="token punctuation">;</span>  // <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> scroll!important<span class="token punctuation">;</span>  <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch!important<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector"><span class="token class">.wrapper</span> </span><span class="token punctuation">{</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span>  <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span>  <span class="token property">min-height</span><span class="token punctuation">:</span> <span class="token number">100</span>vh<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>divclassName<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>wrapper<span class="token punctuation">}</span>ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scrollParentRef <span class="token operator">=</span> ref<span class="token punctuation">)</span><span class="token punctuation">}</span>id<span class="token operator">=</span><span class="token string">"scrollableDiv"</span><span class="token operator">></span><span class="token operator">&lt;</span>InfiniteScroll  initialLoad<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>  pageStart<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>  loadMore<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInfiniteOnLoad<span class="token punctuation">}</span>  hasMore<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>  getScrollParent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrollParentRef<span class="token punctuation">}</span>  threshold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">350</span><span class="token punctuation">}</span>  scrollableTarget<span class="token operator">=</span><span class="token string">"scrollableDiv"</span><span class="token operator">></span><span class="token comment" spellcheck="true">// å†…å®¹ä»£ç </span><span class="token operator">&lt;</span><span class="token operator">/</span>InfiniteScroll<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre></li></ul><p>ç„¶åæœ¬åœ°è°ƒè¯•å‘ç°æ²¡æœ‰æ–°çš„é—®é¢˜ï¼Œéƒ¨ç½²ï¼Œcheckï¼Œé—®é¢˜è§£å†³ã€‚</p><h5 id="é—®é¢˜æ€»ç»“"><a href="#é—®é¢˜æ€»ç»“" class="headerlink" title="é—®é¢˜æ€»ç»“"></a>é—®é¢˜æ€»ç»“</h5><p>  1.ç”±äºç¯å¢ƒé—®é¢˜ï¼Œæ— æ³•è¿›è¡Œç›´è§‚çš„è°ƒè¯•ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œåç»­ç ”ç©¶ä¸€ä¸‹æœ‰æ²¡æœ‰æ›´å¥½çš„å·¥å…·ã€‚<br>  2.ç›²ç›®çš„ä»¥ç»éªŒæ¥åˆ¤æ–­æ˜¯è‡ªå·±çš„æ–¹å‘é”™è¯¯å¯¼è‡´è€½è¯¯äº†ä¸€äº›æ—¶é—´ã€‚<br>  3.é—®é¢˜çš„åŸå› åŒäº‹ä¹Ÿæœ‰æ€€ç–‘è¿‡ï¼Œå¹¶ä¸”æå‡ºè¿‡ï¼Œç”±äºè‡ªå·±è¯•çš„ä¸å¤Ÿå½»åº•ç›²ç›®çš„è®¤ä¸ºä¸æ˜¯è¿™ä¸ªåŸå› å¯¼è‡´èµ°äº†å¼¯è·¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debug </tag>
            
            <tag> web </tag>
            
            <tag> Safari </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ ä¸çŸ¥é“æµè§ˆå™¨debugæ–¹æ³•</title>
      <link href="2020/11/13/Browser-debug/"/>
      <url>2020/11/13/Browser-debug/</url>
      
        <content type="html"><![CDATA[<h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>å†™æœ¬ç¯‡åšå®¢çš„ç”±æ¥æ˜¯ä¸Šæ¬¡èˆœé˜³çš„æ€§èƒ½è°ƒè¯•å¼•ç”³å‡ºæ¥çš„ï¼Œæœ¬äººé¡ºå¸¦æŒ–æ˜äº†ä¸€ä¸‹é™¤äº†å¸¸ç”¨çš„sorce debuggerå’Œconsoleï¼Œæˆ‘ä»¬çš„Chromeæµè§ˆå™¨éƒ½è¿˜èƒ½å¸®æˆ‘ä»¬åœ¨å¹³æ—¶å·¥ä½œä¸­æä¾›é‚£äº›å¥½ç”¨çš„è°ƒè¯•æ¨¡å¼å‘¢ã€‚å¦‚ä¸‹å›¾chromeè°ƒè¯•æ¨¡å¼æœ‰å¥½å¤šçš„å†…å®¹ï¼Œä¸‹é¢å°±ä¸€ä¸€åˆ—ä¸¾ä¸€ä¸‹ã€‚</p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/b798ddc332d26ebd.jpg" alt=""></p><h4 id="elements"><a href="#elements" class="headerlink" title="elements"></a>elements</h4><p>1.ç”¨æ¥æŸ¥çœ‹ï¼Œä¿®æ”¹é¡µé¢ä¸Šçš„å…ƒç´ ï¼›ï¼ˆåŒ…æ‹¬DOMæ ‡ç­¾ï¼Œä»¥åŠcssæ ·å¼çš„æŸ¥çœ‹ï¼Œä¿®æ”¹ï¼Œè¿˜æœ‰ç›¸å…³ç›’æ¨¡å‹çš„å›¾å½¢ä¿¡æ¯ç­‰ï¼‰ï¼ˆæˆ‘ä»¬å¸¸ç”¨çš„ç•¥è¿‡ï¼‰<br>2.æŸ¥çœ‹domä¸Šç»‘å®šçš„äº‹ä»¶ã€‚<br>3.æ‹·è´éƒ½æ²¡èŠ‚ç‚¹ã€‚<br>4.æŸ¥çœ‹æ ·å¼æ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„ã€‚</p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/99cef2dabe985735.jpg" alt=""></p><pre><code>â€”â€”â€”handleræ˜¯å¤„ç†å‡½æ•°, å³é”®å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°å®šä¹‰çš„ä½ç½®, ä¸€èˆ¬ js åº“ç»‘å®šäº‹ä»¶ä¼šåŒ…ä¸€å±‚, æ‰€ä»¥è¿™é‡Œå¾ˆéš¾æ‰¾åˆ°å¯¹åº”handlerâ€”â€”â€”isAtribute è¡¨æ˜äº‹ä»¶æ˜¯å¦é€šè¿‡ html å±æ€§(ç±»ä¼¼onClick)å½¢å¼ç»‘å®šçš„â€”â€”â€”useCapture æ˜¯ addEventListener çš„ç¬¬ä¸‰ä¸ªå‚æ•°, è¯´æ˜äº‹ä»¶æ˜¯ä»¥ å†’æ³¡ è¿˜æ˜¯ æ•è· é¡ºåºæ‰§è¡Œ</code></pre><h4 id="console"><a href="#console" class="headerlink" title="console"></a>console</h4><p>1.ç”¨æ¥åå‡ºä»£ç ä¸­consoleçš„æ—¥å¿—æœ‰ï¼ˆlogã€gruopã€errorç­‰æ–¹æ³•ï¼Œå…·ä½“å¯è‡ªè¡ŒæŸ¥æ‰¾ï¼‰<br>2.é™¤äº†1æˆ‘ä»¬è¿˜å¯ä»¥åœ¨é‡Œé¢æ‰§è¡Œä¸€äº›æµ‹è¯•ä»£ç å’Œæ–¹æ³•ã€‚<br>3.ä¹Ÿå¯ä»¥åå‡ºä¸€äº›å¼•ç”¨ï¼ŒæŸ¥æ‰¾æ–¹æ³•å¯¹åº”çš„æ‰§è¡Œå‰åå¾ªåºå’Œä½ç½®ã€‚</p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/980bc3e8e3887079.jpg" alt=""></p><h4 id="Sources"><a href="#Sources" class="headerlink" title="Sources"></a>Sources</h4><p>è¿™ä¸ªé¡µé¢å†…æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å½“å‰æµè§ˆå™¨é¡µé¢ä¸­çš„jsæºæ–‡ä»¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹å’Œè°ƒè¯•ã€‚åœ¨æ­£å¼å‘å¸ƒçš„ç½‘ç«™ä¸­æˆ‘ä»¬çœ‹åˆ°çš„éƒ½æ˜¯å‹ç¼©è¿‡çš„ä»£ç ï¼Œä½†æ˜¯åœ¨è°ƒè¯•çš„æ˜¯åè¿™é‡Œæ˜¯æœ¬åœ°çš„èµ„æºæ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç‚¹å‡»ä¸‹é¢çš„{}å¤§æ‹¬å·æŒ‰é’®å°†ä»£ç è½¬æˆå¯è¯»æ ¼å¼ï¼Œä¸‹å›¾æ˜¯ä¸¤ä¸ªä¸åŒçš„ä»£ç ï¼Œç”±äºçº¿ä¸Šçš„umiæ‰“åŒ…åå¤ªå¤§äº†æˆ‘å°±å…ˆæˆªå–äº†ä¸€ä¸ªæœ¬åœ°çš„å›¾ã€‚</p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/0ecb959850f40374.jpg" alt=""></p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/ae6885aabe64e56d.jpg" alt=""></p><ul><li>Sinppets:</li></ul><p>å¯ä»¥æ‰§è¡Œä»£ç ç‰‡æ®µï¼š<br>å½“æˆ‘ä»¬æƒ³çŸ¥é“ä»£ç ä¸­çš„æŸä¸ªæ–¹æ³•æ€ä¹ˆæ˜¯ç”¨æˆ–è€…æ˜¯éœ€è¦æµ‹è¯•ä¸€ä¸ªæ–°çš„å‡½æ•°æ˜¯å¦åœ¨è¿™é‡Œå¯ä»¥è°ƒç”¨æ—¶ï¼Œä¼šæ‰“å¼€æ§åˆ¶å°æœ‰é’ˆå¯¹æ€§çš„å†™ä¸€äº›è°ƒè¯•ä»£ç ï¼Œæˆ–è€…æƒ³æµ‹è¯•ä¸€ä¸‹åˆšåˆšå†™çš„æ–¹æ³•æ˜¯å¦ä¼šå‡ºç°æœŸå¾…çš„æ ·å­ï¼Œä½†æ˜¯æ§åˆ¶å°ä¸€æ‰“å›è½¦æœ¬æƒ³æ¢è¡Œä½†æ˜¯å´æ‰§è¡Œåˆšå†™çš„åŠæˆªä»£ç .</p><p>æ‰€ä»¥æ¨èä½¿ç”¨Sourcesä¸‹é¢çš„å·¦ä¾§çš„Sinppetsä»£ç ç‰‡æ®µæŒ‰é’®è¿™æ—¶å€™ç‚¹å‡»åˆ›å»ºä¸€ä¸ªæ–°çš„ç‰‡æ®µæ–‡ä»¶ï¼Œå†™å®Œæµ‹è¯•ä»£ç åæŠŠé¼ æ ‡æ”¾åœ¨æ–°å»ºæ–‡ä»¶ä¸Šrunï¼Œå†ç»“åˆæ§åˆ¶å°æŸ¥çœ‹ç›¸å…³ä¿¡æ¯</p><p>æ–°å»ºäº†ä¸€ä¸ªåå«ï¼ša.jsçš„ç‰‡æ®µä»£ç ï¼Œåœ¨ä½ çš„é¡¹ç›®ç¯å¢ƒé¡µé¢å†…ï¼Œè¯¥ç‰‡æ®µå¯æ‰§è¡Œé¡¹ç›®å†…çš„æ–¹æ³•ï¼›</p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/59f7c6ef5e2f6e82.jpg" alt=""></p><ul><li>Content scripts:<br>Chrome çš„ä¸€ç§æ‰©å±•ç¨‹åºï¼Œå®ƒæ˜¯æŒ‰ç…§æ‰©å±•çš„IDæ¥ç»„ç»‡çš„ï¼Œè¿™äº›æ–‡ä»¶ä¹Ÿæ˜¯åµŒå…¥åœ¨é¡µé¢ä¸­çš„èµ„æºï¼Œè¿™ç±»æ–‡ä»¶å¯ä»¥è¯»å†™å’Œæ“ä½œæˆ‘ä»¬çš„èµ„æºï¼Œéœ€è¦è°ƒè¯•è¿™äº›æ‰©å±•æ–‡ä»¶ï¼Œåˆ™å¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰“å¼€ç›¸å…³æ–‡ä»¶è°ƒè¯•ï¼Œæˆ‘ä»¬çš„é¡¹ç›®é‡Œç›®å‰å¼•å…¥é‡Œjqueryçš„ç›¸å…³æ–¹æ³•ã€‚</li></ul><p><img src="https://ftp.bmp.ovh/imgs/2020/11/0044dc512a86138a.jpg" alt=""></p><h4 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h4><p>å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„èµ„æºè¯·æ±‚ï¼ŒåŒ…æ‹¬ç½‘ç»œè¯·æ±‚ï¼Œå›¾ç‰‡èµ„æºï¼Œhtml,cssï¼Œjsæ–‡ä»¶ç­‰è¯·æ±‚ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚ç­›é€‰è¯·æ±‚é¡¹ï¼Œä¸€èˆ¬å¤šç”¨äºç½‘ç»œè¯·æ±‚çš„æŸ¥çœ‹å’Œåˆ†æï¼Œåˆ†æåç«¯æ¥å£æ˜¯å¦æ­£ç¡®ä¼ è¾“ï¼Œè·å–çš„æ•°æ®æ˜¯å¦å‡†ç¡®ï¼Œè¯·æ±‚å¤´ï¼Œè¯·æ±‚å‚æ•°çš„æŸ¥çœ‹ç­‰ã€‚<br>1.å¯å‹¾é€‰å•ç‹¬çš„xhrï¼Œjsï¼Œcssç­‰ã€‚<br>2.å¯ä»¥åœ¨previewä¸­æŸ¥çœ‹jsonæ ¼å¼åŒ–çš„æ¥å£è¿”å›ã€‚</p><p>è¿™é‡Œé‡ç‚¹æä¸€ä¸‹ï¼Œåœ¨é‚®ä»¶copyä¸­æœ‰ä¸€ç³»åˆ—çš„é€‰ä¸‹ï¼Œè¿™é‡Œå¯ä»¥æŠŠè¿™ä¸ªè¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯éƒ½copyå‡ºæ¥ï¼Œä¾¿äºæˆ‘ä»¬ç»™åè·å‘é€ã€‚ï¼ˆä¸»è¦ç”¨curlï¼‰<br><img src="https://ftp.bmp.ovh/imgs/2020/11/07d6f18ff7553c44.jpg" alt=""></p><h4 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h4><p>æ—¶é—´è¡¨å¯ä»¥è®°å½•å’Œè¿è¡Œåˆ†æåº”ç”¨ç¨‹åºæ‰€æœ‰çš„æ´»åŠ¨ï¼Œä¸ºäº†ä½¿çš„è®°å½•é¡µé¢çš„äº¤äº’ï¼Œæ‰“å¼€æ—¶é—´è½´é¢æ¿ï¼Œç„¶åæŒ‰å¼€å§‹å½•åˆ¶å½•åˆ¶æŒ‰é’®ï¼ˆï¼‰ï¼Œæˆ–è€…é€šè¿‡é”®å…¥é”®ç›˜å¿«æ·é”®Cmdçš„ +Eï¼ˆMacï¼‰æˆ–æŒ‰Ctrl +Eï¼ˆWindows / Linuxç‰ˆï¼‰ã€‚è¿™ä¸ªè®°å½•æŒ‰é’®ä¼šä»ç°è‰²å˜æˆçº¢è‰²ï¼Œè€ŒTimelineå°†å¼€å§‹ä»ä½ çš„é¡µé¢è·å–æ—¶é—´çº¿ï¼ˆtimelineï¼‰ã€‚åœ¨ä½ çš„åº”ç”¨ä¸­å®Œæˆä¸€äº›æ“ä½œï¼Œè®°å½•åˆ°ä¸€äº›æ•°æ®ä¹‹åï¼Œå†ä¸€æ¬¡ç‚¹å‡»æŒ‰é’®æ¥åœæ­¢è®°å½•ã€‚è¿™ä¸ªåˆ†æä¼šæœ‰ç‚¹æ…¢ã€‚</p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/8a4a398265e0e37d.jpg" alt=""></p><p>ç¬¬ä¸€ä¸ªæ¡†é‡Œæ˜¯æ¦‚è¿°ï¼Œè¿™é‡Œå¯ä»¥å¤§è‡´çœ‹åˆ°é¡µé¢çš„æ€§èƒ½å’Œæ‰§è¡Œæ•ˆç‡ã€‚</p><p>ç¬¬äºŒä¸ªæ¡†é‡Œæ˜¯eventï¼Œå³æ˜¯äº‹ä»¶ç›‘æ§ã€‚è¿™æ˜¯CPUçš„å †æ ˆè·Ÿè¸ªçš„å¯è§†åŒ–ï¼Œç»¿è‰²è¡¨ç¤ºåª’ä½“æ—¶é—´ï¼Œçº¢è‰²è¡¨ç¤ºè´Ÿè½½äº‹ä»¶ï¼Œè“è‰²è¡¨ç¤ºDOMäº‹ä»¶ã€‚</p><p>ç¬¬ä¸‰ä¸ªæ¡†é‡Œè¡¨ç¤ºå­˜å‚¨ã€‚</p><p>ç¬¬å››ä¸ªæ¡†é‡Œæ˜¯è¯¦ç»†ä¿¡æ¯ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºäº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>ä¸Šå›¾å¯è§è„šæœ¬15.68sï¼Œæ¸²æŸ“æ—¶é—´2.7sï¼Œç»˜åˆ¶æ—¶é—´0.46sè¯´æ˜æˆ‘ä»¬è„šæœ¬å ç”¨çš„æ¯”è¾ƒå¤§çš„èµ„æºã€‚é€šè¿‡è¿™ä¸ªå¯ä»¥åˆ†æå¦‚æœç³»ç»Ÿååº”æ…¢ä¸»è¦ç—‡çŠ¶ç‚¹åœ¨é‚£ä¸ªè¿‡ç¨‹ï¼Œé€šè¿‡å¦‚ä¸‹åˆ†æå¯ä»¥ç›¸åº”çš„ç»™å‡ºä¸€äº›ç­–ç•¥ã€‚</p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/00049d68d16f1bda.jpg" alt=""></p><p>åœ¨call treeä¸­å¯ä»¥çœ‹åˆ°æ•´ä¸ªè¿‡ç¨‹å„ä¸ªç¯èŠ‚å‡½æ•°å’Œæ–¹æ³•è°ƒç”¨æƒ…å†µ</p><p><img src="https://ftp.bmp.ovh/imgs/2020/11/d9ab72aa46ff6e0a.jpg" alt=""></p><h4 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h4><p>ä¼šåˆ—å‡ºæ‰€æœ‰çš„èµ„æºå ç”¨ç©ºé—´ã€‚</p><p><img src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-imgbed/b20d67d4-91bd-449f-99c2-23ee9fef8601.jpg" alt=""></p><h4 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h4><p>å¯ä»¥å‘Šè¯‰ä½ è¿™ä¸ªç½‘ç«™çš„å®‰å…¨æ€§ï¼ŒæŸ¥çœ‹æœ‰æ•ˆçš„è¯ä¹¦ç­‰ã€‚</p><h4 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h4><p>ä¼šåˆ—å‡ºæ‰€æœ‰çš„èµ„æºï¼Œä»¥åŠHTML5çš„Databaseå’ŒLocalStoreç­‰ï¼Œä½ å¯ä»¥å¯¹å­˜å‚¨çš„å†…å®¹ç¼–è¾‘å’Œåˆ é™¤ ä¸åšè¿‡å¤šä»‹ç»<br><a href="https://imgbed.cn"><img src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-imgbed/6a0eef45-e921-4543-8d13-09c8749a5aae.jpg" alt=""></a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debug </tag>
            
            <tag> chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµè§ˆå™¨tokenéªŒè¯</title>
      <link href="2020/10/17/webToken_oAuth/"/>
      <url>2020/10/17/webToken_oAuth/</url>
      
        <content type="html"><![CDATA[<h3 id="OAuthè®¤è¯æµç¨‹"><a href="#OAuthè®¤è¯æµç¨‹" class="headerlink" title="OAuthè®¤è¯æµç¨‹"></a>OAuthè®¤è¯æµç¨‹</h3><h4 id="ç¬¬ä¸‰æ–¹ç™»é™†"><a href="#ç¬¬ä¸‰æ–¹ç™»é™†" class="headerlink" title="ç¬¬ä¸‰æ–¹ç™»é™†"></a>ç¬¬ä¸‰æ–¹ç™»é™†</h4><p>ä¸¾ä¸ªæ¿æ —ï¼šå¦‚æœè¦é€šè¿‡ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼ˆä¾‹å¦‚githubï¼‰ç™»å½•æ²¡æœ‰è‡ªå·±çš„å¸æˆ·ç³»ç»Ÿçš„å¹³å°ï¼Œæœ€ä¼ ç»Ÿçš„æ–¹æ³•æ˜¯ç›´æ¥åœ¨å¹³å°çš„ç€é™†é¡µä¸Šè¾“å…¥githubå¸æˆ·å¯†ç ï¼Œ å¯ä»¥é€šè¿‡ç”¨æˆ·å¸æˆ·å’Œå¯†ç ç”¨æˆ·æ•°æ®ä»githubè·å¾—å®ƒï¼Œä½†æ˜¯è¿™æ ·åšæœ‰å¾ˆå¤šç¼ºé™·ï¼š</p><ul><li>è¯¥å¹³å°éœ€è¦ä»¥æ˜æ–‡æ ¼å¼ä¿å­˜ç”¨æˆ·çš„githubå¸æˆ·å’Œå¯†ç ï¼Œè¿™æ˜¯ä¸å®‰å…¨çš„ï¼›</li><li>è¯¥å¹³å°æ‹¥æœ‰åœ¨githubä¸­è·å–ç”¨æˆ·çš„æ‰€æœ‰æƒé™ä¿¡æ¯ï¼›</li><li>åªæœ‰ä¿®æ”¹å¯†ç åï¼Œç”¨æˆ·æ‰èƒ½å–æ¶ˆæˆæƒå¹³å°çš„æƒé™ï¼Œä½†æ˜¯è¿™å°†å¯¼è‡´ç”¨æˆ·æˆæƒçš„æ‰€æœ‰å…¶ä»–ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºæ— æ•ˆï¼Œä¸çŸ¥è¿™ä¸€ä¸ªåº”ç”¨ï¼›</li><li>å¦‚æœç¬¬ä¸‰æ–¹åº”ç”¨è¢«ç ´è§£ï¼Œå°±ä¼šæœ‰ç”¨æˆ·å¯†ç æ³„éœ²çš„é£é™©ï¼Œå’Œæ‰€æœ‰ä½¿ç”¨githubç™»å½•çš„ç½‘ç«™çš„æ•°æ®æ³„æ¼ï¼›</li></ul><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæœ‰OAuthã€‚</p><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>OAuthåœ¨â€œå®¢æˆ·ç«¯â€å’Œâ€œæœåŠ¡å™¨â€ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªæˆæƒå±‚ã€‚ â€œå®¢æˆ·ç«¯â€ä¸å¯ä»¥ç›´æ¥è¯·æ±‚ç™»é™†â€œæœåŠ¡å™¨â€ï¼Œè€Œåªèƒ½é€šè¿‡ç™»å½•æˆæƒå±‚æ¥è¿›è¡Œç™»é™†å®¢æˆ·ç«¯ï¼Œé€šè¿‡æœåŠ¡ç«¯è·å–ç”¨æˆ·ä¿¡æ¯ã€‚ â€œå®¢æˆ·ç«¯â€ç™»å½•æˆæƒå±‚æ‰€ä½¿ç”¨çš„å¯†ç ä¸ç”¨æˆ·çš„ç™»é™†å¯†ç ä¸åŒã€‚ ç™»å½•æ—¶ï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šæˆæƒå±‚çš„tokençš„æˆæƒèŒƒå›´å’Œæœ‰æ•ˆæœŸã€‚</p><p>æˆæƒå±‚å…è®¸â€œå®¢æˆ·ç«¯â€ç™»é™†ä¹‹åï¼Œâ€œæœåŠ¡ç«¯â€æ ¹æ®tokençš„æƒé™èŒƒå›´å’Œæœ‰æ•ˆæœŸï¼Œå‘â€œå®¢æˆ·ç«¯â€è¿”å›ç”¨æˆ·çš„ä¿¡æ¯ï¼ˆuserInfoï¼‰ã€‚</p><p>ä¾‹å¦‚ç°åœ¨æœ‰ä¸€ä¸ªå¹³å°ä¸ºå¹³å°Aï¼Œå¹³å°Açš„ç™»é™†æ–¹å¼åªæœ‰é€šè¿‡gitHubè´¦å·ç¬¬ä¸‰æ–¹ç™»å½•æœºåˆ¶ç™»å½•ã€‚æµç¨‹å›¾å¤§è‡´å¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20201018165245119.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h5YWxvaWR6,size_16,color_FFFFFF,t_70#pic_center" alt="æˆæƒç™»é™†.png"></p><p>1.ç”¨æˆ·ç‚¹å‡»Sign in with gitHub<br> éœ€è¦è·³è½¬åˆ°æˆæƒé¡µé¢ï¼Œ æˆæƒé¡µé¢çš„URLä¸­åŒ…å«çš„ä¸»è¦å‚æ•°æ˜¯å¦‚ä¸‹ï¼š</p><ul><li>client_id: åœ¨gitHubä¸­ç”³è¯·åº”ç”¨IDï¼›</li><li>redirect_uri: æˆæƒæˆåŠŸä¹‹åè¦è·³è½¬åˆ°çš„åœ°å€ï¼›</li></ul><p>2.è¯¥é¡µé¢ä¼šè‡ªåŠ¨è·³è½¬åˆ°ç”±redirect_uriåœ¨åˆå§‹å‚æ•°ä¸­å®šä¹‰çš„URLï¼Œå¹¶å°†codeå‚æ•°è‡ªåŠ¨æ·»åŠ åˆ°URLçš„æœ«å°¾</p><ul><li>gitHubéªŒè¯ï¼š<a href="https://github.com/login/oauth/authorize?client_id=myclient_id&amp;scope=user:email">https://github.com/login/oauth/authorize?client_id=myclient_id&amp;scope=user:email</a></li></ul><p>3.å¹³å°Aé€šè¿‡ä¸Šä¸€æ­¥è·å–çš„codeå‚æ•°æ¢å–Tokenï¼Œå¹³å°Aè¯·æ±‚å¦‚ä¸‹æ¥å£è·å–Token</p><p><code>https://github.com/login/oauth/access_token</code>ï¼Œéœ€è¦åŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p><ul><li>client_id: åœ¨gitHubç”³è¯·çš„åº”ç”¨IDï¼›</li><li>client_secret: åœ¨gitHubç”³è¯·æ—¶æä¾›çš„APP Secretï¼›</li><li>grant_type: éœ€è¦å¡«å†™authorization_codeï¼›</li><li>code: ä¸Šä¸€æ­¥è·å¾—çš„codeï¼›</li><li>redirect_uri: å›è°ƒåœ°å€ï¼Œéœ€è¦ä¸æ³¨å†Œåº”ç”¨é‡Œçš„å›è°ƒåœ°å€ä»¥åŠç¬¬ä¸€æ­¥çš„redirect_uriå‚æ•°ä¸€è‡´ï¼›</li></ul><p>4.é€šè¿‡ç¬¬ä¸‰æ­¥çš„è¯·æ±‚ï¼Œæ¥å£è¿”å›Tokenå’Œç›¸å…³æˆæƒæ•°æ®</p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>    <span class="token string">"access_token"</span><span class="token punctuation">:</span> <span class="token string">"ACCESS_TOKEN"</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// Tokençš„å€¼</span>    <span class="token string">"expires_in"</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// è¿‡æœŸæ—¶é—´</span>    <span class="token string">"uid"</span><span class="token punctuation">:</span> <span class="token string">"1234567"</span><span class="token punctuation">,</span>         <span class="token comment" spellcheck="true">// å½“å‰æˆæƒç”¨æˆ·çš„UID</span><span class="token punctuation">}</span></code></pre><p>5.ä½¿ç”¨åœ¨ç¬¬å››æ­¥ä¸­è·å–åˆ°çš„access_tokenï¼Œå°±å¯ä»¥å»è·å–ç”¨æˆ·çš„èµ„æºäº†ã€‚</p><p>è°ƒç”¨ <code>https://api.github.com/user?access_token=access_token</code> è¿™ä¸ªAPIï¼Œå°±å¯ä»¥è·å–åˆ°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€‚ </p><p>ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code>{    &quot;login&quot;: &quot;Diamondtest&quot;,    &quot;id&quot;: 28478049,    &quot;avatar_url&quot;: &quot;https://avatars0.githubusercontent.com/u/28478049?v=3&quot;,    &quot;gravatar_id&quot;: &quot;&quot;,    &quot;url&quot;: &quot;https://api.github.com/users/Diamondtest&quot;,    &quot;html_url&quot;: &quot;https://github.com/Diamondtest&quot;,    &quot;followers_url&quot;: &quot;https://api.github.com/users/Diamondtest/followers&quot;,    &quot;following_url&quot;: &quot;https://api.github.com/users/Diamondtest/following{/other_user}&quot;,    &quot;gists_url&quot;: &quot;https://api.github.com/users/Diamondtest/gists{/gist_id}&quot;,    &quot;starred_url&quot;: &quot;https://api.github.com/users/Diamondtest/starred{/owner}{/repo}&quot;,    &quot;subscriptions_url&quot;: &quot;https://api.github.com/users/Diamondtest/subscriptions&quot;,    &quot;organizations_url&quot;: &quot;https://api.github.com/users/Diamondtest/orgs&quot;,    &quot;repos_url&quot;: &quot;https://api.github.com/users/Diamondtest/repos&quot;,    &quot;events_url&quot;: &quot;https://api.github.com/users/Diamondtest/events{/privacy}&quot;,    &quot;received_events_url&quot;: &quot;https://api.github.com/users/Diamondtest/received_events&quot;,    &quot;type&quot;: &quot;User&quot;,    &quot;site_admin&quot;: false,    &quot;name&quot;: null,    &quot;company&quot;: null,    &quot;blog&quot;: &quot;&quot;,    &quot;location&quot;: null,    &quot;email&quot;: null,    &quot;hireable&quot;: null,    &quot;bio&quot;: null,    &quot;public_repos&quot;: 0,    &quot;public_gists&quot;: 0,    &quot;followers&quot;: 0,    &quot;following&quot;: 0,    &quot;created_at&quot;: &quot;2017-05-06T08:08:09Z&quot;,    &quot;updated_at&quot;: &quot;2017-05-06T08:16:22Z&quot;}</code></pre><p>è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå¹³å°Aè¿›è¡Œç™»é™†æˆåŠŸå¤„ç†ï¼Œæˆæƒç™»é™†æµç¨‹åˆ°æ­¤ç»“æŸğŸ˜Šï¼›</p><p>é€šè¿‡ä»¥ä¸Šçš„æ­¥éª¤ï¼Œåœ¨å¹³å°Aå’ŒgitHubä¹‹é—´å»ºç«‹äº†ç‹¬ç«‹çš„æƒé™å±‚ã€‚ è¯¥æƒé™ç”±ç”¨æˆ·æˆäºˆï¼Œå¹¶ä¸”å¯ä»¥ç”±ç”¨æˆ·å–æ¶ˆã€‚ å®ƒä¸åŒäºç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºä¹‹é—´çš„ç‹¬ç«‹æ€§ï¼Œå¹¶ä¸”ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚ è§£å†³äº†ä»¥æ˜æ–‡å­˜å‚¨å¸æˆ·å¯†ç çš„é—®é¢˜ã€‚</p><h3 id="Access-Token"><a href="#Access-Token" class="headerlink" title="Access Token"></a>Access Token</h3><p>Access Tokenæ˜¯ç”¨äºè®¿é—®è¢«ä¿æŠ¤èµ„æºçš„ä¸€ç§å‡­è¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠ å¯†çš„å­—ç¬¦ä¸²ã€‚</p><p>ä¸€èˆ¬Access Tokençš„æœ‰æ•ˆæ—¶é—´éƒ½æ¯”è¾ƒçŸ­ï¼Œéœ€è¦é¢‘ç¹çš„ä½¿ç”¨ç™»é™†æŠ„é”™ã€‚<br>å¦‚æœè¦è§£å†³ç”¨æˆ·çš„é¢‘ç¹ç™»é™†é—®é¢˜ï¼Œå°±éœ€è¦ç”¨åˆ°Refresh Tokenäº†æ“ä½œäº†ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯ç›´æ¥å¤šæ¬¡è·å–Access Tokenä¹Ÿæ˜¯å¯ä»¥çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸æ–¹ä¾¿çš„ï¼Œä¸»è¦æ˜¯å› ä¸ºè·å–Access Tokençš„æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°ä¸€ä¸ªcodeï¼Œè€Œè¿™ä¸ªcodeæ˜¯éœ€è¦ç”¨æˆ·è¿›è¡Œæˆæƒæ“ä½œçš„ï¼Œå¨åŠ›é¿å…é¢‘ç¹ç‚¹å‡»æˆæƒæ“ä½œï¼Œå°±æœ‰äº†Refresh Tokenï¼Œç”¨æˆ·ä¸ç”¨å†æ¬¡è¿›è¡Œæ“ä½œäº†ã€‚</p><h3 id="Refresh-Token"><a href="#Refresh-Token" class="headerlink" title="Refresh Token"></a>Refresh Token</h3><p>åœ¨OAuthæœºåˆ¶ä¸­ï¼ŒRefresh Tokenå¹¶ä¸æ˜¯å¿…é¡»è®¾ç½®çš„ï¼Œä½†æ˜¯ä¸è®¾ç½®Refresh Tokenï¼Œåˆ™ä¼šå¢åŠ ç”¨æˆ·ç™»å½•çš„æ¬¡æ•°ï¼Œäº¤äº’ä¸æ˜¯å¾ˆå‹å¥½å“ˆã€‚</p><p>Refresh tokençš„ä½œç”¨æ˜¯åˆ·æ–°Access tokenï¼Œä¿è¯ä½¿ç”¨çš„tokenä¿æŒæœ€æ–°çš„æœ‰æ•ˆtokenã€‚Refresh Tokenæ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„æœåŠ¡å™¨ä¸Šçš„ï¼Œå½“å‰çš„Access Tokenå¤±æ•ˆæˆ–è€…è¿‡æœŸæ—¶ï¼ŒRefresh Tokenå°±ä¼šå»è·å–ä¸€ä¸ªæ–°çš„Tokenï¼ŒRefresh Tokenä¹Ÿæ˜¯ä¸€ä¸ªå¯¹å®¢æˆ·ç«¯åŠ å¯†çš„å­—ç¬¦ä¸²ã€‚</p><p>ä¸€ä¸ªæœ‰æ•ˆçš„tokenè¿”å›ç»“æœå¦‚ä¸‹ï¼š</p><pre><code>    HTTP/1.1 200 OK    Content-Type: application/json    Cache-Control: no-store    Pragma: no-cache    {    &quot;access_token&quot;:&quot;MTQ0NjJkZmQ5OTM2NDE1ZTZjNGZmZjI3&quot;,    &quot;token_type&quot;:&quot;bearer&quot;,    &quot;expires_in&quot;:3600,    &quot;refresh_token&quot;:&quot;IwOGYzYTlmM2YxOTQ5MGE3YmNmMDFkNTVk&quot;,    &quot;scope&quot;:&quot;create&quot;    }</code></pre><p>è·å–æµç¨‹åŸç†å¤§è‡´å¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20201018181410884.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h5YWxvaWR6,size_16,color_FFFFFF,t_70#pic_center" alt="Refresh.png"></p><p>1.å®¢æˆ·ç«¯é€šè¿‡è®¤è¯æœåŠ¡å™¨è¯·æ±‚è®¤è¯ï¼›</p><p>2.è®¤è¯æœåŠ¡å™¨æ ¡éªŒå®¢æˆ·ç«¯è®¤è¯æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæœ‰æ•ˆï¼Œè¿”å›ä¸€ä¸ªAccess Tokenå’Œä¸€ä¸ªRefresh Tokenï¼›</p><p>3.å®¢æˆ·ç«¯é€šè¿‡Access Tokenå»è¯·æ±‚æœåŠ¡å™¨çš„èµ„æºï¼›</p><p>4.å¦‚æœAccess Tokenæœ‰æ•ˆï¼ŒæœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯èµ„æºï¼Œå¦‚æœAccess Tokenå¤±æ•ˆï¼ŒæœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯Tokenå¤±æ•ˆçš„ä¿¡æ¯ï¼Œç„¶åå®¢æˆ·ç«¯ä¼šé€šè¿‡Refresh Tokenå†æ¬¡è¯·æ±‚è·å–æ–°çš„Access Tokenï¼›</p><ul><li>Refresh Tokenæœ¬èº«ä¹Ÿæ˜¯æœ‰è¿‡æœŸæ—¶é—´çš„ï¼Œä¸€èˆ¬ä¼šæ¯”Access Tokençš„è¿‡æœŸæ—¶é—´é•¿å¾ˆå¤šï¼Œå¦‚æœæƒ³è¦å°†Refresh Tokenè®¾ç½®ä¸ºæ°¸ä¹…æœ‰æ•ˆï¼Œåˆ™å¯ä»¥é€šè¿‡é…ç½®å‚æ•°å®ç°ã€‚æ¯”å¦‚å¯ä»¥è®¾ç½®prompt=consentã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> token </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reactè™šæ‹ŸDOMè§£æ</title>
      <link href="2020/09/17/react-dom/"/>
      <url>2020/09/17/react-dom/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€æµè§ˆå™¨æ€ä¹ˆè§£æå‡ºDOM"><a href="#ä¸€ã€æµè§ˆå™¨æ€ä¹ˆè§£æå‡ºDOM" class="headerlink" title="ä¸€ã€æµè§ˆå™¨æ€ä¹ˆè§£æå‡ºDOM"></a>ä¸€ã€æµè§ˆå™¨æ€ä¹ˆè§£æå‡ºDOM</h3><h4 id="æµè§ˆå™¨è¯·æ±‚é˜¶æ®µ"><a href="#æµè§ˆå™¨è¯·æ±‚é˜¶æ®µ" class="headerlink" title="æµè§ˆå™¨è¯·æ±‚é˜¶æ®µ"></a>æµè§ˆå™¨è¯·æ±‚é˜¶æ®µ</h4><p>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·httpè¯·æ±‚ï¼Œç»è¿‡TCP/IPä¸‰æ¬¡æ¡æ‰‹ç¡®è®¤é“¾æ¥åï¼ŒæœåŠ¡å™¨å°†éœ€è¦çš„ä»£ç å‘å›ç»™æµè§ˆå™¨ï¼Œè¿™é‡Œæˆ‘ä»¬åªè¯´è¿”å›çš„æ˜¯htmlæ–‡ä»¶ï¼Œå…¶ä»–çš„ä¸å¤šèµ˜è¿°ã€‚</p><h4 id="è§£ædomæ ‘é˜¶æ®µ"><a href="#è§£ædomæ ‘é˜¶æ®µ" class="headerlink" title="è§£ædomæ ‘é˜¶æ®µ"></a>è§£ædomæ ‘é˜¶æ®µ</h4><p>æµè§ˆå™¨é¦–å…ˆå°†æ”¶åˆ°çš„htmlä»£ç ï¼Œé€šè¿‡htmlè§£æå™¨è§£ææ„å»ºä¸ºä¸€é¢—DOMæ ‘ã€‚æ•°æ®ç»“æ„ä¸­æœ‰è®¸å¤šçš„æ ‘ã€‚</p><h4 id="æ ¹æ®cssæ¸²æŸ“DOMæ ‘é˜¶æ®µ"><a href="#æ ¹æ®cssæ¸²æŸ“DOMæ ‘é˜¶æ®µ" class="headerlink" title="æ ¹æ®cssæ¸²æŸ“DOMæ ‘é˜¶æ®µ"></a>æ ¹æ®cssæ¸²æŸ“DOMæ ‘é˜¶æ®µ</h4><p>æµè§ˆå™¨æŒ‰ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³çš„é¡ºåºï¼Œè¯»å–DOMæ ‘çš„æ–‡æ¡£èŠ‚ç‚¹ï¼Œé¡ºåºå­˜æ”¾åˆ°ä¸€æ¡æ ‘çŠ¶ç»“æ„ä¸Šã€‚è€Œæ¯ä¸€ä¸ªDIVå°±æ˜¯èŠ‚ç‚¹ï¼Œè¿™æ£µæ ‘å°±æ˜¯æ–‡æ¡£æµã€‚å½“æˆ‘ä»¬æˆ‘ä»¬è¯»å–åˆ°çš„èŠ‚ç‚¹æ˜¯å±äºå¦ä¸€ä¸ªèŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ”¾åˆ°æ ‘ä¸Šçš„ä½ç½®å°±æ˜¯è¯¥èŠ‚ç‚¹ç›’å­çš„å†…éƒ¨ã€‚<br>å¦‚æœå­èŠ‚ç‚¹ä¸‹è¿˜æœ‰å­èŠ‚ç‚¹ï¼Œåœ¨æ ‘çŠ¶ç»“æ„ä¸­ç»§ç»­å¥—ç›’å­å†…éƒ¨ã€‚æ ¹æ®å®ƒåœ¨DOMæ ‘ä¸Šçš„ç»“æ„ï¼Œå¯ä»¥åµŒå¥—çš„å±‚çº§æ²¡æœ‰é™åˆ¶çš„å“¦ã€‚<br>æ–‡æ¡£æµæ’å®Œä¹‹åï¼Œæ ¹æ®divä¸Šçš„classæˆ–è€…idç­‰å–å¯¹åº”çš„cssèµ„æºï¼ˆä¹Ÿæ˜¯ä»httpè¯·æ±‚ä¸­è·å–åˆ°çš„ï¼‰sourceä¸­æ‰¾åˆ°å¯¹åº”çš„cssæ ·å¼å±æ€§ï¼Œå°†å¯¹åº”çš„å±æ€§ç»‘å®šåˆ°ç›’å­ä¸Šï¼Œå°±å®Œæˆè¿‡äº†æ–‡æ¡£æ ‘ã€‚</p><h4 id="æµè§ˆå™¨æ¸²æŸ“é˜¶æ®µ"><a href="#æµè§ˆå™¨æ¸²æŸ“é˜¶æ®µ" class="headerlink" title="æµè§ˆå™¨æ¸²æŸ“é˜¶æ®µ"></a>æµè§ˆå™¨æ¸²æŸ“é˜¶æ®µ</h4><p>å¸ƒå±€å®Œæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨é¡µé¢ä¸Šå…¶å®æ˜¯çœ‹ä¸åˆ°ä»»ä½•å†…å®¹çš„<br>æµè§ˆå™¨åªæ˜¯è®¡ç®—å‡ºäº†æ¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡åº”è¯¥è¢«æ”¾åˆ°é¡µé¢çš„å“ªä¸ªä½ç½®ä¸Šï¼Œä½†å¹¶æ²¡æœ‰å¯è§†åŒ–ã€‚<br>å› æ­¤æœ€åä¸€æ­¥å°±æ˜¯å°†æ‰€æœ‰å†…å®¹ç»˜åˆ¶å‡ºæ¥ï¼Œå®Œæˆæ•´ä¸ªé¡µé¢çš„æ¸²æŸ“ã€‚</p><h3 id="äºŒã€è™šæ‹Ÿdomæ ‘åŸç†"><a href="#äºŒã€è™šæ‹Ÿdomæ ‘åŸç†" class="headerlink" title="äºŒã€è™šæ‹Ÿdomæ ‘åŸç†"></a>äºŒã€è™šæ‹Ÿdomæ ‘åŸç†</h3><p>è™šæ‹ŸDOMè‡ªç„¶å°±æ˜¯è·ŸDOMæœ‰å¾ˆå¤§å…³ç³»çš„äº†ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨åŸç”ŸJSå¼€å‘æˆ–è€…ä½¿ç”¨Jqueryå¼€å‘ï¼Œç»å¸¸å°±ä¼šæ“ä½œDOMï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å‘ç°ï¼Œæ¯æ¬¡æˆ‘ä»¬æ”¹å˜DOMçš„æ—¶å€™ï¼Œé¡µé¢å†æ¬¡æ¸²æŸ“ï¼Œä¼šæ¶ˆè€—å¾ˆå¤šæ€§èƒ½ï¼Œæœ‰äº›æ—¶å€™ä¼šå åˆ°70%å·¦å³çš„æ¸²æŸ“æ€§èƒ½ã€‚å¦‚æœæˆ‘ä»¬å°½å¯èƒ½å‡å°‘domæ ‘çš„æ“ä½œæˆ–è€…åœ¨ä¸Šæ–‡ä¸­æåˆ°çš„å‡å°‘domæµä¸­çš„æ”¹å˜ï¼Œè¿™æ ·å°±ä¼šæœ‰æ•ˆçš„æé«˜æµè§ˆå™¨çš„æ¸²æŸ“é€Ÿåº¦ã€‚è¿™æ ·å°±æœ‰äº†è™šæ‹Ÿdomçš„ç†è®ºã€‚</p><p>å®é™…åœ¨Reactä¸­ï¼Œä¼šæŠŠDOMè½¬æ¢æˆJavaScriptå¯¹è±¡ï¼Œç„¶åå†æŠŠJavaScriptå¯¹è±¡è½¬åŒ–æˆDOMï¼Œè¿™æ ·æˆ‘ä»¬å¯¹äºDOMçš„æ“ä½œï¼Œå®é™…ä¸Šæ˜¯åœ¨æ“ä½œè¿™ä¸ªJavaScriptå¯¹è±¡ã€‚</p><p>è™šæ‹Ÿçš„DOMçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå¯¹å¤æ‚çš„æ–‡æ¡£DOMç»“æ„ï¼Œæä¾›ä¸€ç§æ–¹ä¾¿çš„å·¥å…·ï¼Œè¿›è¡Œæœ€å°åŒ–åœ°DOMæ“ä½œã€‚</p><h4 id="æ„å»ºè™šæ‹ŸDOM"><a href="#æ„å»ºè™šæ‹ŸDOM" class="headerlink" title="æ„å»ºè™šæ‹ŸDOM"></a>æ„å»ºè™šæ‹ŸDOM</h4><p>ä¾‹å­ï¼š</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>    <span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> element <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        id<span class="token punctuation">:</span> <span class="token string">"test"</span><span class="token punctuation">,</span>        className<span class="token punctuation">:</span> <span class="token string">"testClass"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼š<br><code>React.createElement()</code> æ–¹æ³•ä¼ å…¥äº†3ä¸ªå‚æ•°: ç¬¬1ä¸ªå‚æ•°å¯¹åº”çš„æ˜¯æ ‡ç­¾(tag)åç§°ï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯å±æ€§(id,class,attrâ€¦)ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å†…å®¹(text)ï¼Œç„¶åè¿”å›æŸä¸ªå€¼ã€‚<br><code>ReactDOM.render()</code>æ–¹æ³•æ¥æ”¶äº†ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åˆšåˆšæåˆ°çš„æŸä¸ªå€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è·å–åˆ°çš„rootå…ƒç´ ï¼Œå¯¹åº”çš„æ˜¯index.htmlä¸­çš„<code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code></p><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­åŠ å…¥console.log(element)ï¼Œæ‰“å°å‡ºelementçš„å€¼ï¼Œå¦‚ä¸‹ï¼š<br><img src="https://img-blog.csdnimg.cn/20191130135734265.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4MjA2NTc2,size_16,color_FFFFFF,t_70" alt="ç¤ºä¾‹.png"></p><p>ä¸Šé¢çš„consoleåå‡ºçš„æ˜¯ä¸€æ®µdomæ•°æ®ï¼Œæ­¤æ—¶React.createElement()æ–¹æ³•åˆ›å»ºäº†è™šæ‹ŸDOMã€‚</p><h4 id="æ¨¡æ‹Ÿå®ç°React-createElement"><a href="#æ¨¡æ‹Ÿå®ç°React-createElement" class="headerlink" title="æ¨¡æ‹Ÿå®ç°React.createElement()"></a>æ¨¡æ‹Ÿå®ç°React.createElement()</h4><p>æœ‰ä¸Šå›¾å¯ä»¥è¿™ä¸ªå¯¹è±¡æœ‰å¤šä¸ªå±æ€§ï¼Œç›®å‰æ¥è¯´å¯¹æˆ‘ä»¬æ¯”è¾ƒé‡è¦çš„æ˜¯propså’Œtypeå±æ€§ï¼Œæ‰€ä»¥å…ˆå®ç°å¯¹äºè¿™ä¸¤ä¸ªå±æ€§çš„æ“ä½œã€‚<br><code>React.createElement()</code> æ¥æ”¶3ä¸ªå‚æ•°ï¼Œç°åœ¨è¦æŠŠè¿™3ä¸ªå‚æ•°åˆå¹¶åˆ°typeå’Œpropsä¸­ã€‚<br><code>React.createElement()</code> æ¥æ”¶3ä¸ªä»¥ä¸Šå‚æ•°ï¼Œè¯´æ˜è¯¥å…ƒç´ é‡Œé¢æœ‰å¤šä¸ªå­å…ƒç´ ï¼ˆè¿™äº›å­å…ƒç´ ä»ç„¶æ˜¯React.createElement()ï¼‰ï¼Œé‚£ä¹ˆæŠŠç¬¬äºŒä¸ªå‚æ•°åé¢çš„æ‰€æœ‰å‚æ•°è½¬æ¢æˆæ•°ç»„æ”¾å…¥childrenä¸­</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">ReactElement</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> props <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> element<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> children<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> propName<span class="token punctuation">;</span>    <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// å®šä¹‰props</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>propName <span class="token keyword">in</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>        props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> config<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// å¤åˆ¶configçš„å±æ€§åˆ°propsä¸­</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å¤„ç†children</span>    <span class="token keyword">const</span> childrenLength <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>childrenLength <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        props<span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æœ‰å¤šä¸ªå­å…ƒç´ çš„æƒ…å†µ</span>        props<span class="token punctuation">.</span>children <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">ReactElement</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>test code :</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    id<span class="token punctuation">:</span> <span class="token string">"test"</span><span class="token punctuation">,</span>    className<span class="token punctuation">:</span> <span class="token string">"testClass"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"span1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"span2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>consoleç»“æœ(å®é™…æ˜¯ä¸€ä¸ªjavascriptçš„å¯¹è±¡):</p><p><img src="https://img-blog.csdnimg.cn/2019113014240124.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4MjA2NTc2,size_16,color_FFFFFF,t_70" alt="ç¤ºä¾‹.png"></p><h4 id="React-Diffç®—æ³•"><a href="#React-Diffç®—æ³•" class="headerlink" title="React Diffç®—æ³•"></a>React Diffç®—æ³•</h4><ol><li><p>ä¸¤ä¸ªç›¸åŒçš„ç»„ä»¶äº§ç”Ÿç›¸ä¼¼çš„DOMç»“æ„ï¼Œè€Œä¸åŒçš„ç»„ä»¶äº§ç”Ÿä¸åŒçš„DOMç»“æ„ã€‚</p></li><li><p>å¯¹äºåŒä¸€çº§åˆ«çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡å”¯ä¸€çš„IDæ¥åŒºåˆ†å®ƒä»¬ã€‚</p></li></ol><p>ç®—æ³•ä¸Šçš„ä¼˜åŒ–æ˜¯ React æ•´ä¸ªç•Œé¢ Render çš„åŸºç¡€ï¼Œä¿è¯äº†æ•´ä½“ç•Œé¢æ¸²æŸ“çš„æ€§èƒ½ã€‚</p><p>ä¸ºäº†åœ¨æ ‘ä¹‹é—´è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬é¦–å…ˆè¦èƒ½å¤Ÿæ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåœ¨ React ä¸­å³æ¯”è¾ƒä¸¤ä¸ªè™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼Œå½“ä¸¤ä¸ªèŠ‚ç‚¹ä¸åŒæ—¶ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ã€‚è¿™åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p><ul><li>ï¼ˆ1ï¼‰èŠ‚ç‚¹ç±»å‹ä¸åŒ </li><li>ï¼ˆ2ï¼‰èŠ‚ç‚¹ç±»å‹ç›¸åŒï¼Œä½†æ˜¯å±æ€§ä¸åŒã€‚</li></ul><p>èŠ‚ç‚¹ç±»å‹ä¸åŒï¼šç›´æ¥åˆ é™¤åŸèŠ‚ç‚¹ï¼Œ æ’å…¥æ–°èŠ‚ç‚¹ã€‚</p><p>React çš„ DOM Diff ç®—æ³•å®é™…ä¸Šåªä¼šå¯¹æ ‘è¿›è¡Œé€å±‚æ¯”è¾ƒï¼Œä¸¤æ£µæ ‘åªä¼šå¯¹åŒä¸€å±‚æ¬¡çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒå¦‚ä¸‹æ‰€è¿°ã€‚</p><p>å½“æˆ‘ä»¬è°ƒç”¨ setState æ—¶ï¼Œstate å†…éƒ¨çŠ¶æ€å‘ç”Ÿå˜åŠ¨ï¼Œå†æ¬¡è°ƒç”¨ render æ–¹æ³•å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ä½¿ç”¨ diff æ–¹æ³•è®¡ç®—å‡ºæ–°è€è™šæ‹Ÿ DOM å‘é€å˜åŒ–çš„éƒ¨åˆ†ï¼Œæœ€åä½¿ç”¨ patch æ–¹æ³•ï¼Œå°†å˜åŠ¨æ¸²æŸ“åˆ°è§†å›¾ä¸­ã€‚</p><p>å®ƒæ˜¯æ¯”è¾ƒæ–°æ—§VDOMçš„æ›´æ”¹ï¼Œç„¶åå°†æ›´æ”¹çš„éƒ¨åˆ†æ›´æ–°åˆ°è§†å›¾ã€‚ å¯¹åº”äºä»£ç ï¼Œå®ƒæ˜¯ä¸€ä¸ªdiffå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªè¡¥ä¸ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>1.è™šæ‹ŸDOMåŸºæœ¬ä¸Šä¸ä¼šå¼•å‘é¡µé¢å¸ƒå±€å’Œé‡ç»˜æ“ä½œã€‚</p><p>2.åœ¨é¢‘ç¹ä¿®æ”¹è™šæ‹ŸDOMä¹‹åï¼ˆä»¥åŠåœ¨setStateä¹‹åï¼‰ï¼Œä¸€æ¬¡æ¯”è¾ƒå¹¶ä¿®æ”¹éœ€è¦åœ¨çœŸå®DOMä¸­ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œæœ€ååœ¨çœŸå®DOMä¸­æ’ç‰ˆå’Œé‡ç»˜ä»¥å‡å°‘å¸ƒå±€å’Œé‡ç»˜çš„æŸå¤±ã€‚</p><p>3.è™šæ‹ŸDOMæœ‰æ•ˆåœ°å‡å°‘äº†å¤§é‡ï¼ˆçœŸå®DOMèŠ‚ç‚¹ï¼‰çš„é‡ç»˜å’Œæ’ç‰ˆï¼Œæœ€ç»ˆçš„å·®å¼‚ä¸çœŸå®DOMè¿›è¡Œäº†æ¯”è¾ƒï¼Œå¹¶ä¸”åªæ¸²æŸ“ä¸€ä¿®æ”¹çš„é‚£ä¸€å°éƒ¨åˆ†ï¼ˆä¸2ç›¸åŒï¼‰</p><p>ä½¿ç”¨è™šæ‹ŸDOMçš„æŸè€—è®¡ç®—ï¼š</p><p><code>æ€»æŸè€— = è™šæ‹ŸDOMå¢åˆ æ”¹ + ï¼ˆä¸Diffç®—æ³•æ•ˆç‡æœ‰å…³ï¼‰çœŸå®DOMå·®å¼‚å¢åˆ æ”¹ + ï¼ˆè¾ƒå°‘çš„èŠ‚ç‚¹ï¼‰æ’ç‰ˆä¸é‡ç»˜</code></p><p>ç›´æ¥ä½¿ç”¨çœŸå®DOMçš„æŸè€—è®¡ç®—ï¼š</p><p><code>æ€»æŸè€— = çœŸå®DOMå®Œå…¨å¢åˆ æ”¹ + ï¼ˆå¯èƒ½è¾ƒå¤šçš„èŠ‚ç‚¹ï¼‰æ’ç‰ˆä¸é‡ç»˜</code></p><p>ç®€è€Œè¨€ä¹‹ï¼Œä¸ºäº†å‡å°‘å› é¢‘ç¹è¿›è¡Œå¤§é¢ç§¯é‡ç»˜è€Œå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼Œä¸åŒçš„æ¡†æ¶ä¸ä¸€å®šéœ€è¦è™šæ‹ŸDOMã€‚ å…³é”®æ˜¯è¦æŸ¥çœ‹æ¡†æ¶æ˜¯å¦ç»å¸¸è§¦å‘å¤§é¢ç§¯DOMæ“ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> dom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµè§ˆå™¨å‚¨å­˜çš„å‰ä¸–ä»Šç”Ÿ</title>
      <link href="2020/08/22/web-%E5%82%A8%E5%AD%98/"/>
      <url>2020/08/22/web-%E5%82%A8%E5%AD%98/</url>
      
        <content type="html"><![CDATA[<h3 id="æµè§ˆå™¨å‚¨å­˜"><a href="#æµè§ˆå™¨å‚¨å­˜" class="headerlink" title="æµè§ˆå™¨å‚¨å­˜"></a>æµè§ˆå™¨å‚¨å­˜</h3><p>1.åœ¨ä»£ç ä¸­æˆ‘ä»¬ä¸ºäº†æé«˜æ€§èƒ½ä¼šè¯·æ±‚ä¸€æ¬¡æ•°æ®å‚¨å­˜èµ·æ¥ç„¶ååœ¨ç›¸åº”çš„é¡µé¢è¿›è¡Œè¯»å–ï¼Œè€Œä¸æ˜¯å¤šæ¬¡å»è¯·æ±‚è¿™æ ·æ˜¯ä¸ºäº†æé«˜æ€§èƒ½ã€‚<br>2.é‚£ä¹ˆå¸¸ç”¨çš„æµè§ˆå™¨ç«¯å­˜å‚¨æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿåœ¨æˆ‘ä»¬å·¥ä½œä¸­ä¼šç»å¸¸é‡åˆ°éœ€è¦å‰ç«¯æ¥å‚¨å­˜ä¸€äº›æ•°æ®ï¼Œé™¤äº†react modelç­‰å·¥å…·ï¼Œæµè§ˆå™¨ä¹Ÿä¸ºæˆ‘ä»¬æä¾›æ¥ä¸€äº›å¯ç”¨çš„å‚¨å­˜ï¼Œé‚£ä¹ˆè¿™äº›å‚¨å­˜éƒ½æœ‰å“ªäº›ç‰¹ç‚¹ï¼Œéœ€è¦æˆ‘ä»¬æ€ä¹ˆæ³¨æ„å‘¢ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±è¯¦ç»†çš„çœ‹çœ‹å…·ä½“çš„ç”¨æ³•ã€‚<br>3.åœ¨æœªæ¥å®¢æˆ·ç«¯å¯èƒ½ä¼šå’ŒæœåŠ¡èµ·ä¸€æ ·æœ‰è‡ªå·±çš„æ•°æ®åº“ï¼Œæä¾›å„ç§æ•°æ®çš„æŸ¥è¯¢æ–¹å¼ï¼Œæä¾›å„ç§APIæ¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</p><h3 id="å¸¸ç”¨çš„å‚¨å­˜æ–¹å¼"><a href="#å¸¸ç”¨çš„å‚¨å­˜æ–¹å¼" class="headerlink" title="å¸¸ç”¨çš„å‚¨å­˜æ–¹å¼"></a>å¸¸ç”¨çš„å‚¨å­˜æ–¹å¼</h3><ul><li>cookie ï¼ˆä¹Ÿå« Web Cookie æˆ–æµè§ˆå™¨ Cookieï¼‰ </li><li>userData  æ¯”è¾ƒæ—©å†å²</li><li>globalStorage  å†å²</li><li>sessionStorage/localStorage  ä¸»æµ</li><li>IndexedDB  ä¸»æµæˆ–æœªæ¥ä¸»æµ</li></ul><h4 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h4><ul><li>ä»¥ä¸‹æ˜¯cookieçš„å®˜æ–¹è§£é‡Šã€</li></ul><pre class=" language-javascript"><code class="language-javascript">HTTP Cookieï¼ˆä¹Ÿå« Web Cookie æˆ–æµè§ˆå™¨ Cookieï¼‰æ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ï¼Œå®ƒä¼šåœ¨æµè§ˆå™¨ä¸‹æ¬¡å‘åŒä¸€æœåŠ¡å™¨å†å‘èµ·è¯·æ±‚æ—¶è¢«æºå¸¦å¹¶å‘é€åˆ°æœåŠ¡å™¨ä¸Šã€‚é€šå¸¸ï¼Œå®ƒç”¨äºå‘ŠçŸ¥æœåŠ¡ç«¯ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€æµè§ˆå™¨ï¼Œå¦‚ä¿æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚Cookie ä½¿åŸºäºæ— çŠ¶æ€çš„HTTPåè®®è®°å½•ç¨³å®šçš„çŠ¶æ€ä¿¡æ¯æˆä¸ºäº†å¯èƒ½ã€‚Cookie ä¸»è¦ç”¨äºä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼šä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ã€æ¸¸æˆåˆ†æ•°æˆ–å…¶å®ƒéœ€è¦è®°å½•çš„ä¿¡æ¯ï¼‰ä¸ªæ€§åŒ–è®¾ç½®ï¼ˆå¦‚ç”¨æˆ·è‡ªå®šä¹‰è®¾ç½®ã€ä¸»é¢˜ç­‰ï¼‰æµè§ˆå™¨è¡Œä¸ºè·Ÿè¸ªï¼ˆå¦‚è·Ÿè¸ªåˆ†æç”¨æˆ·è¡Œä¸ºç­‰ï¼‰</code></pre><ul><li>ç”¨æ³•ï¼š</li></ul><p>ç”¨æ¥è®¾ç½®httpè¯·æ±‚çš„ä¸€äº›è§„å®šï¼Œä½†å·²ç›®å‰å‰ç«¯æ¥è¯´ï¼Œæ›´å¤šçš„æ˜¯å‚¨å­˜ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œå’Œåç«¯æ¥å£ä¿æŒé€šä¿¡ã€‚</p><ul><li>ç®€å•çš„demo</li></ul><pre class=" language-javascript"><code class="language-javascript">  Set<span class="token operator">-</span>Cookie<span class="token punctuation">:</span> <span class="token operator">&lt;</span>cookieå<span class="token operator">>=</span><span class="token operator">&lt;</span>cookieå€¼<span class="token operator">></span></code></pre><p>æœåŠ¡å™¨é€šè¿‡è¯¥å¤´éƒ¨å‘ŠçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookie ä¿¡æ¯ã€‚</p><pre class=" language-javascript"><code class="language-javascript">  HTTP<span class="token operator">/</span><span class="token number">1.0</span> <span class="token number">200</span> OK  Content<span class="token operator">-</span>type<span class="token punctuation">:</span> text<span class="token operator">/</span>html  Set<span class="token operator">-</span>Cookie<span class="token punctuation">:</span> yummy_cookie<span class="token operator">=</span>choco  Set<span class="token operator">-</span>Cookie<span class="token punctuation">:</span> tasty_cookie<span class="token operator">=</span>strawberry</code></pre><p>ä½†æ˜¯cookieæ‰€èƒ½å‚¨å­˜çš„æ•°æ®æ˜¯æœ‰é™çš„ï¼Œè€Œä¸”åœ¨å…³é—­æˆ–è€…è·¨åŸŸçš„æƒ…å†µä¸‹éƒ½æ˜¯æ— æ³•è®¿é—®åˆ°çš„ï¼Œæˆ‘ä»¬èªæ˜çš„ç¨‹åºå‘æ˜è€…å°±ç ”ç©¶äº†è¿™ä¸€ç§å¯ä»¥userDataä¿å­˜æ•°æ®çš„æ–¹å¼ã€‚</p><h4 id="userData"><a href="#userData" class="headerlink" title="userData"></a>userData</h4><p>userData æ˜¯IEæµè§ˆå™¨ä¸“æœ‰çš„æ•°æ®å‚¨å­˜ã€‚æˆ‘ä»¬å¸¸ç”¨è¿™ç§æ–¹å¼æ¥å…¼å®¹ieçš„è€ç‰ˆæµè§ˆå™¨ï¼Œæœ€ä½ç‰ˆæœ¬æ”¯æŒåˆ°IE5.0ç‰ˆæœ¬ï¼Œæœ€é«˜åˆ°IE9ä»¥ä¸Šã€‚ç°åœ¨æœ‰H5åŸºæœ¬å…¼å®¹äº†æ›´ä¼˜çš„ä¸€äº›å‚¨å­˜APiï¼Œè¿™ç§ç”¨æ³•åŸºæœ¬å¿«åºŸå¼ƒäº†ã€‚<br>  å½“æ—¶ä»–çš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³cookieçš„æ•°æ®å±€é™æ€§ã€‚å½“æµè§ˆå™¨å…³é—­æ—¶ï¼Œä»–çš„æ•°æ®ä¹Ÿæ˜¯å¯ä»¥ä¿ç•™çš„ã€‚<br>  ç”¨æˆ·æ•°æ®å…è®¸æ¯ä¸ªæ–‡æ¡£æœ€å¤š128KBæ•°æ®ï¼Œæ¯ä¸ªåŸŸåæœ€å¤š1MBæ•°æ®ã€‚<br>  å‚¨å­˜æ ¼å¼ä»¥xmlçš„å½¢å¼å‚¨å­˜åœ¨å®¢æˆ·ç«¯ä¸Šã€‚</p><ul><li>ä½¿ç”¨æ–¹å¼</li></ul><p>ç»™divæ·»åŠ behaviorå±æ€§ï¼ˆæˆ–è€…åŠ¨æ€ç”Ÿæˆä¸€ä¸ªbehaviorçš„domæ ‡ç­¾ï¼‰</p><pre class=" language-css"><code class="language-css">  &lt;div style=<span class="token string">"behavior:url(#default#userData)"</span> id=<span class="token string">"dataInfoStore"</span>>&lt;/div></code></pre><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">var</span> dataStore <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"dataInfoStore"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨setAttribute()æ–¹æ³•ä¿å­˜æ•°æ® è¿™æ˜¯ä½¿ç”¨çš„æ˜¯divçš„attrå…ƒç´ çš„é“ç†</span>  dataStore<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"oldBool"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä½¿ç”¨saveæ·»åŠ åˆ°è‡ªå®šä¹‰çš„å˜é‡åç©ºé—´ä¸‹</span>  dataStore<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">"listInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¯»å–æ•°æ®</p><pre class=" language-javascript"><code class="language-javascript">  dataStore<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"listInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//loadå‚¨å­˜æ•°æ®</span>  dataStore<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"oldBool"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è·å–keyå€¼</span></code></pre><p>åˆ é™¤æ•°æ® </p><pre class=" language-javascript"><code class="language-javascript">  dataStore<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"listInfo"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//åˆ é™¤atträ¿¡æ¯</span></code></pre><h4 id="globalStorage"><a href="#globalStorage" class="headerlink" title="globalStorage"></a>globalStorage</h4><p>globalStorageä¹Ÿæ˜¯H5æ¯”è¾ƒè€çš„ä¸€ç§å‚¨å­˜æ–¹å¼ï¼Œä»–æ˜¯ç»§userDataä¹‹åå‡ºç°çš„ä¸€ç§å‚¨å­˜æ–¹å¼ï¼Œä¸€ä¸ªåŸŸåä¸‹ç½ªé”™å¯ä»¥å‚¨å­˜5120kçš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥è·¨é¡µé¢è¯»å–ã€‚</p><pre class=" language-javascript"><code class="language-javascript">  globalStorage<span class="token punctuation">[</span><span class="token string">'core.mokahr.com'</span><span class="token punctuation">]</span> æ‰€æœ‰core<span class="token punctuation">.</span>mokahr<span class="token punctuation">.</span>comä¸‹é¢çš„é¡µé¢éƒ½å¯ä»¥ä½¿ç”¨è¿™å—ç©ºé—´  globalStorage<span class="token punctuation">[</span><span class="token string">'mokahr.com'</span><span class="token punctuation">]</span> mokahr<span class="token punctuation">.</span>comä¸‹é¢çš„é¡µé¢éƒ½å¯ä»¥ä½¿ç”¨è¿™å—ç©ºé—´  globalStorage<span class="token punctuation">[</span><span class="token string">'com'</span><span class="token punctuation">]</span>ï¼šæ‰€æœ‰comåŸŸåéƒ½å¯ä»¥ å…±äº«çš„ä½¿ç”¨è¿™ä¸€å—ç©ºé—´  globalStorage<span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span> ï¼šæ‰€æœ‰é¡µé¢éƒ½å¯ä»¥ä½¿ç”¨çš„ç©ºé—´</code></pre><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><ul><li>è®¾ç½®<pre class=" language-javascript"><code class="language-javascript">globalStorage<span class="token punctuation">[</span><span class="token string">"mokahr.com"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>employName <span class="token operator">=</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">;</span></code></pre></li><li>å–å€¼<pre class=" language-javascript"><code class="language-javascript">globalStorage<span class="token punctuation">[</span><span class="token string">"mokahr.com"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"employName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¼ ä¸‰</span></code></pre></li><li>åˆ é™¤<pre class=" language-javascript"><code class="language-javascript">globalStorage<span class="token punctuation">[</span><span class="token string">"mokahr.com"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">"employName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><p>ğŸ˜Šæ˜¯ä¸æ˜¯å’Œæˆ‘ä»¬çš„sessionStorage/localStorageå¾ˆåƒå•Šï¼Œå…¶å®æ¥ä¸‹æ¥å°±å‘å±•æˆsessionStorage/localStorageçš„å½¢å¼äº†ã€‚</p><h4 id="sessionStorage-localStorage"><a href="#sessionStorage-localStorage" class="headerlink" title="sessionStorage/localStorage"></a>sessionStorage/localStorage</h4><p><code>sessionStorage</code>å¯¹è±¡æ˜¯å­˜å‚¨ç‰¹å®šäºæŸä¸ªä¼šè¯çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åªä¿å­˜åˆ°æµè§ˆå™¨å…³é—­ï¼Œè¿™ä¸ªå¯¹è±¡å°±åƒä¼šè¯cookieï¼Œä¹Ÿä¼šåœ¨æµè§ˆå™¨å…³åæ¶ˆå¤±ï¼Œå­˜å‚¨åœ¨<code>sessionStorage</code>ä¸­çš„æ•°æ®å¯ä»¥è·¨è¶Šé¡µé¢åˆ·æ–°è€Œå­˜åœ¨ã€‚è€Œ<code>localStorage</code>çš„æ•°æ®æ˜¯æ°¸ä¹…æ€§çš„ï¼Œä»–ä¸éšç€æµè§ˆå™¨çš„å…³é—­è€Œæ¸…é™¤ã€‚ç”¨è¿™ç§æ–¹æ³•æˆ‘ä»¬å¯ä»¥å‚¨å­˜ä¸€äº›éœ€è¦ä¿ç•™çš„æ•°æ®ï¼Œå¸Œæœ›ä¸‹æ¬¡æ‰“å¼€åç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼ˆæ¯”å¦‚ç”¨æˆ·çš„ä¹ æƒ¯è¡Œä¸ºï¼‰ï¼›<br>è¿™ä¸¤ç§æ˜¯æˆ‘ä»¬ç›®å‰å¸¸ç”¨çš„å‚¨å­˜æ•°æ®çš„æ–¹å¼ï¼›</p><p>æ”¯æŒ<code>sessionStorage/localStorage</code>çš„æµè§ˆå™¨æœ€å°ç‰ˆæœ¬ï¼šIE8ã€Chrome 5ã€‚æ‰€ä»¥ç°åœ¨ä¸»æµçš„æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªå†™æ³•ï¼Œæˆ‘ä»¬åŸºæœ¬ç°åœ¨éƒ½ç”¨è¿™ç§å†™æ³•æ¥å®ç°ä¼šè¯æ•°æ®çš„å‚¨å­˜ã€‚æœ€å¤šå‚¨å­˜5Mæ•°æ®ã€‚</p><p>æ³¨æ„ï¼š<code>sessionStorage/localStorage</code> çš„æ•°æ®æ˜¯å¯è§çš„ï¼Œä¸€äº›æ•æ„Ÿçš„æ•°æ®ä¸å»ºè®®å‚¨å­˜åœ¨è¿™é‡Œã€‚</p><ul><li><p>è®¾å€¼ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//  ä½¿ç”¨æ–¹æ³•å­˜å‚¨æ•°æ® jsonå¯¹è±¡è¦ä½¿ç”¨JSON.Stringify()æ–¹æ³•è½¬æ¢æˆæ–‡æœ¬æ ¼å¼</span>sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"userData"</span><span class="token punctuation">,</span> <span class="token string">"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ•°æ®å¯ä»¥æ˜¯json string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//  ä½¿ç”¨å±æ€§å­˜å‚¨æ•°æ®</span>sessionStorage<span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token string">"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ•°æ®å¯ä»¥æ˜¯json string"</span><span class="token punctuation">;</span>sessionStorage<span class="token punctuation">[</span><span class="token string">'userData'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ•°æ®å¯ä»¥æ˜¯json string"</span><span class="token punctuation">;</span></code></pre></li><li><p>å–å€¼</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//é€šè¿‡getItemï¼ˆï¼‰æ–¹æ³•å–å€¼</span><span class="token keyword">const</span> userData <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'userData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è¿™é‡Œæ˜¯keyå</span><span class="token comment" spellcheck="true">//é€šè¿‡å±æ€§å–å€¼</span><span class="token keyword">const</span> userData <span class="token operator">=</span> sessionStorage<span class="token punctuation">[</span><span class="token string">'userData'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å¦‚æœå‚¨å­˜çš„æ˜¯ä¸€ä¸ªjsonå­—ç¬¦ä¸²éœ€è¦é€šè¿‡JSON.parse()æ¥åºåˆ—åŒ–æˆå¯¹è±¡</span><span class="token keyword">const</span> JsonUserdata <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>åˆ é™¤å±æ€§</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//é€šè¿‡removeItem()æ¥åˆ é™¤</span>sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'userData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç§»é™¤userDataå±æ€§çš„æ•°æ®</span></code></pre></li></ul><h4 id="IndexedDB"><a href="#IndexedDB" class="headerlink" title="IndexedDB"></a>IndexedDB</h4><p>å®˜æ–¹è§£é‡Šï¼šIndexedDB æ˜¯ä¸€ç§å¯ä»¥è®©ä½ åœ¨ç”¨æˆ·çš„æµè§ˆå™¨å†…æŒä¹…åŒ–å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€‚IndexedDB ä¸ºç”Ÿæˆ Web Application æä¾›äº†ä¸°å¯Œçš„æŸ¥è¯¢èƒ½åŠ›ï¼Œä½¿æˆ‘ä»¬çš„åº”ç”¨åœ¨åœ¨çº¿å’Œç¦»çº¿æ—¶éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p><p>IndexedDBå…¼å®¹æ”¯æŒæµè§ˆå™¨æƒ…å†µï¼š<br>  fireFox: 50+;<br>  chrome: 57+;<br>  safari: 10+;<br>  opera: 45+</p><p>æŸ¥è¯¢æ”¯æŒæƒ…å†µï¼š</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>indexedDB<span class="token punctuation">)</span> <span class="token punctuation">{</span>    window<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ä¸æ”¯æŒ"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span></code></pre><p>å…·ä½“ä½¿ç”¨ï¼š</p><ul><li>å¼•å…¥</li></ul><pre class=" language-javascript"><code class="language-javascript">  <span class="token comment" spellcheck="true">// æ‰“å¼€æˆ‘ä»¬çš„æ•°æ®åº“</span>  <span class="token keyword">var</span> MokaDataStore <span class="token operator">=</span> window<span class="token punctuation">.</span>indexedDB<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"mokaDataStore"</span><span class="token punctuation">,</span><span class="token string">'1200'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å‚¨å­˜ç©ºé—´å’Œç‰ˆæœ¬å·</span>  <span class="token comment" spellcheck="true">// æ‰“å¼€æ•°æ®åº“æˆåŠŸåï¼Œè‡ªåŠ¨è°ƒç”¨onsuccessäº‹ä»¶å›è°ƒã€‚</span>  MokaDataStore<span class="token punctuation">.</span>onsuccess <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// æ‰“å¼€æ•°æ®åº“å¤±è´¥</span>  MokaDataStore<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// ç¬¬ä¸€æ¬¡æ‰“å¼€æˆåŠŸåæˆ–è€…ç‰ˆæœ¬æœ‰å˜åŒ–è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹äº‹ä»¶ï¼šä¸€èˆ¬ç”¨äºåˆå§‹åŒ–æ•°æ®åº“ã€‚</span>  MokaDataStore<span class="token punctuation">.</span>onupgradeneeded <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> dv <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è·å–åˆ° demoDBå¯¹åº”çš„ MokaDataStore,ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ•°æ®åº“ã€‚</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>db<span class="token punctuation">.</span>objectStoreNames<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>employeeStore<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//å¦‚æœè¡¨æ ¼ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„è¡¨æ ¼ï¼ˆkeyPathï¼Œä¸»é”® ï¼› autoIncrement,æ˜¯å¦è‡ªå¢ï¼‰ï¼Œä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆobjectStoreï¼‰</span>      <span class="token comment" spellcheck="true">// objectStoreå°±ç›¸å½“äºæ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ã€‚IDBObjectStoreç±»å‹ã€‚</span>      <span class="token keyword">var</span> objectStore <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">createObjectStore</span><span class="token punctuation">(</span>employeeStore<span class="token punctuation">,</span> <span class="token punctuation">{</span>        keyPath<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>        autoIncrement<span class="token punctuation">:</span> <span class="token boolean">true</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//æŒ‡å®šå¯ä»¥è¢«ç´¢å¼•çš„å­—æ®µï¼Œuniqueå­—æ®µæ˜¯å¦å”¯ä¸€ã€‚ç±»å‹ï¼š IDBIndex</span>      objectStore<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token string">'employeeId'</span><span class="token punctuation">,</span> <span class="token string">'employeeId'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        unique<span class="token punctuation">:</span> <span class="token boolean">true</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      objectStore<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token string">'employeeName'</span><span class="token punctuation">,</span> <span class="token string">'employeeName'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        unique<span class="token punctuation">:</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ•°æ®åº“ç‰ˆæœ¬æ›´æ”¹ä¸ºï¼š '</span> <span class="token operator">+</span> dbVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><ul><li>å‘æ•°æ®åº“ä¸­å¢åŠ æ•°æ®</li></ul><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">var</span> transaction <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span>employeeStore<span class="token punctuation">,</span> <span class="token string">"readwrite"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// åœ¨æ‰€æœ‰æ•°æ®æ·»åŠ å®Œæ¯•åçš„å¤„ç†</span>  transaction<span class="token punctuation">.</span>oncomplete <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ å®Œæˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  transaction<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é”™è¯¯å¤„ç†ï¼</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> objectStore <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">objectStore</span><span class="token punctuation">(</span>employeeStore<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> addEmployeeRequest <span class="token operator">=</span> objectStore<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    employeeId<span class="token punctuation">:</span> <span class="token number">6758</span><span class="token punctuation">,</span>    employeeName<span class="token punctuation">:</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>transaction() æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼ˆä¸€ä¸ªæ˜¯å¯é€‰çš„ï¼‰å¹¶è¿”å›ä¸€ä¸ªäº‹åŠ¡å¯¹è±¡ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹åŠ¡å¸Œæœ›è·¨è¶Šçš„å¯¹è±¡å­˜å‚¨ç©ºé—´çš„åˆ—è¡¨ã€‚å¦‚æœä½ å¸Œæœ›äº‹åŠ¡èƒ½å¤Ÿè·¨è¶Šæ‰€æœ‰çš„å¯¹è±¡å­˜å‚¨ç©ºé—´ä½ å¯ä»¥ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œä½†è¯·ä¸è¦è¿™æ ·åšï¼Œå› ä¸ºæ ‡å‡†è§„å®šä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ä¼šå¯¼è‡´ä¸€ä¸ªInvalidAccessErrorï¼ˆå¯ä»¥ä½¿ç”¨å±æ€§db.objectStoreNamesï¼‰ã€‚å¦‚æœä½ æ²¡æœ‰ä¸ºç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä»»ä½•å†…å®¹ï¼Œä½ å¾—åˆ°çš„æ˜¯åªè¯»äº‹åŠ¡ã€‚å¦‚æœä½ æƒ³å†™å…¥æ•°æ®ï¼Œä½ éœ€è¦ä¼ å…¥ â€œreadwriteâ€ æ ‡è¯†ã€‚</p><ul><li>ä»æ•°æ®åº“ä¸­è·å–æ•°æ®</li></ul><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">var</span> transaction <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span>employeeStore<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> objectStore <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">objectStore</span><span class="token punctuation">(</span>employeeStore<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> request <span class="token operator">=</span> objectStore<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token number">6758</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// IDBIndex</span>  request<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é”™è¯¯å¤„ç†!</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  request<span class="token punctuation">.</span>onsuccess <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¯¹ request.result åšäº›æ“ä½œï¼</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"employeeId === 6758çš„æ•°æ®æ˜¯"</span> <span class="token operator">+</span> request<span class="token punctuation">.</span>result<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><ul><li>ä»æ•°æ®åº“ä¸­åˆ é™¤æ•°æ®</li></ul><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">var</span> request <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"customers"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"readwrite"</span><span class="token punctuation">)</span>                  <span class="token punctuation">.</span><span class="token function">objectStore</span><span class="token punctuation">(</span><span class="token string">"customers"</span><span class="token punctuation">)</span>                  <span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token number">6758</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  request<span class="token punctuation">.</span>onsuccess <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åˆ é™¤employeeIdæ˜¯6758çš„æ•°æ®æˆåŠŸï¼</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chrome </tag>
            
            <tag> web </tag>
            
            <tag> Storage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reactæ€§èƒ½ä¼˜åŒ–</title>
      <link href="2020/07/25/react-performance/"/>
      <url>2020/07/25/react-performance/</url>
      
        <content type="html"><![CDATA[<h4 id="Reactç»„ä»¶æ€§èƒ½ä¼˜åŒ–"><a href="#Reactç»„ä»¶æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="Reactç»„ä»¶æ€§èƒ½ä¼˜åŒ–"></a>Reactç»„ä»¶æ€§èƒ½ä¼˜åŒ–</h4><p>Reactæ˜¯ä¸€ä¸ªä¸“æ³¨äºUIå±‚çš„æ¡†æ¶ï¼Œå®ƒä½¿ç”¨è™šæ‹ŸDOMæŠ€æœ¯ï¼Œä»¥ä¿è¯å®ƒUIçš„é«˜é€Ÿæ¸²æŸ“ï¼›ä½¿ç”¨å•å‘æ•°æ®æµï¼Œå› æ­¤å®ƒæ•°æ®ç»‘å®šæ›´åŠ ç®€å•ï¼›é‚£ä¹ˆå®ƒå†…éƒ¨æ˜¯å¦‚ä½•ä¿æŒç®€å•é«˜æ•ˆçš„UIæ¸²æŸ“å‘¢ï¼Ÿè¿™ç§æ¸²æŸ“æœºåˆ¶æœ‰å¯èƒ½å­˜åœ¨ä»€ä¹ˆæ€§èƒ½é—®é¢˜å‘¢ï¼Ÿ</p><h5 id="1-renderå‡½æ•°"><a href="#1-renderå‡½æ•°" class="headerlink" title="1.renderå‡½æ•°"></a>1.renderå‡½æ•°</h5><p>  (1)åœ¨è°ƒç”¨ç»„ä»¶æ—¶ï¼Œå¦‚æœæŸä¸ªå±æ€§å€¼æ˜¯å‡½æ•°ï¼Œé¿å…ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œä¸ç„¶æ¯æ¬¡æ¯”è¾ƒpropsä¸­è¯¥å±æ€§æ—¶éƒ½æ˜¯ä¸åŒçš„ã€‚<br>  æ­£ç¡®çš„åšæ³•</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>  <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>    handleClick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//TODO</span>    <span class="token punctuation">}</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>            <span class="token operator">&lt;</span>ChildDom  onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token comment" spellcheck="true">//æ„é€ å‡½æ•°æ¯ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™åªä¼šæ‰§è¡Œä¸€éï¼›</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre><p>ä¸æ¨ä»‹ä¾‹å­ï¼š</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token operator">&lt;</span>ChildDom  onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token comment" spellcheck="true">//éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç®­å¤´å‡½æ•°ï¼Œå³ä½¿ä¸¤ä¸ªç®­å¤´å‡½æ•°çš„å†…å®¹æ˜¯ä¸€æ ·çš„ã€‚</span>  <span class="token operator">&lt;</span>ChildDom  onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token comment" spellcheck="true">//åœ¨æ¯æ¬¡render()çš„æ—¶å€™éƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éå‡½æ•°ï¼›</span></code></pre><p>  (2)åœ¨shouldComponentUpdateç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œæ¯”è¾ƒï¼Œå‡å°‘renderå‡½æ•°åˆ·æ–°æ¬¡æ•°ã€‚<br>  ä½¿ç”¨æµ…æ¯”è¾ƒæ—¶ï¼Œå¦‚æœæ˜¯å¯¹è±¡ç±»å‹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼ˆè¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ladashåº“æ¥å®ç°ï¼‰<br>  demo:</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">,</span> nextState<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>      JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>nextState<span class="token punctuation">.</span>rosterList<span class="token punctuation">)</span> <span class="token operator">===</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>staterosterList<span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span></code></pre><p>ä½¿ç”¨React.memoè¿›è¡Œç»„ä»¶è®°å¿†ï¼›<br>çº¯å‡½æ•°çš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨React.memoæ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚æˆ–è€…å¯ä»¥å‡å°‘ä¸å¿…è¦çš„stateå‚æ•°ä½¿ç”¨ã€‚</p><h5 id="2-keyå€¼çš„ä½¿ç”¨"><a href="#2-keyå€¼çš„ä½¿ç”¨" class="headerlink" title="2.keyå€¼çš„ä½¿ç”¨"></a>2.keyå€¼çš„ä½¿ç”¨</h5><p>  (1)reactç»„ä»¶åœ¨è£…è½½è¿‡ç¨‹ä¸­ï¼Œreacté€šè¿‡åœ¨renderæ–¹æ³•åœ¨å†…å­˜ä¸­äº§ç”Ÿä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæ ‘ä¸Šçš„èŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªreactç»„ä»¶æˆ–è€…åŸç”Ÿçš„Domå…ƒç´ ï¼Œè¿™ä¸ªæ ‘å½¢ç»“æ„å°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„Vitural Domï¼Œreactæ ¹æ®è¿™ä¸ªæ¥æ¸²æŸ“äº§ç”Ÿæµè§ˆå™¨çš„Domæ ‘ã€‚<br>  (2)reactåœ¨æ›´æ–°é˜¶æ®µå¯¹æ¯”åŸæœ‰çš„Vitural Domå’Œæ–°ç”Ÿæˆçš„Vitural Domï¼Œæ‰¾å‡ºä¸åŒä¹‹å¤„ï¼Œåœ¨æ ¹æ®ä¸åŒæ¥æ¸²æŸ“Domæ ‘ã€‚<br>  (3)reactä¸ºäº†è¿½æ±‚é«˜æ€§èƒ½ï¼Œé‡‡ç”¨äº†æ—¶é—´å¤æ‚åº¦ä¸ºO(N)æ¥æ¯”è¾ƒä¸¤ä¸ªå±æ€§ç»“æ„çš„åŒºåˆ«ï¼Œå› ä¸ºè¦ç¡®åˆ‡æ¯”è¾ƒä¸¤ä¸ªæ ‘å½¢ç»“æ„ï¼Œéœ€è¦é€šè¿‡O(N^3),è¿™ä¼šé™ä½æ€§èƒ½.</p><h5 id="3-å‡å°‘ä½¿ç”¨stateæ¥å…±äº«æ•°æ®-è·¨ç»„ä»¶ä½¿ç”¨æ•°æ®æ˜¯æ¨ä»‹ä½¿ç”¨reduxã€‚"><a href="#3-å‡å°‘ä½¿ç”¨stateæ¥å…±äº«æ•°æ®-è·¨ç»„ä»¶ä½¿ç”¨æ•°æ®æ˜¯æ¨ä»‹ä½¿ç”¨reduxã€‚" class="headerlink" title="3.å‡å°‘ä½¿ç”¨stateæ¥å…±äº«æ•°æ®,è·¨ç»„ä»¶ä½¿ç”¨æ•°æ®æ˜¯æ¨ä»‹ä½¿ç”¨reduxã€‚"></a>3.å‡å°‘ä½¿ç”¨stateæ¥å…±äº«æ•°æ®,è·¨ç»„ä»¶ä½¿ç”¨æ•°æ®æ˜¯æ¨ä»‹ä½¿ç”¨reduxã€‚</h5><p>  å¦‚æœæœ‰å¦‚ä¸‹æƒ…å†µæ„å‘³ç€ä½ è¦ä½¿ç”¨redux<br>  1.ç»„ä»¶é¦–å…¶ä»–ä¸ç›¸å…³ç»„ä»¶çš„çŠ¶æ€æ§åˆ¶<br>  2.ç»„ä»¶ä¹‹é—´ä¸æ˜¯å­çˆ¶ç»„ä»¶å…³ç³»<br>  3.è®¸å¤šä¸ç›¸å…³çš„ç»„ä»¶ä»¥ç›¸åŒçš„æ–¹å¼æ›´æ–°çŠ¶æ€<br>  4.çŠ¶æ€ä»¥è®¸å¤šä¸åŒçš„æ–¹å¼æ›´æ–°</p><h5 id="4-ç»„ä»¶æ‡’åŠ è½½"><a href="#4-ç»„ä»¶æ‡’åŠ è½½" class="headerlink" title="4.ç»„ä»¶æ‡’åŠ è½½"></a>4.ç»„ä»¶æ‡’åŠ è½½</h5><p>1ã€webpack+es6çš„import(this.props.childrenä¸ºå›è°ƒå‡½æ•°);</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span>  <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>    constructor <span class="token punctuation">(</span> props <span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span> <span class="token punctuation">(</span> props <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è°ƒç”¨ä¸‹é¢load</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span>            Com<span class="token punctuation">:</span><span class="token keyword">null</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token function">load</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//this.props.load()å°±æ˜¯è°ƒç”¨indexrou.jsxä¼ è¿‡æ¥çš„å‡½æ•°</span>        props<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Com<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Com<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¾—åˆ°çš„å°±æ˜¯ä¼ è¿‡æ¥çš„å‡½æ•°</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                Com<span class="token punctuation">:</span>Com<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token operator">?</span>Com<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">:</span><span class="token keyword">null</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    render <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>Com<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>Com<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Load <span class="token keyword">from</span> <span class="token string">'../components/lazy'</span><span class="token punctuation">;</span><span class="token keyword">let</span> Demo2<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Load load<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/demo2'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>        <span class="token punctuation">{</span><span class="token punctuation">(</span>Com<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token operator">&lt;</span>Com<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>     <span class="token operator">&lt;</span><span class="token operator">/</span>Load<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>2ã€webpack+es6çš„importçº¯ç²¹çš„é«˜é˜¶ç»„ä»·</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>loading<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//ä¼ è¿‡æ¥ä¸€ä¸ªå‡½æ•°</span>    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>        constructor <span class="token punctuation">(</span> props <span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">super</span> <span class="token punctuation">(</span> props <span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span>                Com<span class="token punctuation">:</span><span class="token keyword">null</span>            <span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token function">load</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token function">loading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Com<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//è°ƒç”¨å‡½æ•°è·å–å®ƒä¼ è¿‡æ¥çš„è·¯å¾„</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                    Com<span class="token punctuation">:</span>Com<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token operator">?</span>Com<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">:</span><span class="token keyword">null</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        render <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">let</span> Com<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>Com<span class="token punctuation">;</span>            <span class="token keyword">return</span> Com<span class="token operator">?</span><span class="token operator">&lt;</span>Com<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åœ¨routerè·¯ç”±é‡Œ indexrou.js</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Load <span class="token keyword">from</span> <span class="token string">'../components/lazy'</span><span class="token punctuation">;</span><span class="token keyword">let</span> Demo2<span class="token operator">=</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/demo2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>3ã€webpack+es6çš„import +asyncï¼ˆé«˜é˜¶å‡½æ•°ï¼‰</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>loading<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>        constructor <span class="token punctuation">(</span> props <span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">super</span> <span class="token punctuation">(</span> props <span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span>                Com<span class="token punctuation">:</span><span class="token keyword">null</span>            <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å³ä½¿æ˜¯åŒæ­¥çš„è¯æ‰§è¡Œçš„ä¹Ÿæ˜¯promise.resolveè¿™ä¸ªæ–¹æ³•ï¼Œå°†åŒæ­¥ä»£ç åŒ…è£…ä¸€å±‚ï¼Œè¿›è¡ŒåŒæ­¥</span>        <span class="token comment" spellcheck="true">//awaitåé¢æ¥æ”¶çš„æ˜¯å€¼æˆ–promise</span>        <span class="token keyword">async</span> <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> Com<span class="token operator">=</span><span class="token keyword">await</span> <span class="token function">loading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//ä¾æ¬¡æ‰§è¡Œï¼Œåªæœ‰ä¸€ä¸ªawaitå¾€ä¸‹èµ°ï¼ŒComæ˜¯æœ‰å€¼çš„</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                Com<span class="token punctuation">:</span>Com<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token operator">?</span>Com<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">:</span><span class="token keyword">null</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        render <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">let</span> Com<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>Com<span class="token punctuation">;</span>            <span class="token keyword">return</span> Com<span class="token operator">?</span><span class="token operator">&lt;</span>Com<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åœ¨routerè·¯ç”±é‡Œ indexrou.jsx</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Load <span class="token keyword">from</span> <span class="token string">'../components/lazy'</span><span class="token punctuation">;</span><span class="token keyword">let</span> Demo2<span class="token operator">=</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/demo2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>4ã€webpack+require.ensure (é«˜é˜¶ç»„ä»·)</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>loading<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>        constructor <span class="token punctuation">(</span> props <span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">super</span> <span class="token punctuation">(</span> props <span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span>                Com<span class="token punctuation">:</span><span class="token keyword">null</span>            <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span>reject<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//[]ä¾èµ–é¡¹</span>                    <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">loading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">;</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">resolve</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                    Com<span class="token punctuation">:</span>data                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> Com<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>Com<span class="token punctuation">;</span>            <span class="token keyword">return</span> Com<span class="token operator">?</span><span class="token operator">&lt;</span>Com<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>åœ¨routerè·¯ç”±é‡Œ indexrou.jsx</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">import</span> Load <span class="token keyword">from</span> <span class="token string">'../components/lazy'</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> Demo2<span class="token operator">=</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../components/demo2'</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5 id="5-ä½¿ç”¨-React-Fragments-é¿å…é¢å¤–æ ‡è®°"><a href="#5-ä½¿ç”¨-React-Fragments-é¿å…é¢å¤–æ ‡è®°" class="headerlink" title="5.ä½¿ç”¨ React Fragments é¿å…é¢å¤–æ ‡è®°"></a>5.ä½¿ç”¨ React Fragments é¿å…é¢å¤–æ ‡è®°</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token function">radiosBtns</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">(</span>        <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">></span>            <span class="token operator">&lt;</span>RadioButton value<span class="token operator">=</span><span class="token string">"1"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span><span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>                <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">"flag"</span> className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">flag</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' fs16'</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>RadioButton<span class="token operator">></span>            <span class="token operator">&lt;</span>RadioButton value<span class="token operator">=</span><span class="token string">"2"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span><span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>                <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">"flag"</span> className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">flag</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' fs16'</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>RadioButton<span class="token operator">></span>            <span class="token operator">&lt;</span>RadioButton value<span class="token operator">=</span><span class="token string">"3"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span><span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>                <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">"flag"</span> className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">flag</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' fs16'</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>RadioButton<span class="token operator">></span>            <span class="token operator">&lt;</span>RadioButton value<span class="token operator">=</span><span class="token string">"4"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span><span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>                <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">"flag"</span> className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">flag</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' fs16'</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>RadioButton<span class="token operator">></span>            <span class="token operator">&lt;</span>RadioButton value<span class="token operator">=</span><span class="token string">"5"</span> key<span class="token operator">=</span><span class="token string">"5"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span><span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>                <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">"flag"</span> className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">flag</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' fs16'</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>RadioButton<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h5 id="6-ä¸è¦ä½¿ç”¨å†…è”å‡½æ•°å®šä¹‰"><a href="#6-ä¸è¦ä½¿ç”¨å†…è”å‡½æ•°å®šä¹‰" class="headerlink" title="6.ä¸è¦ä½¿ç”¨å†…è”å‡½æ•°å®šä¹‰"></a>6.ä¸è¦ä½¿ç”¨å†…è”å‡½æ•°å®šä¹‰</h5><p>eg: ä¸€ä¸ªå†…è”çš„â€œDOMç»„ä»¶â€äº‹ä»¶å¤„ç†ç¨‹åº</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>button          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> clicked<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>          <span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token operator">></span>          XXX        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h5 id="7-ä¼˜åŒ–-React-ä¸­çš„æ¡ä»¶æ¸²æŸ“"><a href="#7-ä¼˜åŒ–-React-ä¸­çš„æ¡ä»¶æ¸²æŸ“" class="headerlink" title="7.ä¼˜åŒ– React ä¸­çš„æ¡ä»¶æ¸²æŸ“"></a>7.ä¼˜åŒ– React ä¸­çš„æ¡ä»¶æ¸²æŸ“</h5><p>  å¯ä»¥ä½¿ç”¨ä¸‰å…ƒï¼Œif-elseï¼Œandè¿ç®—ç¬¦(&amp;&amp;)ã€‚æ¨èä½¿ç”¨&amp;&amp;æ¥è¡¨ç¤ºï¼›<br>  å°½é‡ä½¿ç”¨return nullæ¥åˆ¤æ–­æ˜¾éšï¼Œè€Œä¸æ˜¯ç”¨cssçš„displayï¼šnoneï¼Œé¿å…å›æµï¼›</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> con <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>goods<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text <span class="token operator">?</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>goods<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">:</span><span class="token keyword">null</span>   <span class="token comment" spellcheck="true">//æ¡ä»¶æ¸²æŸ“ </span>    <span class="token keyword">return</span><span class="token punctuation">(</span>        <span class="token operator">&lt;</span>div<span class="token operator">></span>          <span class="token punctuation">{</span>con<span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span>  <span class="token punctuation">}</span></code></pre><h5 id="8-äº‹ä»¶èŠ‚æµå’Œé˜²æŠ–"><a href="#8-äº‹ä»¶èŠ‚æµå’Œé˜²æŠ–" class="headerlink" title="8.äº‹ä»¶èŠ‚æµå’Œé˜²æŠ–"></a>8.äº‹ä»¶èŠ‚æµå’Œé˜²æŠ–</h5><p>ï¼ˆå‚è€ƒèŠ‚æµé˜²æŠ–åŠŸèƒ½å®ç°ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ï¼‰</p><h5 id="9-ä¸è¦åœ¨renderä¸­ç”Ÿæˆæ–°çš„å¼•ç”¨"><a href="#9-ä¸è¦åœ¨renderä¸­ç”Ÿæˆæ–°çš„å¼•ç”¨" class="headerlink" title="9.ä¸è¦åœ¨renderä¸­ç”Ÿæˆæ–°çš„å¼•ç”¨"></a>9.ä¸è¦åœ¨renderä¸­ç”Ÿæˆæ–°çš„å¼•ç”¨</h5><p>å®šä¹‰å‡½æ•°ã€ä½¿ç”¨å†…è”æ ·å¼æˆ–è€…åŠ¨æ€ç”Ÿæˆä¸€äº›ä¸ä¾èµ–stateæˆ–propsçš„jsxè¿™äº›ï¼Œå‡¡æ˜¯ä¸ä¾èµ–stateæˆ–propsçš„éƒ½åº”è¯¥æåˆ°renderä¹‹å¤–ï¼Œå¦åˆ™ä¼šé€ æˆæ¯æ¬¡renderçš„æ—¶å€™ç”Ÿæˆæ–°çš„å¼•ç”¨ï¼Œä¼šå¯¼è‡´åœ¨diffç®—æ³•å¯¹æ¯”å±æ€§æˆ–èŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­å‘ç°ä¸¤ä¸ªå¼•ç”¨ä¸ä¸€è‡´ï¼Œå¯¹äºreactæ¥è¯´ï¼Œè¿™è¯´æ˜å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œæœ€åä¼šè¢«æ›¿æ¢æˆæ–°çš„å¼•ç”¨ï¼Œé€ æˆæ€§èƒ½æµªè´¹ã€‚ä¾‹å¦‚å‡½æ•°åº”è¯¥æ”¾åœ¨renderå‡½æ•°å¤–å®šä¹‰ï¼Œæ ·å¼åº”è¯¥å•ç‹¬å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå¼•å…¥ï¼Œä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°æˆ–è€…è‡ªå®šä¹‰å‡½æ•°åŠ¨æ€ç”Ÿæˆä¸€äº›ä¸ä¾èµ–stateæˆ–propsçš„jsxã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token keyword">import</span> <span class="token punctuation">{</span>Input<span class="token punctuation">,</span>Button<span class="token punctuation">,</span>List<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span> <span class="token keyword">const</span> TodoListUI<span class="token operator">=</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>     <span class="token keyword">return</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>Fragment<span class="token operator">></span>            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"form-box"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>Input placeholder<span class="token operator">=</span><span class="token string">"è¯·è¾“å…¥"</span> value<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span><span class="token string">'300px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">"primary"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span><span class="token string">'20px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>æäº¤<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>div  className<span class="token operator">=</span><span class="token string">"list"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>List                size<span class="token operator">=</span><span class="token string">"small"</span>                bordered                dataSource<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>list<span class="token punctuation">}</span>                renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token function">handleDelete</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>            <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>              <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">></span>     <span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> TodoListUI<span class="token punctuation">;</span></code></pre><h5 id="10-ProtoTypes-çš„éªŒè¯ä¼šæŸè€—æ€§èƒ½"><a href="#10-ProtoTypes-çš„éªŒè¯ä¼šæŸè€—æ€§èƒ½" class="headerlink" title="10.ProtoTypes çš„éªŒè¯ä¼šæŸè€—æ€§èƒ½"></a>10.ProtoTypes çš„éªŒè¯ä¼šæŸè€—æ€§èƒ½</h5><p>  å»ºè®®ç”¨ç¯å¢ƒå˜é‡æ§åˆ¶åœ¨ç”Ÿäº§ç¯å¢ƒå…³é—­ç±»å‹éªŒè¯</p><pre class=" language-javascript"><code class="language-javascript">  IncomingTasks<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>    reTryGetData<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span>  <span class="token punctuation">}</span></code></pre><h5 id="11-å°½é‡å°‘ç›´æ¥æ“ä½œdom"><a href="#11-å°½é‡å°‘ç›´æ¥æ“ä½œdom" class="headerlink" title="11.å°½é‡å°‘ç›´æ¥æ“ä½œdom"></a>11.å°½é‡å°‘ç›´æ¥æ“ä½œdom</h5><p>  ç”¨setTimeoutæˆ–ä¸å¯æ§çš„refsç­‰domæ“ä½œï¼›<br>  setTimeoutä¼šå¯¼è‡´stateå¤šæ¬¡æ›´æ–°ï¼Œrefsä¼šç›´æ¥æ“ä½œdomï¼Œæ¶ˆè€—å¤§é‡æ€§èƒ½ï¼›</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>textDom<span class="token punctuation">)</span><span class="token punctuation">{</span>      textDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'textArea'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div contentEditable<span class="token operator">=</span><span class="token string">"true"</span>      id<span class="token operator">=</span><span class="token string">"textArea"</span>      onInput<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onChangeAtPerson<span class="token punctuation">}</span>      className<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>testArea<span class="token punctuation">}</span>      placeholder<span class="token operator">=</span><span class="token string">"è¯·è¾“å…¥è¯„è®ºï¼Œå¯ä»¥@å…¶ä»–äºº"</span>    <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">)</span></code></pre><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>com <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs <span class="token operator">=</span> com<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>    <span class="token comment" spellcheck="true">//TODO</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> æ€§èƒ½ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react redux-dvaç®€æ</title>
      <link href="2020/06/20/redux-dva/"/>
      <url>2020/06/20/redux-dva/</url>
      
        <content type="html"><![CDATA[<h5 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h5><p>  React æ˜¯ä¸€ä¸ªæ•°æ®å•é¡¹çš„JavaScriptåº“ï¼Œå¯ä»¥å®ç°é‡å¤è°ƒç”¨ï¼Œå…¨å±€ä¿®æ”¹å…¨å±€ç”Ÿæ•ˆï¼Œåœ¨è¿™æ ·çš„æƒ…å†µä¸‹æˆ‘ä»¬å°±ä¼šæ¶‰åŠåˆ°æ•°æ®çš„æ¨¡å—å°è£…å’Œæ•°æ®éš”ç¦»ï¼Œç”±äºreactä½¿ç”¨çš„æ˜¯stateçš„æœºåˆ¶æ•…è€Œæˆ‘ä»¬å°±æƒ³è®©reactçš„stateæœºåˆ¶åƒé—­åŒ…çš„æ•°æ®éš”ç¦»ä¸€æ ·å¯¹ä¸åŒç»„ä»¶çš„stateè¿›è¡Œå•ç‹¬å°è£…ï¼Œå•ç‹¬éš”ç¦»ï¼Œä½†æ˜¯å‘¢åˆå¯ä»¥å…¨å±€å¼•ç”¨ï¼Œå› æ­¤å°±å‡ºç°äº†reduxåˆ°dvaç­‰ä¸€ç³»åˆ—çš„reactçš„çŠ¶æ€ç®¡ç†æ¡†æ¶ã€‚</p><h4 id="æœ€åˆå²çš„stateä»‹ç»"><a href="#æœ€åˆå²çš„stateä»‹ç»" class="headerlink" title="æœ€åˆå²çš„stateä»‹ç»"></a>æœ€åˆå²çš„stateä»‹ç»</h4><p>  reactç”¨çš„æ¯”è¾ƒå¤šçš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œreduxçš„æ€æƒ³æ˜¯è§†å›¾ä¸çŠ¶æ€æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼›ä½†æ˜¯å‘¢reduxçš„æ‰€æœ‰çš„çŠ¶æ€ï¼Œéƒ½ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡stateé‡Œé¢ï¼›</p><p>  storeï¼šæ˜¯ä¸€ä¸ªæ•°æ®æ± ï¼Œreduxä¼šæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åœ¨é‡Œé¢ï¼Œæ²¡æœ‰åšæ•°æ®éš”ç¦»ï¼Œè€Œä¸€ä¸ª State å¯¹åº”ä¸€ä¸ª Viewã€‚åªè¦ State ç›¸åŒï¼ŒView å°±ç›¸åŒã€‚</p><p>  redux-sagaå’Œdvaéå¸¸ç›¸ä¼¼ï¼Œå¯ä»¥æŠŠè§¦å‘æ¡ä»¶ç†è§£ä¸ºactionï¼Œå…·ä½“ä¸šåŠ¡å¤„ç†æ˜¯æ˜¯reducerï¼Œé‚£ä¹ˆæˆ‘ä»¬è§¦å‘äº‹ä»¶åªèƒ½é€šè¿‡actionå»æ“ä½œæ•´ä¸ªstoreçš„çŠ¶æ€ï¼Œå¯¹ä¸šåŠ¡æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä¸éœ€è¦çŸ¥é“reducerçš„å…·ä½“å®ç°ï¼Œæ›´æ–°reducerå¯¹ä¸šåŠ¡æ¥è¯´ä¹Ÿæ˜¯æ— æ„Ÿçš„ã€‚è¿™æ ·å°±æŠŠæ•°æ®çš„å¤„ç†å’Œæ›´æ–°ä¸ä¸šåŠ¡åˆ†ç¦»å¼€æ¥ï¼Œç›¸äº’æ²¡æœ‰ç›´æ¥çš„ä¾èµ–å…³ç³»ã€‚</p><h5 id="redux-saga"><a href="#redux-saga" class="headerlink" title="redux-saga:"></a>redux-saga:</h5><ul><li>1.Redux å†…é‡Œåªéœ€ä¸€ä¸ª Store,å…¨å±€çš„æ•°æ®éƒ½åœ¨è¿™ä¸ªå¤§ Store å†…é‡Œã€‚Store çš„ State ä¸èƒ½ç›´æ¥ä¿®æ­£ï¼Œæ¯æ¬¡åªèƒ½è¿”å›ä¸€ä¸ªæ–°çš„ Stateã€‚Redux æ•´äº†ä¸€ä¸ªcreateStoreå‡½æ•°æ¥æ·»åŠ  Storeã€‚</li><li>2.åŒä¸€ä¸ªstateé‡Œä¸èƒ½æœ‰ç›¸åŒçš„keyï¼Œå³åŒä¸€ä¸ªstateé‡Œä¸èƒ½æœ‰ä¸¤ä¸ªListï¼Œè™½ç„¶ä¸¤ä¸ªlistæ˜¯åœ¨ä¸åŒçš„é¡µé¢é‡Œä½¿ç”¨ã€‚</li></ul><p>demo</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>actionçš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">{</span> takeEvery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga'</span><span class="token punctuation">;</span>  <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">yield</span> <span class="token function">takeEvery</span><span class="token punctuation">(</span><span class="token string">'actionName'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span></code></pre><p>å¦‚æœæœ‰å¤šä¸ªsagaå‡½æ•°æ¥ç›‘å¬ä¸åŒçš„actionäº‹ä»¶çš„æƒ…å†µï¼š</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">{</span> takeEvery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span>  <span class="token comment" spellcheck="true">// action 1</span>  <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo1</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// action 2</span>  <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo2</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// åŒæ—¶æŠ›å‡ºå®ƒä»¬</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">rootSaga</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">yield</span> <span class="token function">takeEvery</span><span class="token punctuation">(</span><span class="token string">'actionName1'</span><span class="token punctuation">,</span> demo1<span class="token punctuation">)</span>    <span class="token keyword">yield</span> <span class="token function">takeEvery</span><span class="token punctuation">(</span><span class="token string">'actionName2'</span><span class="token punctuation">,</span> demo2<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//yield å³è¾¹çš„ä»»ä½•è¡¨è¾¾å¼éƒ½ä¼šè¢«æ±‚å€¼ï¼Œç»“æœä¼šè¢« yield ç»™è°ƒç”¨è€…ã€‚</span></code></pre><ul><li>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨actionå‡½æ•°ä¸­å†™fetch-requestå¯¹æ¥å£è¿›è¡Œè°ƒç”¨ï¼ŒåŒæ—¶å¯ä»¥åå‡ºåˆ°ç»„ä»¶ï¼Œyieldä¸ºå¼‚æ­¥apiæ—¶ä½¿ç”¨sagaæä¾›call()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è§¦å‘ä¸šåŠ¡ä»£ç çš„åœ°æ–¹ä½¿ç”¨thenå‡½æ•°æ¥æ¥å—apiçš„è¿”å›æ•°æ®ä¹Ÿå¯ä»¥åœ¨actionå‡½æ•°è¿™é‡Œè¿›è¡Œstateå¤„ç†ã€‚<br>è¿™é‡Œè¦è¯´æ˜çš„æ˜¯ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šåœ¨actionå‡½æ•°è¿™é‡Œåšä¸€å±‚æ•°æ®æ ¡éªŒï¼Œå¯¹æ¥å£è¿”å›æ•°æ®è¿›è¡Œä¸€ä¸ªåˆæ­¥çš„æ£€æµ‹ã€‚</li></ul><h5 id="1-æ¥å£æ ¡éªŒ"><a href="#1-æ¥å£æ ¡éªŒ" class="headerlink" title="1.æ¥å£æ ¡éªŒ"></a>1.æ¥å£æ ¡éªŒ</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> call <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Api <span class="token keyword">from</span> <span class="token string">'./path/to/api'</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">fetchApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>Api<span class="token punctuation">.</span>fetch<span class="token punctuation">,</span> <span class="token string">'/products'</span><span class="token punctuation">)</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>code<span class="token operator">===</span><span class="token number">200</span><span class="token operator">||</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> result<span class="token punctuation">.</span>data  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h5 id="2-ä½¿ç”¨tryâ€¦catchæ¥å¤„ç†é”™è¯¯ï¼Œå¹¶ç»Ÿä¸€æç¤ºå¤„ç†"><a href="#2-ä½¿ç”¨tryâ€¦catchæ¥å¤„ç†é”™è¯¯ï¼Œå¹¶ç»Ÿä¸€æç¤ºå¤„ç†" class="headerlink" title="2.ä½¿ç”¨tryâ€¦catchæ¥å¤„ç†é”™è¯¯ï¼Œå¹¶ç»Ÿä¸€æç¤ºå¤„ç†"></a>2.ä½¿ç”¨tryâ€¦catchæ¥å¤„ç†é”™è¯¯ï¼Œå¹¶ç»Ÿä¸€æç¤ºå¤„ç†</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//é”™è¯¯ç»Ÿä¸€å¤„ç†</span><span class="token keyword">import</span> Api <span class="token keyword">from</span> <span class="token string">'./path/to/api'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ...</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">fetchApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>Api<span class="token punctuation">.</span>fetch<span class="token punctuation">,</span> <span class="token string">'/products'</span><span class="token punctuation">)</span>    <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'resultSuccess'</span><span class="token punctuation">,</span> products <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'resultError'</span><span class="token punctuation">,</span> error <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h5 id="3-ä½¿ç”¨throwæ¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯"><a href="#3-ä½¿ç”¨throwæ¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯" class="headerlink" title="3.ä½¿ç”¨throwæ¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯"></a>3.ä½¿ç”¨throwæ¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span><span class="token keyword">import</span> Api <span class="token keyword">from</span> <span class="token string">'...'</span><span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token function">fetchProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// æœŸæœ›ä¸€ä¸ª call æŒ‡ä»¤</span>assert<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span>  iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>  <span class="token function">call</span><span class="token punctuation">(</span>Api<span class="token punctuation">.</span>fetch<span class="token punctuation">,</span> <span class="token string">'/products'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token string">"fetchProducts should yield an Effect call(Api.fetch, './products')"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„ error å¯¹è±¡</span><span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æœŸæœ›ä¸€ä¸ª dispatch æŒ‡ä»¤</span>assert<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span>  iterator<span class="token punctuation">.</span><span class="token keyword">throw</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>  <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'resultError'</span><span class="token punctuation">,</span> error <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token string">"fetchProducts should yield an Effect put({ type: 'PRODUCTS_REQUEST_FAILED', error })"</span><span class="token punctuation">)</span></code></pre><h5 id="redux-dvaï¼š"><a href="#redux-dvaï¼š" class="headerlink" title="redux-dvaï¼š"></a>redux-dvaï¼š</h5><p>å­¦è¿‡Reactçš„éƒ½çŸ¥é“ä»–çš„æŠ€æœ¯æ ˆï¼Œå„ç§åº“æ’ä»¶å¤šçš„å¦‚å¤©ï¼Œæ‰€ä»¥æ¯å½“ä½ ä½¿ç”¨Reactçš„æ—¶å€™éƒ½éœ€è¦å¼•å…¥å¾ˆå¤šçš„æ¨¡å—ï¼Œé…ç½®å¥½å¤šæ•°æ®ï¼Œé‚£ä¹ˆdvaå°±æ˜¯æŠŠè¿™äº›ç”¨åˆ°çš„æ¨¡å—é›†æˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€å®šçš„æ¶æ„è§„èŒƒã€‚</p><p>1.dva æ˜¯ frameworkï¼Œä¸æ˜¯ libraryåº“ï¼›<br>2.dvaå°è£…äº†reduxï¼Œå‡å°‘å¾ˆå¤šé‡å¤ä»£ç æ¯”å¦‚action reducers ç­‰çš„é‡å¤ç¼–å†™ã€‚<br>3.dvaçš„æ ¸å¿ƒæ˜¯moduleæ¨¡å—ï¼Œé€šè¿‡moduleæˆ‘ä»¬å¯ä»¥å®ç°ç»“æ„ä¸Šçš„å¤šä¸ªstoreæ¥å‚¨å­˜æ•°æ®ï¼Œsagaæ˜¯æ‰€æœ‰çš„éƒ½å†™åœ¨ä¸€ä¸ªé‡Œé¢ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹ä¸åŒçš„ä¸šåŠ¡ç»„ä»¶æˆ–è€…æ¨¡å—æ¥åˆ†åˆ«ç®¡ç†å’Œå¼•ç”¨ã€‚<br>4.call, putå…¶å®æ˜¯sagaçš„å†™æ³•ï¼Œdvaé›†æˆäº†é›†æˆäº†reduxã€redux-sagaã€react-router-reduxã€react-routerã€‚å°†initStateã€sagaã€reduceré›†æˆåˆ°ä¸€ä¸ªmodelé‡Œé¢ç»Ÿä¸€ç®¡ç†ï¼Œå¯¹æŸä¸ªæ¨¡å—è¿›è¡Œå•ç‹¬çš„ç»´æŠ¤ï¼Œå‡å°‘æˆæœ¬é‡ã€‚</p><h5 id="å¼•å…¥å›¾æ–‡è¯´æ˜"><a href="#å¼•å…¥å›¾æ–‡è¯´æ˜" class="headerlink" title="å¼•å…¥å›¾æ–‡è¯´æ˜"></a>å¼•å…¥å›¾æ–‡è¯´æ˜</h5><!-- ![dva.png](https://i.loli.net/2020/06/29/OkzifJLM7wGR1TZ.png) --><p><img src="https://i.loli.net/2020/06/29/9Zkes2tvRAHMxLf.png" alt="dva.png"></p><p>ç¼ºç‚¹ï¼š<br>1.å¦‚ç°åœ¨react-routerå·²ç»åˆ°äº†4.xäº†ï¼Œä½†æ˜¯dvaå†…ç½®çš„ç‰ˆæœ¬å´è¿˜æ˜¯2.xï¼Œå¦‚æœreact-routerå‡çº§å°±è¦åœ¨ä½¿ç”¨ dva å’Œä½¿ç”¨æ–°ç‰ˆæœ¬çš„ç»„ä»¶ä¸Šåšå‡ºé€‰æ‹©äº†ã€‚<br>2.å¯æ‰©å±•æ€§ä¸å¼ºï¼ŒåæœŸå‡çº§ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚</p><h5 id="å¼•å…¥è¿æ¥å™¨ï¼š"><a href="#å¼•å…¥è¿æ¥å™¨ï¼š" class="headerlink" title="å¼•å…¥è¿æ¥å™¨ï¼š"></a>å¼•å…¥è¿æ¥å™¨ï¼š</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> queryString <span class="token keyword">from</span> <span class="token string">'query-string'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> todoService <span class="token keyword">from</span> <span class="token string">'../services/todo'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  namespace<span class="token punctuation">:</span> <span class="token string">'storeA'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//modelçš„å‘½åç©ºé—´keyï¼Œå…¨å±€å”¯ä¸€ï¼Œç”¨æ¥è¯†åˆ«è°ƒç”¨æˆ–å¼•å…¥çš„store</span>   state<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//çŠ¶æ€çš„åˆå§‹å€¼</span>     list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     message<span class="token punctuation">:</span><span class="token string">"ffff"</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//ç±»ä¼¼äºreduxçš„ reducer æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ç”¨æ¥å¤„ç†åŒæ­¥å‡½æ•°ã€‚</span>  reducers<span class="token punctuation">:</span> <span class="token punctuation">{</span>       <span class="token function">setList</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> list <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">setState</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>           <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> message <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//å¤„ç†è¯·æ±‚ç­‰å¼‚æ­¥å‡½æ•°</span>  effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token operator">*</span><span class="token function">addForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload<span class="token punctuation">:</span> value <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put<span class="token punctuation">,</span> select <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>todoService<span class="token punctuation">.</span>query<span class="token punctuation">,</span> value<span class="token punctuation">)</span>      <span class="token keyword">let</span> tempList <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">select</span><span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">></span> state<span class="token punctuation">.</span>todo<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'setList'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>     <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token operator">*</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload<span class="token punctuation">:</span> message <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put<span class="token punctuation">,</span> select <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'setState'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'namespaceB/setState'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//å¯æ§åˆ¶å…¶ä»–modelä¸­çš„state</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//ç”¨äºè®¢é˜…æŸäº›æ•°æ® å¦‚ï¼šç›‘å¬è·¯ç”±çš„å˜åŒ–ç­‰</span>  subscriptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> history <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// ç›‘å¬è·¯ç”±çš„å˜åŒ–ï¼Œè¯·æ±‚é¡µé¢æ•°æ®</span>      <span class="token keyword">return</span> history<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> pathname<span class="token punctuation">,</span> search <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> query <span class="token operator">=</span> queryString<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">'addForm'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//è·¯ç”±åç§°</span>          <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'setList'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>list<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//æ›´æ–°action</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre><ul><li>namespace ä»£è¡¨å‘½åç©ºé—´ï¼Œå…¨å±€å”¯ä¸€</li><li>state ä»£è¡¨åˆå§‹åŒ–æ•°æ®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡propsè°ƒç”¨</li><li>reducer å°±è·Ÿæˆ‘ä»¬å¹³æ—¶ç”¨çš„reducerä¸€æ ·ï¼Œactionäº‹ä»¶è§¦å‘çš„å‡½æ•°</li><li>effects å¤„ç†Apiç­‰å¼‚æ­¥é—®é¢˜</li><li>subscriptions è®¢é˜…ï¼Œå¸¸ç”¨æ¥ç›‘å¬</li></ul><h5 id="è·¨modelçš„é€šä¿¡ï¼š"><a href="#è·¨modelçš„é€šä¿¡ï¼š" class="headerlink" title="è·¨modelçš„é€šä¿¡ï¼š"></a>è·¨modelçš„é€šä¿¡ï¼š</h5><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'storeA/addLog'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ...</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>dispatchä¸­çš„type/å‰é¢çš„æ˜¯modelçš„keyï¼ˆnamespaceï¼‰åé¢çš„æ‰æ˜¯actionã€‚<br>ä¹Ÿå¯ä»¥åœ¨effectsä¸­é€šè¿‡key/actionçš„æ–¹å¼æ¥é€šçŸ¥å…¶ä»–modelæ›´æ–°stateçŠ¶æ€ï¼Œè¾¾åˆ°è·¨modelé€šè¡Œã€‚</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token operator">*</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload<span class="token punctuation">:</span> message <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put<span class="token punctuation">,</span> select <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'setState'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'namespaceB/setState'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//å¯æ§åˆ¶å…¶ä»–modelä¸­çš„state</span>  <span class="token punctuation">}</span></code></pre><h5 id="å¤šä»»åŠ¡çš„æƒ…å†µï¼š"><a href="#å¤šä»»åŠ¡çš„æƒ…å†µï¼š" class="headerlink" title="å¤šä»»åŠ¡çš„æƒ…å†µï¼š"></a>å¤šä»»åŠ¡çš„æƒ…å†µï¼š</h5><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">const</span> <span class="token punctuation">[</span>result1<span class="token punctuation">,</span> result2<span class="token punctuation">]</span>  <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token function">call</span><span class="token punctuation">(</span>service1<span class="token punctuation">,</span> param1<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">call</span><span class="token punctuation">(</span>service2<span class="token punctuation">,</span> param2<span class="token punctuation">)</span>  <span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><h5 id="modelæ•°æ®å…±äº«ï¼ˆå…±äº«stateæ•°æ®ï¼‰"><a href="#modelæ•°æ®å…±äº«ï¼ˆå…±äº«stateæ•°æ®ï¼‰" class="headerlink" title="modelæ•°æ®å…±äº«ï¼ˆå…±äº«stateæ•°æ®ï¼‰"></a>modelæ•°æ®å…±äº«ï¼ˆå…±äº«stateæ•°æ®ï¼‰</h5><p>åœ¨Bçš„modelä¸­çš„effectsä¸­è·å–Açš„stateï¼Œå…¶ä¸­aä¸ºAçš„namespaceï¼Œresponse ä¸ºAçš„stateï¼Œå¦‚</p><pre class=" language-javascript"><code class="language-javascript">effects<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token operator">*</span><span class="token function">fetchResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> callback <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put<span class="token punctuation">,</span> select <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">select</span><span class="token punctuation">(</span>_ <span class="token operator">=</span><span class="token operator">></span> _<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// responseä¸ºA modelä¸­çš„stateå€¼</span>    <span class="token comment" spellcheck="true">// Â·Â·Â·å…¶ä»–æ“ä½œ</span>    <span class="token comment" spellcheck="true">// yield put({ type: "saveEvents", payload:{response} });</span>    <span class="token comment" spellcheck="true">// if (callback) callback(response);</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ä¹Ÿå¯ä»¥åœ¨Bé¡µé¢ä¸­connect A modelå–å€¼ã€‚</p><h4 id="é™„ï¼šåˆå§‹åŒ–"><a href="#é™„ï¼šåˆå§‹åŒ–" class="headerlink" title="é™„ï¼šåˆå§‹åŒ–:"></a>é™„ï¼šåˆå§‹åŒ–:</h4><pre class=" language-javascript"><code class="language-javascript">  <span class="token comment" spellcheck="true">// 1. Initialize</span>  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  history<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// æŒ‡å®šç»™è·¯ç”±ç”¨çš„ historyï¼Œé»˜è®¤æ˜¯ hashHistory</span>  initialState<span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// æŒ‡å®šåˆå§‹æ•°æ®ï¼Œä¼˜å…ˆçº§é«˜äº model ä¸­çš„ state</span>  onError<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// effect æ‰§è¡Œé”™è¯¯æˆ– subscription é€šè¿‡ done ä¸»åŠ¨æŠ›é”™æ—¶è§¦å‘ï¼Œå¯ç”¨äºç®¡ç†å…¨å±€å‡ºé”™çŠ¶æ€ã€‚</span>  onAction<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// åœ¨ action è¢« dispatch æ—¶è§¦å‘</span>  onStateChange<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// state æ”¹å˜æ—¶è§¦å‘ï¼Œå¯ç”¨äºåŒæ­¥ state åˆ° localStorageï¼ŒæœåŠ¡å™¨ç«¯ç­‰</span>  onReducer<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// å°è£… reducer æ‰§è¡Œã€‚æ¯”å¦‚å€ŸåŠ© redux-undo å®ç° redo/undo</span>  onEffect<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// å°è£… effect</span>  onHmr<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// çƒ­æ›¿æ¢ç›¸å…³</span>  extraReducers<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// æŒ‡å®šé¢å¤–çš„ reducerï¼Œæ¯”å¦‚ redux-form éœ€è¦æŒ‡å®šé¢å¤–çš„ form reducer</span>  extraEnhancers<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// æŒ‡å®šé¢å¤–çš„ StoreEnhancer ï¼Œæ¯”å¦‚ç»“åˆ redux-persist çš„ä½¿ç”¨</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 2. Plugins</span>  <span class="token comment" spellcheck="true">// app.use({});//ä¹Ÿå¯ä»¥å¯é…ç½®hooksçš„ç›¸å…³</span>  <span class="token comment" spellcheck="true">// 3. Model</span>  <span class="token comment" spellcheck="true">// app.model(require('./models/example').default);</span>  <span class="token comment" spellcheck="true">// 4. Router</span>  app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 5. Start</span>  app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æŒ‚è½½ç»„ä»¶æ—¶ï¼Œdvaä¸­çš„stateé€šè¿‡connectå°†modelã€çŠ¶æ€æ•°æ®ä¸ç»„ä»¶ç›¸è¿ã€‚é€šè¿‡dispatch è°ƒç”¨key/actionæ¥è§¦å‘modelã€‚è¿™æ ·å°±å½¢æˆä¸€ä¸ªå®Œæ•´çš„æ•°æ®æµå‘ã€‚</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>dva å¸®ä½ è‡ªåŠ¨åŒ–äº†Redux æ¶æ„ä¸€äº›ç¹ççš„è®¾ç½®ï¼Œæ¯”å¦‚ä¸Šé¢æ‰€è¯´çš„redux store çš„åˆ›å»ºï¼Œä¸­é—´ä»¶çš„é…ç½®ï¼Œè·¯ç”±çš„åˆå§‹åŒ–ç­‰éƒ½è‡ªåŠ¨ç”Ÿæˆå¥½äº†ã€‚</p><p>dva é™ä½äº†ç»„ä»¶ä¹‹é—´æ•°æ®ä¹‹é—´çš„çš„è€¦åˆåº¦ï¼Œå¯ä»¥å¯¹å•ä¸ªæ¨¡å—è¿›è¡Œå°è£…å•ç‹¬çš„modelé€šè¿‡connectæ¥è¿æ¥ï¼Œæ¨¡å—æ•°æ®å•ç‹¬è®¾ç½®æ¸…æ™°æ˜“ç»´æŠ¤ã€‚</p><p>dvaç¼–å†™æ–¹ä¾¿ï¼ŒåŸºæœ¬ä¸éœ€è¦è¿‡å¤šçš„é…ç½®ï¼Œæé«˜å›¢é˜Ÿå¤šäººå¼€å‘çš„æ•ˆç‡ã€‚</p><p>dvaé…åˆumiè¾¾åˆ°äº†å¼€ç®±å³ç”¨çš„çŠ¶æ€</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> å‚¨å­˜ </tag>
            
            <tag> æ•°æ®éš”ç¦» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reacté¡ºæ»‘æ‹–åŠ¨å®ç°</title>
      <link href="2020/05/15/react-smooth-dnd/"/>
      <url>2020/05/15/react-smooth-dnd/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h4><p>1.react-smooth-dndæ˜¯ä¸€ä¸ªå¿«é€Ÿã€è½»é‡çº§çš„æ‹–æ”¾ã€å¯æ’åºçš„åº“ï¼Œç”¨äºå¯¹è¦†ç›–è®¸å¤šè®¾è®¡ä¸å¼€å‘ï¼ˆd&amp;dï¼‰åœºæ™¯çš„è®¸å¤šé…ç½®é€‰é¡¹è¿›è¡Œå“åº”ã€‚å®ƒä½¿ç”¨cssè½¬æ¢æ¥åˆ¶ä½œåŠ¨ç”»ï¼Œå› æ­¤åªè¦æœ‰å¯èƒ½ï¼Œå®ƒçš„ç¡¬ä»¶å°±ä¼šåŠ é€Ÿï¼Œæé«˜äº†æ‹–åŠ¨çš„åŠ¨ç”»æ•ˆæœã€‚</p><p>2.æ­¤åº“æ˜¯åœ¨åŸºäºsmooth-dndåº“å¼€å‘çš„Reactæ‹–åŠ¨æ•ˆæœç»„ä»¶ã€‚</p><p>3.npm å®‰è£… <code>npm install react-smooth-dnd</code>ï¼›</p><p>4.é‰´äºå¯ä»¥æŸ¥åˆ°çš„æ–‡æ¡£éƒ½æ˜¯è‹±æ–‡çš„ï¼Œè€Œä¸”demoéƒ½æ®‹ç¼ºä¸å…¨ï¼Œæœ¬æ–‡è¿›è¡Œäº†ä¸­æ–‡å½’çº³å’Œè¯¦ç»†æ¡ˆä¾‹ä»‹ç»ï¼›</p><p>5.æœ¬æ–‡ä¸»è¦ä»‹ç»åŸºäºreactå¼•å…¥çš„æ–¹å¼æ¥å†™çš„demoï¼›</p><p><img src="https://i.loli.net/2020/05/18/VpDJzQ4938yr5TO.jpg" alt="åˆ—è¡¨æ‹–åŠ¨æ’åº.jpg"></p><p>6.ç›®å‰è¯¥åº“è¿˜åœ¨ç»´æŠ¤ä¸­ï¼Œæœ‰1.4kæ˜Ÿï¼Œä½¿ç”¨è¿˜ä¸é”™ï¼Œç›®å‰æ²¡å‘ç°bugï¼Œå…¼å®¹Chromeæµè§ˆå™¨<br><img src="https://i.loli.net/2020/05/18/xhY1ElczrJBuidj.jpg" alt="gitHubInfo.jpg"></p><h4 id="äºŒã€ä¸€ä¸ªç®€å•çš„demo"><a href="#äºŒã€ä¸€ä¸ªç®€å•çš„demo" class="headerlink" title="äºŒã€ä¸€ä¸ªç®€å•çš„demo"></a>äºŒã€ä¸€ä¸ªç®€å•çš„demo</h4><p>æœ¬æ¡ˆä¾‹æ˜¯ä¸€ä¸ªç®€å•çš„å¼•å…¥å’Œæ ·å¼</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Container<span class="token punctuation">,</span> Draggable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-smooth-dnd'</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">SimpleDemo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>Container onDrop<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onDrop<span class="token punctuation">}</span><span class="token operator">></span>            <span class="token operator">&lt;</span>Draggable key<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">></span>                <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>æˆ‘æ˜¯ä¸€ä¸ªå¯æ‹–åŠ¨çš„å…ƒç´ ï¼Œæ‹–æ‹–è¯•è¯•çœ‹<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>Draggable<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ä¸‹é¢æ–‡ç« å°±ä»‹ç»è¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•ã€‚ã€‚ã€‚</p><h3 id="ä¸‰ã€Domå¼•å…¥"><a href="#ä¸‰ã€Domå¼•å…¥" class="headerlink" title="ä¸‰ã€Domå¼•å…¥"></a>ä¸‰ã€Domå¼•å…¥</h3><p>å¼•å…¥æ ‡ç­¾è§£é‡Šï¼š</p><ul><li><p>Container æŒ‡çš„æ˜¯æ‹–åŠ¨çš„å®¹å™¨ï¼Œå³å¯æ‹–åŠ¨çš„æœ‰æ•ˆä½¿ç”¨èŒƒå›´,å®ƒçš„å†…éƒ¨å¯æœ‰æœ‰å¤šä¸ª<code>&lt;Draggable&gt;</code>æ ‡ç­¾ã€‚</p></li><li><p>Draggable æŒ‡çš„æ˜¯å¯æ‹–åŠ¨å…ƒç´ ï¼Œåœ¨é¡µé¢ä¸­æŠŠå¯æ‹–åŠ¨çš„å†…å®¹ç”¨<code>&lt;Draggable&gt;</code>æ ‡ç­¾åŒ…è£¹åï¼Œè¯¥æ ‡ç­¾å°±å¯ä»¥è„±ç¦»æ–‡æ¡£è¿›è¡Œæ‹–åŠ¨ã€‚</p></li></ul><ul><li>ç”¨mapå®ç°çš„æ‹–åŠ¨å†…éƒ¨å…ƒç´ <pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Container onDrop<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onDrop<span class="token punctuation">}</span><span class="token operator">></span>  <span class="token punctuation">{</span>itemList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>Draggable key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>      <span class="token operator">...</span><span class="token comment" spellcheck="true">//ä½ çš„æ‹–åŠ¨ä»£ç å—</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>Draggable<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span></code></pre></li></ul><h3 id="å››ã€Container-å¸¸ç”¨API"><a href="#å››ã€Container-å¸¸ç”¨API" class="headerlink" title="å››ã€Container å¸¸ç”¨API"></a>å››ã€Container å¸¸ç”¨API</h3><h4 id="1-groupName"><a href="#1-groupName" class="headerlink" title="1.groupName"></a>1.groupName</h4><p>è§£é‡Šï¼šå®šä¹‰å½“å‰æ‹–åŠ¨å®¹å™¨çš„åç§°ï¼ˆå”¯ä¸€æ€§ï¼‰ï¼Œå¦‚æœä»£ç ä¸­æœ‰å¤šä¸ª<code>groupName=&quot;col&quot;</code> åˆ™è¡¨ç¤ºè¿™å‡ ä¸ªæ‹–åŠ¨åŒºåŸŸä¸­çš„å†…å®¹æ˜¯ç›¸äº’ä¹‹é—´å¯ä»¥æ‹–åŠ¨ã€‚æ¯”å¦‚æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªè·¨ç»„æ‹–åŠ¨ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Container groupName<span class="token operator">=</span><span class="token string">"col"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span></code></pre><h4 id="2-behaviourçš„ä½¿ç”¨"><a href="#2-behaviourçš„ä½¿ç”¨" class="headerlink" title="2.behaviourçš„ä½¿ç”¨"></a>2.behaviourçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼šå½“å‰å®¹å™¨ä¸­çš„å…ƒç´ æ‹–åŠ¨åï¼Œæœ¬å®¹å™¨ä¸­çš„å…ƒç´ çŠ¶æ€ã€‚æ ‡ç¤ºå½“å‰å®¹å™¨çŠ¶æ€ï¼›</p><p>å¯é€‰å€¼ï¼š<code>move</code>ï¼ˆé»˜è®¤ï¼Œç§»åŠ¨ï¼‰ã€<code>copy</code>ï¼ˆå¤åˆ¶ï¼‰ã€<code>drop-zone</code>ï¼ˆè·Œè½ï¼‰ã€<code>contain</code>ï¼ˆåŒ…å«ï¼‰</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//å®ç°å¤åˆ¶æœ¬å®¹å™¨ä¸­çš„å†…å®¹è€Œä¸æ˜¯moveæ‹–åŠ¨ç¦»å¼€</span><span class="token operator">&lt;</span>Container behaviour<span class="token operator">=</span><span class="token string">"copy"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span></code></pre><h4 id="3-lockAxisçš„ä½¿ç”¨"><a href="#3-lockAxisçš„ä½¿ç”¨" class="headerlink" title="3.lockAxisçš„ä½¿ç”¨"></a>3.lockAxisçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼šè®¾ç½®é™åˆ¶å½“å‰æ‹–åŠ¨çš„æ–¹å‘ã€‚</p><p>å¯é€‰å€¼ï¼š<code>x</code>ã€<code>y</code>ï¼Œè¡¨ç¤ºåªèƒ½xè½´æˆ–è€…yè½´æ–¹å‘æ‹–åŠ¨ï¼›</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//é™åˆ¶è¯¥æ‹–åŠ¨åªèƒ½yè½´æ–¹å‘è¿›è¡Œæ‹–åŠ¨</span><span class="token operator">&lt;</span>Container lockAxis<span class="token operator">=</span><span class="token string">"y"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span></code></pre><h4 id="4-dragClassçš„ä½¿ç”¨"><a href="#4-dragClassçš„ä½¿ç”¨" class="headerlink" title="4.dragClassçš„ä½¿ç”¨"></a>4.dragClassçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼šæ‹–åŠ¨å…ƒç´ è¢«æ‹–åŠ¨æ—¶å¯æ·»åŠ çš„æ ·å¼ï¼Œï¼ˆæ‹¿èµ·æ¥æ ·å¼ï¼‰ï¼›å¯ä»¥ä½¿ç”¨reactçš„Styleè¿›è¡Œå¼•å…¥css</p><p>å¯ä»¥è®¾ç½®å­—ä½“ï¼Œç¼©æ”¾ï¼Œæ—‹è½¬ç­‰<code>css</code>çš„æ ·å¼å®ç°æ‹–åŠ¨è¿‡ç¨‹ä¸­çš„æ ·å¼ï¼›</p><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token class">.card_ghost</span></span><span class="token punctuation">{</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode">#FFF</span><span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">1.5</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-ms-transform</span><span class="token punctuation">:</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">1.5</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">/* IE 9 */</span>    <span class="token property">-moz-transform</span><span class="token punctuation">:</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">1.5</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">/* Firefox */</span>    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">1.5</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Safari å’Œ Chrome */</span>    <span class="token property">-o-transform</span><span class="token punctuation">:</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">1.5</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">/* Opera */</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">15</span>px grey<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Container dragClass<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>card_ghost<span class="token punctuation">}</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span></code></pre><h4 id="5-dropClassçš„ä½¿ç”¨"><a href="#5-dropClassçš„ä½¿ç”¨" class="headerlink" title="5.dropClassçš„ä½¿ç”¨"></a>5.dropClassçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼šæ‹–åŠ¨é‡Šæ”¾æ—¶çš„æ ·å¼ï¼Œå†™æ³•å¦‚ä¸Šï¼›</p><h4 id="6-dropPlaceholderçš„ä½¿ç”¨"><a href="#6-dropPlaceholderçš„ä½¿ç”¨" class="headerlink" title="6.dropPlaceholderçš„ä½¿ç”¨"></a>6.dropPlaceholderçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼šæ‹–åŠ¨æ—¶çš„å ä½æ•ˆæœ</p><p>å½“æ‹–åŠ¨å…ƒç´ æ‹–èµ°æ—¶æˆ–è¿›å…¥å…¶ä»–ä½ç½®æ—¶ï¼Œç”¨äºå ä½å½“å‰é˜´å½±é…ç½®</p><p>å‚æ•°ï¼š<code>className</code>, <code>animationDuration</code>, <code>showOnTop</code>;</p><p>calssNmaeï¼š å ä½å…ƒç´ çš„å»¶æ—¶<br>animationDurationï¼š å»¶æ—¶<br>showOnTopï¼š ï¼ˆæš‚æ—¶è¿˜æœªçŸ¥ä½œç”¨ï¼‰</p><pre class=" language-css"><code class="language-css"><span class="token selector"><span class="token class">.cards_drop_preview</span></span><span class="token punctuation">{</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode">#DDDFE3</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Container     dropPlaceholder<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>        animationDuration<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//åŠ¨ç”»å»¶æ—¶</span>        showOnTop<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">//æš‚æ—¶è¿˜ä¸çŸ¥é“ä½œç”¨</span>        className<span class="token punctuation">:</span> style<span class="token punctuation">.</span>cards_drop_preview<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//å ä½å…ƒç´ æ ·å¼</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span></code></pre><h4 id="7-dragBeginDelayçš„ä½¿ç”¨"><a href="#7-dragBeginDelayçš„ä½¿ç”¨" class="headerlink" title="7.dragBeginDelayçš„ä½¿ç”¨"></a>7.dragBeginDelayçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼šå»¶æ—¶æ‹–åŠ¨ï¼Œæ—¶é—´å•ä½ä¸ºæ¯«ç§’ã€‚æŒ‰ä¸‹é¡¹ç›®åå»¶è¿Ÿå¼€å§‹æ‹–åŠ¨ã€‚åœ¨å»¶è¿Ÿè¶…è¿‡5pxä¹‹å‰ç§»åŠ¨å…‰æ ‡å°†å–æ¶ˆæ‹–åŠ¨ã€‚</p><p>é˜²æ­¢æœ‰è¯¯æ“ä½œçš„æƒ…å†µå‘ç”Ÿï¼›ä¹Ÿå¯ç”¨äºè¯¥itemä¸Šæ—¢æœ‰æ‹–åŠ¨åˆåˆå…¶ä»–äº‹ä»¶ï¼Œå»¶æ—¶å¯ä»¥åŒºåˆ†éœ€è¦è§¦å‘çš„æ˜¯é‚£ç§äº‹ä»¶ã€‚</p><h4 id="8-onDragStartã€onDragEndã€onDropReadyã€onDropçš„ä½¿ç”¨"><a href="#8-onDragStartã€onDragEndã€onDropReadyã€onDropçš„ä½¿ç”¨" class="headerlink" title="8.onDragStartã€onDragEndã€onDropReadyã€onDropçš„ä½¿ç”¨"></a>8.onDragStartã€onDragEndã€onDropReadyã€onDropçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼š<br>onDragStartï¼šæ‹–åŠ¨å¼€å§‹åå‡ºå‘è¯¥å‡½æ•°ï¼›<br>onDragEndï¼šæ‹–åŠ¨ç»“æŸï¼›<br>onDropReadyï¼šæ‹–åŠ¨readyï¼›<br>onDropï¼šæ‹–åŠ¨é‡Šæ”¾ï¼›</p><p>å‚æ•°ï¼š<br><code>isSource</code> : boolean (true/false) å¦‚æœæ˜¯ä»å…¶ä»–å®¹å™¨ä¸­æ‹–åŠ¨æ¥çš„åˆ™æ˜¯false<br><code>payload</code> : object ï¼ˆ { removedIndex, addedIndex, payload } ï¼‰<br>    - removedIndexç§»èµ°å…ƒç´ çš„ç´¢å¼•ï¼›<br>    - addedIndexæ·»åŠ å…ƒç´ çš„ç´¢å¼•ï¼›<br>    - payloadç§»åŠ¨çš„å…ƒç´ æ•°æ®ï¼Œé…åˆ<code>getChildPayload</code>å‡½æ•°ä½¿ç”¨ï¼›<br><code>willAcceptDrop</code> : boolean å¦‚æœæ‹–åŠ¨çš„é¡¹å¯ä»¥æ”¾å…¥å®¹å™¨ä¸­ï¼Œåˆ™ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseã€‚</p><p>å¯ä»¥è®¤ä¸ºæ˜¯è¾…åŠ©å‡½æ•°ï¼Œç”¨äºè·å–åŠ¨ä½œç»“æŸåçš„ä¸€äº›çŠ¶æ€äº‹ä»¶è·å–ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//æ‹–åŠ¨å¼€å§‹åå‡ºå‘</span>onDragStart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>isSource<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> willAcceptDrop<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> removedIndex<span class="token punctuation">,</span> addedIndex<span class="token punctuation">,</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> dragResult<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>removedIndex <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> addedIndex <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">;</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> itemToAdd <span class="token operator">=</span> payload<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>removedIndex <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      itemToAdd <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>removedIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>addedIndex <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      result<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>addedIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> itemToAdd<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dataList<span class="token punctuation">:</span> result <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>Container onDragStart<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onDragStart<span class="token punctuation">}</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span></code></pre><h4 id="9-getChildPayloadçš„ä½¿ç”¨"><a href="#9-getChildPayloadçš„ä½¿ç”¨" class="headerlink" title="9.getChildPayloadçš„ä½¿ç”¨"></a>9.getChildPayloadçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼šè®¾ç½®ä¸Šè¿°çš„payloadçš„å€¼</p><p>getChildPayload å‡½æ•°returnä¸€ä¸ªè‡ªå®šä¹‰çš„å€¼ï¼›</p><p>ç”¨æ¥è®°å½•å½“å‰æ‹–åŠ¨å…ƒç´ çš„ä¿¡æ¯ï¼Œå‚æ•°æ˜¯indexå³Containerä¸­dataListçš„ç´¢å¼•ï¼Œå½“é‡Šæ”¾ï¼ˆonDropï¼‰å‡½æ•°è§¦å‘æ˜¯ï¼ŒpayLoadä¼šè‡ªåŠ¨å¸¦å…¥è¯¥å‚æ•°ï¼Œç”¨äºåšæ•°æ®å¤„ç†ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//æ‹–åŠ¨å¼€å§‹åå‡ºå‘</span>getChildPayload <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å½“å‰æ‹–åŠ¨çš„ç´¢å¼•</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>        <span class="token operator">...</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>Container getChildPayload<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>getChildPayload<span class="token punctuation">}</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>Draggable<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span></code></pre><h4 id="10-onDragEnterã€onDragLeaveçš„ä½¿ç”¨"><a href="#10-onDragEnterã€onDragLeaveçš„ä½¿ç”¨" class="headerlink" title="10.onDragEnterã€onDragLeaveçš„ä½¿ç”¨"></a>10.onDragEnterã€onDragLeaveçš„ä½¿ç”¨</h4><p>è§£é‡Šï¼š ç›‘æ§æ‹–åŠ¨è¿›å…¥æˆ–è€…ç¦»å¼€å“åº”åŒºæ—¶çš„çŠ¶æ€</p><p>å‡½æ•°å‚æ•°æ•°æ®å’Œå’Œ7ä¸€æ ·ï¼ŒåŒä¸ŠonDragStartï¼›</p><p>è¯¥åŠŸèƒ½å¯ä»¥åœ¨æ‹–åŠ¨çš„ä¸­é—´è§¦å‘äº‹ä»¶ï¼Œè¿›è¡Œä¸€äº›ä¸šåŠ¡é€»è¾‘å¤„ç†</p><h3 id="äº”ã€Draggable-API"><a href="#äº”ã€Draggable-API" class="headerlink" title="äº”ã€Draggable API"></a>äº”ã€Draggable API</h3><p>Draggableå¯ä»¥ä½¿ç”¨renderè¿›è¡Œæ¸²æŸ“ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒDraggableå¯¹ç»„ä»¶æ ¹ä½¿ç”¨divå…ƒç´ ã€‚<br>å¦‚æœè®¾ç½®äº†renderå‡½æ•°ï¼Œåˆ™Draggableçš„å­å±æ€§å°†è¢«å¿½ç•¥ï¼Œè€Œrenderçš„è¿”å›å€¼å°†ç”¨äºrender Draggableã€‚</p><p>return æ˜¯ä¸€ä¸ªReactçš„domå…ƒç´ é›†ï¼ˆReact Elementï¼‰ï¼›</p><p>demo</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>Draggable render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>li<span class="token operator">></span>      <span class="token operator">...</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span></code></pre><h3 id="å…­ã€å…¸å‹Demo"><a href="#å…­ã€å…¸å‹Demo" class="headerlink" title="å…­ã€å…¸å‹Demo"></a>å…­ã€å…¸å‹Demo</h3><p>æˆ‘ä»¬æœ€é•¿ä½¿ç”¨çš„å°±æ˜¯<code>dragClass</code>ã€<code>getChildPayload</code>ã€<code>onDrop</code>è¿™äº›å‡½æ•°ï¼›</p><p>ä¸‹é¢æ¥ä¸ªæ‹–åŠ¨æ’åºçš„demoå®ç°æ‹–åŠ¨æ’åº</p><p>æ‹–åŠ¨æ’åºæœ€é‡è¦çš„æ—¶é¡ºåºçš„ç´¢å¼•å€¼ï¼Œå¦‚æœå…ˆåˆ é™¤äº†å°±ä¼šå¯¼è‡´ç´¢å¼•å¯¹åº”ä¸ä¸Šäº†ï¼Œè¿™ç‚¹è¦ç‰¹åˆ«æ³¨æ„</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Container<span class="token punctuation">,</span> Draggable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-smooth-dnd'</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">SimpleDemo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>    <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>            dataList<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment" spellcheck="true">//æ’åºæ•°ç»„</span>                <span class="token punctuation">{</span>                    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                    name<span class="token punctuation">:</span> <span class="token string">'ç¬¬1ä¸ª'</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                    name<span class="token punctuation">:</span> <span class="token string">'ç¬¬2ä¸ª'</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                    name<span class="token punctuation">:</span> <span class="token string">'ç¬¬3ä¸ª'</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                    name<span class="token punctuation">:</span> <span class="token string">'ç¬¬4ä¸ª'</span>                <span class="token punctuation">}</span>            <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//è®¾ç½®æ‹–åŠ¨å†…å®¹</span>    getChildPayload <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>        <span class="token keyword">const</span> <span class="token punctuation">{</span> dataList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>            item<span class="token punctuation">:</span>dataList<span class="token punctuation">[</span>index<span class="token punctuation">]</span>            index<span class="token punctuation">,</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//æ‹–åŠ¨é‡Šæ”¾æ—¶å‡ºå‘é‡æ–°æ’åºäº‹ä»¶</span>    onDrop <span class="token operator">=</span> <span class="token punctuation">(</span>dragResult<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>        <span class="token keyword">const</span> <span class="token punctuation">{</span> removedIndex<span class="token punctuation">,</span> addedIndex<span class="token punctuation">,</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> dragResult<span class="token punctuation">;</span>        <span class="token keyword">const</span> <span class="token punctuation">{</span> dataList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>        <span class="token keyword">let</span> resutl <span class="token operator">=</span> dataList<span class="token punctuation">;</span>        <span class="token keyword">let</span> itemToAdd <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>removedIndex <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            itemToAdd <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>removedIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>addedIndex <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>addedIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> itemToAdd<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>dataList<span class="token punctuation">:</span> result<span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> <span class="token punctuation">{</span> dataList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span>Container                 onDrop<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onDrop<span class="token punctuation">}</span>                getChildPayload<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>getChildPayload<span class="token punctuation">}</span>            <span class="token operator">></span><span class="token punctuation">{</span>                dataList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>k<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Draggable key<span class="token operator">=</span><span class="token punctuation">{</span>k<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>                        <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>k<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>Draggable<span class="token operator">></span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Clock <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ›´å¤šè¯¦ç»†ä½¿ç”¨è¯·å‚è€ƒå¦‚ä¸‹gitHubåœ°å€<br>github demoåœ°å€ï¼š<a href="https://kutlugsahin.github.io/smooth-dnd-demo/">https://kutlugsahin.github.io/smooth-dnd-demo/</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> æ‹–åŠ¨ </tag>
            
            <tag> drag </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºå›è¯„è®º@åŠŸèƒ½</title>
      <link href="2020/04/26/atPerson/"/>
      <url>2020/04/26/atPerson/</url>
      
        <content type="html"><![CDATA[<h1 id="é¡µé¢-åŠŸèƒ½å®ç°"><a href="#é¡µé¢-åŠŸèƒ½å®ç°" class="headerlink" title="é¡µé¢@åŠŸèƒ½å®ç°"></a>é¡µé¢@åŠŸèƒ½å®ç°</h1><p>æœ¬æ–‡demoï¼š <a href="https://github.com/duanweiqiang/atPerson" title="gitHub">gitHubåœ°å€</a></p><p>éœ€è¦ç”¨åˆ°çš„çŸ¥è¯†ï¼š</p><h3 id="1-å°†divè®¾ç½®æˆå¯è¾“å…¥çŠ¶æ€"><a href="#1-å°†divè®¾ç½®æˆå¯è¾“å…¥çŠ¶æ€" class="headerlink" title="1.å°†divè®¾ç½®æˆå¯è¾“å…¥çŠ¶æ€"></a>1.å°†divè®¾ç½®æˆå¯è¾“å…¥çŠ¶æ€</h3><ul><li>contentEditable å±æ€§ç”¨äºè®¾ç½®æˆ–è¿”å›å…ƒç´ çš„å†…å®¹æ˜¯å¦å¯ç¼–è¾‘ã€‚</li><li>è¿™æ ·å°±å¯ä»¥åœ¨divä¸­ä½¿ç”¨æ ‡ç­¾æ¥è¡¨ç¤º@ä¸­çš„äººï¼ˆåªæ˜¯ä¸ºäº†å¯ä»¥åœ¨è¾“å…¥æ¡†ä¸­ä½¿ç”¨æ ‡ç­¾ï¼‰</li></ul><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">contentEditable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textArea<span class="token punctuation">"</span></span>    <span class="token attr-name">onInput</span><span class="token attr-value"><span class="token punctuation">=</span>{this.onChangeAtPerson}</span>     <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span>{style.testArea}</span>    <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>è¯·è¾“å…¥è¯„è®ºï¼Œå¯ä»¥@å…¶ä»–äºº<span class="token punctuation">"</span></span>    <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h3 id="2-åˆ›å»ºrange-å¯¹è±¡"><a href="#2-åˆ›å»ºrange-å¯¹è±¡" class="headerlink" title="2.åˆ›å»ºrange å¯¹è±¡"></a>2.åˆ›å»ºrange å¯¹è±¡</h3><ul><li>ç”¨æ¥æ§åˆ¶å…‰æ ‡æ˜¯å¦å¯ä»¥è¿›å…¥@çš„dom</li></ul><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">const</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="3-æ“ä½œrangeå¯¹è±¡"><a href="#3-æ“ä½œrangeå¯¹è±¡" class="headerlink" title="3.æ“ä½œrangeå¯¹è±¡"></a>3.æ“ä½œrangeå¯¹è±¡</h3><ul><li>ç”¨æ¥æ§åˆ¶å…‰æ ‡æ˜¯å¦å¯ä»¥è¿›å…¥@çš„dom</li></ul><p><strong>é€‰æ‹©èŠ‚ç‚¹</strong></p><p><code>selectNode()</code> :é€‰æ‹©æ•´ä¸ªèŠ‚ç‚¹ï¼ŒåŒ…æ‹¬å­èŠ‚ç‚¹</p><p><code>selectNodeContents()</code>  é€‰æ‹©èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</p><ul><li>example:<pre class=" language-html"><code class="language-html">  <span class="token comment" spellcheck="true">&lt;!-- html --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>p1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>       world!  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><pre class=" language-javascript"><code class="language-javascript">  <span class="token keyword">var</span> range1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      range2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      p1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"p1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  range1<span class="token punctuation">.</span><span class="token function">selectNode</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//&lt;p id="p1">&lt;b>Hello&lt;/b> world!&lt;/p></span>  range2<span class="token punctuation">.</span><span class="token function">selectNodeContents</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//&lt;b>Hello&lt;/b> world!</span></code></pre></li></ul><p><code>setStart()</code>ã€<code>setEnd()</code>ï¼šè¿™é‡Œé€‰æ‹©èŠ‚ç‚¹å’Œé¼ æ ‡é€‰ä¸­ä¸€æ ·ï¼Œè¿™ä¸ªæ˜¯è‡ªåŠ¨é€‰ä¸­</p><blockquote><p>æ–¹æ³•éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªå‚ç…§èŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹åç§»é‡</p></blockquote><ul><li>example<pre class=" language-html"><code class="language-html">  <span class="token comment" spellcheck="true">&lt;!-- html --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>p1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hello world!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span> </code></pre><pre class=" language-javascript"><code class="language-javascript">  <span class="token comment" spellcheck="true">//js</span>  range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  p1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"p1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  range<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//é€‰ä¸­çš„å°†ä¼šæ˜¯ llo woï¼ˆæ³¨æ„ï¼ä»¥0ä¸ºåŸºæ•°ï¼Œç©ºæ ¼ä¹Ÿç®—ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ï¼Œå 1ä¸ªåç§»é‡ï¼‰</span></code></pre></li></ul><p><strong>æ“ä½œèŠ‚ç‚¹</strong></p><p><code>deleteContents()</code>: è¿™ä¸ªæ–¹æ³•èƒ½å¤Ÿä»æ–‡æ¡£ä¸­åˆ é™¤èŒƒå›´ç¼©åŒ…å«çš„å†…å®¹</p><p><code>extractContents()</code>: ä¼šåˆ é™¤å¹¶è¿”å›æ–‡æ¡£ç‰‡æ®µ</p><p><code>CloneContents()</code>: åˆ›å»ºèŒƒå›´å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œä¸ä¼šå½±å“åŸæ¥çš„èŠ‚ç‚¹</p><blockquote><p>å¤åˆ¶ DOM èŒƒå›´  ï¼š å¯ä»¥ä½¿ç”¨ cloneRange()æ–¹æ³•å¤åˆ¶èŒƒå›´ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºè°ƒç”¨å®ƒçš„èŒƒå›´çš„ä¸€ä¸ªå‰¯æœ¬ã€‚<br><code>var newRange = range.cloneRange();</code></p></blockquote><p><code>insertNode()</code>: å‘èŒƒå›´é€‰åŒºçš„å¼€å§‹å¤„æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹</p><p><code>surroundContents()</code>: ç¯ç»•èŒƒå›´æ’å…¥å†…å®¹ </p><p>åœ¨ä½¿ç”¨å®ŒèŒƒå›´ä¹‹åï¼Œæœ€å¥½æ˜¯è°ƒç”¨ <code>detach()</code> æ–¹æ³•ï¼Œä»¥ä¾¿ä»åˆ›å»ºèŒƒå›´çš„æ–‡æ¡£ä¸­åˆ†ç¦»å‡ºè¯¥èŒƒå›´ã€‚è°ƒç”¨<br><code>detach()</code>ä¹‹åï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°è§£é™¤å¯¹èŒƒå›´çš„å¼•ç”¨ï¼Œä»è€Œè®©åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶å…¶å†…å­˜äº†ã€‚æ¥çœ‹ä¸‹é¢çš„<br>ä¾‹å­</p><p><code>range.detach();</code> //ä»æ–‡æ¡£ä¸­åˆ†ç¦»<br><code>range = null;</code> //è§£é™¤å¼•ç”¨<br>æ¨èåœ¨ä½¿ç”¨èŒƒå›´çš„æœ€åå†æ‰§è¡Œè¿™ä¸¤ä¸ªæ­¥éª¤ã€‚ä¸€æ—¦åˆ†ç¦»èŒƒå›´ï¼Œå°±ä¸èƒ½å†æ¢å¤ä½¿ç”¨äº†ã€‚</p><h3 id="4-Selection-å¯¹è±¡"><a href="#4-Selection-å¯¹è±¡" class="headerlink" title="4.Selection å¯¹è±¡"></a>4.Selection å¯¹è±¡</h3><ul><li>è¿™æ˜¯ä¸€ä¸ªwindowå¯¹è±¡</li><li>è¿”å›ä¸€ä¸ª <code>Selection</code> å¯¹è±¡ï¼Œè¡¨ç¤ºç”¨æˆ·é€‰æ‹©çš„æ–‡æœ¬èŒƒå›´æˆ–å…‰æ ‡çš„å½“å‰ä½ç½®ã€‚</li><li>è¿™é‡Œä½¿ç”¨å®ƒæ¥è·å–å½“å‰å…‰æ ‡æ‰€å¤„çš„dom</li></ul><p>ç”¨æ³•:</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">const</span> selection <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment" spellcheck="true">//éreactä½¿ç”¨</span>    <span class="token keyword">const</span> selection <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>anchorNode <span class="token operator">=</span> selection<span class="token punctuation">.</span>anchorNode<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è·å–å½“å‰è´¯æ ‡æ‰€åœ¨ä½ç½®çš„domï¼ˆä½¿ç”¨anchorNodeå­æ–¹æ³•ï¼‰</span></code></pre><h3 id="5-domä¸­è®¾ç½®-äººå‘˜çš„æ¼”ç¤º"><a href="#5-domä¸­è®¾ç½®-äººå‘˜çš„æ¼”ç¤º" class="headerlink" title="5.domä¸­è®¾ç½®@äººå‘˜çš„æ¼”ç¤º"></a>5.domä¸­è®¾ç½®@äººå‘˜çš„æ¼”ç¤º</h3><ul><li>æœ¬æ–‡é€šè¿‡<code>&lt;span&gt;</code>æ ‡ç­¾æ¥å®ç°</li></ul><pre class=" language-html"><code class="language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name">         <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span><span class="token hexcode">#F4F4F6</span><span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">3</span>px <span class="token number">5</span>px<span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">3</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span>         <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>${item.id}</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>${item.name}</span><span class="token punctuation">></span></span> //reactæ–¹æ³•        @${item.name}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></code></pre><h3 id="6-é€šè¿‡selectionæ¥æ›¿æ¢åŸæ¥çš„-å­—ç¬¦"><a href="#6-é€šè¿‡selectionæ¥æ›¿æ¢åŸæ¥çš„-å­—ç¬¦" class="headerlink" title="6.é€šè¿‡selectionæ¥æ›¿æ¢åŸæ¥çš„@å­—ç¬¦"></a>6.é€šè¿‡selectionæ¥æ›¿æ¢åŸæ¥çš„@å­—ç¬¦</h3><blockquote><p>1.å…ˆè·å–å½“å‰å…‰æ ‡çš„ä½ç½®<br>2.å†è·å–å½“å‰è¾“å…¥æ¡†çš„dom<br>3.åˆ†ædomé‡Œçš„ç»“æ„<br>4.å°†domä¸­çš„å…‰æ ‡ä½ç½®çš„@æ›¿æ¢æˆ<code>atPresonDom</code>ä¸­çš„ç»“æ„<br>5.å°†ç”Ÿæˆçš„<code>reasonDom</code>æ’å…¥åˆ°domä¸­<br>6.å†å°†å…‰æ ‡ç½®äºå½“å‰æ›¿æ¢çš„<code>&lt;span&gt;</code>æ ‡ç­¾ä¹‹å</p></blockquote><pre class=" language-javascript"><code class="language-javascript">selectPerson <span class="token operator">=</span> item <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> anchorNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>anchorNode<span class="token punctuation">;</span>    <span class="token keyword">const</span> selectStartIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectStartIndex<span class="token punctuation">;</span>    <span class="token keyword">const</span> atPresonDom <span class="token operator">=</span> <span class="token template-string"><span class="token string">`&amp;nbsp;&lt;span style="background-color:#F4F4F6;padding: 3px 5px;border-radius: 3px;" id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span>&amp;nbsp;`</span></span><span class="token punctuation">;</span>    <span class="token keyword">let</span> reasonDom <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> targetDomIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">[</span><span class="token operator">...</span>textDom<span class="token punctuation">.</span>childNodes<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>each<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>each<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">'SPAN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        reasonDom <span class="token operator">+</span><span class="token operator">=</span> each<span class="token punctuation">.</span>outerHTML<span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>anchorNode <span class="token operator">===</span> each<span class="token punctuation">)</span> <span class="token punctuation">{</span>        targetDomIndex <span class="token operator">=</span> index<span class="token punctuation">;</span>        <span class="token keyword">const</span> tempEachDom <span class="token operator">=</span> each<span class="token punctuation">;</span>        <span class="token keyword">const</span> dom1 <span class="token operator">=</span> tempEachDom<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> selectStartIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> dom2 <span class="token operator">=</span> atPresonDom<span class="token punctuation">;</span>        <span class="token keyword">const</span> dom3 <span class="token operator">=</span> tempEachDom<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>          selectStartIndex <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectText<span class="token punctuation">.</span>length<span class="token punctuation">,</span>          each<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">,</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>        reasonDom <span class="token operator">+</span><span class="token operator">=</span> dom1 <span class="token operator">+</span> dom2 <span class="token operator">+</span> dom3<span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        reasonDom <span class="token operator">+</span><span class="token operator">=</span> each<span class="token punctuation">.</span>data<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    textDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> reasonDom<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ’å…¥dom</span>    <span class="token keyword">const</span> textDomChildList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>textDom<span class="token punctuation">.</span>childNodes<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> textDomLastIndex <span class="token operator">=</span>      textDomChildList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> textDomChildList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> targetIndex <span class="token operator">=</span>      targetDomIndex <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">></span> textDomLastIndex        <span class="token operator">?</span> textDomLastIndex        <span class="token punctuation">:</span> targetDomIndex <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> targetAnchorNode <span class="token operator">=</span> textDomChildList<span class="token punctuation">[</span>targetIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> selection <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    range<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>targetAnchorNode<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>targetAnchorNode<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    selection<span class="token punctuation">.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    selection<span class="token punctuation">.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>selectText <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> personDataList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>selectStartIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="7-é”®ç›˜æ§åˆ¶é€‰ä¸­-åè¾¹é™„å½•é”®ç›˜äº‹ä»¶"><a href="#7-é”®ç›˜æ§åˆ¶é€‰ä¸­-åè¾¹é™„å½•é”®ç›˜äº‹ä»¶" class="headerlink" title="7.é”®ç›˜æ§åˆ¶é€‰ä¸­(åè¾¹é™„å½•é”®ç›˜äº‹ä»¶)"></a>7.é”®ç›˜æ§åˆ¶é€‰ä¸­(åè¾¹é™„å½•é”®ç›˜äº‹ä»¶)</h3><ul><li>é€šè¿‡é”®ç›˜æ¥æ§åˆ¶å¾ªç¯é€‰ä¸­ä¸‹æ‹‰äººå‘˜åˆ—è¡¨</li><li>é”®ç›˜æ§åˆ¶åˆ é™¤æ•´ä½“æ¨¡å—</li><li>é”®ç›˜æ§åˆ¶å…‰æ ‡è¿›å…¥ç©ºèƒ½</li></ul><pre class=" language-javascript"><code class="language-javascript">keydownEvent <span class="token operator">=</span> e <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//é”®ç›˜äº‹ä»¶</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> selection <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>anchorNode <span class="token operator">=</span> selection<span class="token punctuation">.</span>anchorNode<span class="token punctuation">;</span>      <span class="token keyword">const</span> range <span class="token operator">=</span> selection<span class="token punctuation">.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// åˆ é™¤@æ¨¡å—</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>selection<span class="token punctuation">.</span>focusNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">'SPAN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        textDom<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span>startContainer<span class="token punctuation">.</span>parentElement<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//up&amp;down</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> personDataList<span class="token punctuation">,</span> curSelectItem <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>      personDataList<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æœ‰ä¸‹æ‹‰æ˜¯é˜»æ­¢å†’æ³¡</span>      <span class="token keyword">let</span> targetIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      personDataList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        targetIndex <span class="token operator">=</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> curSelectItem<span class="token punctuation">.</span>id <span class="token operator">?</span> index <span class="token punctuation">:</span> targetIndex<span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//down</span>        targetIndex <span class="token operator">=</span> targetIndex <span class="token operator">===</span> personDataList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> targetIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">38</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//up</span>        targetIndex <span class="token operator">=</span> targetIndex <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> personDataList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">:</span> targetIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> curSelectItem<span class="token punctuation">:</span> personDataList<span class="token punctuation">[</span>targetIndex<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> curSelectItem <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>      curSelectItem <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectPerson</span><span class="token punctuation">(</span>curSelectItem<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> curSelectItem<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="8-å½“å…‰æ ‡åˆ é™¤åˆ°æ•´ä½“æ¨¡å—å¤„ç†"><a href="#8-å½“å…‰æ ‡åˆ é™¤åˆ°æ•´ä½“æ¨¡å—å¤„ç†" class="headerlink" title="8.å½“å…‰æ ‡åˆ é™¤åˆ°æ•´ä½“æ¨¡å—å¤„ç†"></a>8.å½“å…‰æ ‡åˆ é™¤åˆ°æ•´ä½“æ¨¡å—å¤„ç†</h3><p>å½“å…‰æ ‡è¯†åˆ«åˆ°è¿›å…¥@æ•´ä½“æ¨¡å—æ—¶ï¼Œéœ€è¦æ•´ä½“åˆ é™¤</p><p>è¿™é‡Œä½¿ç”¨çš„æ—¶<code>&lt;span&gt;</code>æ ‡ç­¾æ¥è¡¨ç¤ºçš„</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>selection<span class="token punctuation">.</span>focusNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">'SPAN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//ä¸å…è®¸ç¼–è¾‘@äººå‘˜</span>    textDom<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>selection<span class="token punctuation">.</span>focusNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> personDataList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>selectStartIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="9-æ•ˆæœå›¾"><a href="#9-æ•ˆæœå›¾" class="headerlink" title="9.æ•ˆæœå›¾"></a>9.æ•ˆæœå›¾</h3><p><img src="http://ww1.sinaimg.cn/large/987eaf20gy1ge7m81xiq0j21dq0m8n17.jpg" alt="demo2.png"></p><h1 id="é™„ï¼šjsé”®ç›˜äº‹ä»¶å…¨é¢æ§åˆ¶è¯¦è§£"><a href="#é™„ï¼šjsé”®ç›˜äº‹ä»¶å…¨é¢æ§åˆ¶è¯¦è§£" class="headerlink" title="é™„ï¼šjsé”®ç›˜äº‹ä»¶å…¨é¢æ§åˆ¶è¯¦è§£"></a>é™„ï¼šjsé”®ç›˜äº‹ä»¶å…¨é¢æ§åˆ¶è¯¦è§£</h1><p>ä¸»è¦åˆ†å››ä¸ªéƒ¨åˆ†<br>ç¬¬ä¸€éƒ¨åˆ†ï¼šæµè§ˆå™¨çš„æŒ‰é”®äº‹ä»¶<br>ç¬¬äºŒéƒ¨åˆ†ï¼šå…¼å®¹æµè§ˆå™¨<br>ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç å®ç°å’Œä¼˜åŒ–<br>ç¬¬å››éƒ¨åˆ†ï¼šæ€»ç»“</p><h2 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šæµè§ˆå™¨çš„æŒ‰é”®äº‹ä»¶"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šæµè§ˆå™¨çš„æŒ‰é”®äº‹ä»¶" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šæµè§ˆå™¨çš„æŒ‰é”®äº‹ä»¶"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šæµè§ˆå™¨çš„æŒ‰é”®äº‹ä»¶</h2><p>1.ç”¨jså®ç°é”®ç›˜è®°å½•ï¼Œè¦å…³æ³¨æµè§ˆå™¨çš„ä¸‰ç§æŒ‰é”®äº‹ä»¶ç±»å‹ï¼Œå³<code>keydown</code>ï¼Œ<code>keypress</code>å’Œ<code>keyup</code>ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”<code>onkeydown</code>ã€<code>onkeypress</code>å’Œ<code>onkeyup</code>è¿™ä¸‰ä¸ªäº‹ä»¶å¥æŸ„ã€‚ä¸€ä¸ªå…¸å‹çš„æŒ‰é”®ä¼šäº§ç”Ÿæ‰€æœ‰è¿™ä¸‰ç§äº‹ä»¶ï¼Œä¾æ¬¡æ˜¯<code>keydown</code>ï¼Œ<code>keypress</code>ï¼Œç„¶åæ˜¯æŒ‰é”®é‡Šæ”¾æ—¶å€™çš„<code>keyup</code>ã€‚</p><p>2.åœ¨è¿™3ç§äº‹ä»¶ç±»å‹ä¸­ï¼Œ<code>keydown</code>å’Œ<code>keyup</code>æ¯”è¾ƒåº•å±‚ï¼Œè€Œ<code>keypress</code>æ¯”è¾ƒé«˜çº§ã€‚è¿™é‡Œæ‰€è°“çš„é«˜çº§æ˜¯æŒ‡ï¼Œå½“ç”¨æˆ·æŒ‰ä¸‹<code>shift + 1</code>æ—¶ï¼Œ<code>keypress</code>æ˜¯å¯¹è¿™ä¸ªæŒ‰é”®äº‹ä»¶è¿›è¡Œè§£æåè¿”å›ä¸€ä¸ªå¯æ‰“å°çš„â€œ!â€å­—ç¬¦ï¼Œè€Œ<code>keydown</code>å’Œ<code>keyup</code>åªæ˜¯è®°å½•äº†<code>shift + 1</code>è¿™ä¸ªäº‹ä»¶ã€‚</p><p>3.ä½†æ˜¯<code>keypress</code>åªèƒ½é’ˆå¯¹ä¸€äº›å¯ä»¥æ‰“å°å‡ºæ¥çš„å­—ç¬¦æœ‰æ•ˆï¼Œè€Œå¯¹äºåŠŸèƒ½æŒ‰é”®ï¼Œå¦‚<code>F1-F12</code>ã€<code>Backspace</code>ã€<code>Enter</code>ã€<code>Escape</code>ã€<code>PageUP</code>ã€<code>PageDown</code>å’Œç®­å¤´æ–¹å‘ç­‰ï¼Œå°±ä¸ä¼šäº§ç”Ÿ<code>keypress</code>äº‹ä»¶ï¼Œä½†æ˜¯å¯ä»¥äº§ç”Ÿ<code>keydown</code>å’Œ<code>keyup</code>äº‹ä»¶ã€‚ç„¶è€Œåœ¨FireFoxä¸­ï¼ŒåŠŸèƒ½æŒ‰é”®æ˜¯å¯ä»¥äº§ç”Ÿ<code>keypress</code>äº‹ä»¶çš„ã€‚</p><p>4.ä¼ é€’ç»™<code>keydown</code>ã€<code>keypress</code>å’Œ<code>keyup</code>äº‹ä»¶å¥æŸ„çš„äº‹ä»¶å¯¹è±¡æœ‰ä¸€äº›é€šç”¨çš„å±æ€§ã€‚å¦‚æœ<code>Alt</code>ã€<code>Ctrl</code>æˆ–<code>Shift</code>å’Œä¸€ä¸ªæŒ‰é”®ä¸€èµ·æŒ‰ä¸‹ï¼Œè¿™é€šè¿‡äº‹ä»¶çš„<code>altKey</code>ã€<code>ctrlKey</code>å’Œ<code>shiftKey</code>å±æ€§è¡¨ç¤ºï¼Œè¿™äº›å±æ€§åœ¨FireFoxå’ŒIEä¸­æ˜¯é€šç”¨çš„ã€‚</p><h2 id="ç¬¬äºŒéƒ¨åˆ†ï¼šå…¼å®¹æµè§ˆå™¨"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šå…¼å®¹æµè§ˆå™¨" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šå…¼å®¹æµè§ˆå™¨"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šå…¼å®¹æµè§ˆå™¨</h2><ul><li>å‡¡æ˜¯æ¶‰åŠæµè§ˆå™¨çš„jsï¼Œå°±éƒ½è¦è€ƒè™‘æµè§ˆå™¨å…¼å®¹çš„é—®é¢˜ã€‚</li><li>ç›®å‰å¸¸ç”¨çš„æµè§ˆå™¨ä¸»è¦æœ‰åŸºäºIEå’ŒåŸºäºMozillaä¸¤å¤§ç±»ã€‚Maxthonæ˜¯åŸºäºIEå†…æ ¸çš„ï¼Œè€ŒFireFoxå’ŒOperaæ˜¯åŸºäºMozillaå†…æ ¸çš„ã€‚</li></ul><h3 id="2-1-äº‹ä»¶çš„åˆå§‹åŒ–"><a href="#2-1-äº‹ä»¶çš„åˆå§‹åŒ–" class="headerlink" title="2.1 äº‹ä»¶çš„åˆå§‹åŒ–"></a>2.1 äº‹ä»¶çš„åˆå§‹åŒ–</h3><p>é¦–å…ˆéœ€è¦äº†è§£çš„æ˜¯å¦‚ä½•åˆå§‹åŒ–è¯¥äº‹ä»¶ï¼ŒåŸºæœ¬è¯­å¥å¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">function</span> <span class="token function">keyDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    document<span class="token punctuation">.</span>onkeydown <span class="token operator">=</span> keyDown<span class="token punctuation">;</span></code></pre><p><strong><em>react ç»‘å®š</em></strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//ç›´æ¥ç»‘å®šåœ¨åŸç”Ÿäº‹ä»¶ä¸Šï¼Œè¿™ä¸ªä¸€èˆ¬æ˜¯ç”¨æ¥æ•æ‰ç¼–è¾‘çš„æ—¶å€™çš„äº‹ä»¶ï¼Œç”¨çš„ä¸å¤š</span>    <span class="token operator">&lt;</span>textarea onKeyDown<span class="token operator">=</span><span class="token punctuation">{</span>e<span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> e<span class="token punctuation">.</span>keyCode <span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token comment" spellcheck="true">//é€šè¿‡å£°æ˜å‘¨æœŸç›´æ¥ç»‘å®šåˆ°documentçš„äº‹ä»¶ä¸Šï¼Œè¿™ä¸ªæ–¹å¼ä¸€èˆ¬ç”¨æ¥åšå¿«æ·é”®æ¯”è¾ƒå¤š</span>    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">KeyBind</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>        <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"keydown"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onKeyDown<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"keydown"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onKeyDown<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        onKeyDown <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">switch</span><span class="token punctuation">(</span> e<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">case</span> <span class="token number">13</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>å›è½¦äº‹ä»¶                <span class="token keyword">break</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>å½“æµè§ˆå™¨è¯»åˆ°è¿™ä¸ªè¯­å¥æ—¶ï¼Œæ— è®ºæŒ‰ä¸‹é”®ç›˜ä¸Šçš„å“ªä¸ªé”®ï¼Œéƒ½å°†å‘¼å«KeyDown()å‡½æ•°ã€‚</p><h3 id="2-2-FireFoxå’ŒOperaçš„å®ç°æ–¹æ³•"><a href="#2-2-FireFoxå’ŒOperaçš„å®ç°æ–¹æ³•" class="headerlink" title="2.2 FireFoxå’ŒOperaçš„å®ç°æ–¹æ³•"></a>2.2 FireFoxå’ŒOperaçš„å®ç°æ–¹æ³•</h3><p>FireFoxå’ŒOperaç­‰ç¨‹åºå®ç°è¦æ¯”IEéº»çƒ¦ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆæè¿°ä¸€ä¸‹ã€‚</p><p><code>keyDown()</code>å‡½æ•°æœ‰ä¸€ä¸ªéšè—çš„å˜é‡â€“ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨å­—æ¯â€œeâ€æ¥è¡¨ç¤ºè¿™ä¸ªå˜é‡ã€‚  </p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">function</span> <span class="token function">keyDown</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>  </code></pre><p>å˜é‡eè¡¨ç¤ºå‘ç”Ÿå‡»é”®äº‹ä»¶ï¼Œå¯»æ‰¾æ˜¯å“ªä¸ªé”®è¢«æŒ‰ä¸‹ï¼Œè¦ä½¿ç”¨whichè¿™ä¸ªå±æ€§ï¼š  </p><pre class=" language-javascript"><code class="language-javascript">    e<span class="token punctuation">.</span>which  </code></pre><p><code>e.which</code>å°†ç»™å‡ºè¯¥é”®çš„ç´¢å¼•å€¼ï¼ŒæŠŠç´¢å¼•å€¼è½¬åŒ–æˆè¯¥é”®çš„å­—æ¯æˆ–æ•°å­—å€¼çš„æ–¹æ³•éœ€è¦ç”¨åˆ°é™æ€å‡½æ•°<code>String.fromCharCode()</code>ï¼Œå¦‚ä¸‹ï¼š </p><pre class=" language-javascript"><code class="language-javascript">    String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>which<span class="token punctuation">)</span></code></pre><p>æŠŠä¸Šé¢çš„è¯­å¥æ”¾åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨FireFoxä¸­å¾—åˆ°è¢«æŒ‰ä¸‹çš„æ˜¯å“ªä¸€ä¸ªé”®ï¼š  </p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">function</span> <span class="token function">keyDown</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">var</span> keycode <span class="token operator">=</span> e<span class="token punctuation">.</span>which<span class="token punctuation">;</span>          <span class="token keyword">var</span> realkey <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>which<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">ã€€ã€€alert</span><span class="token punctuation">(</span><span class="token string">"æŒ‰é”®ç : "</span> <span class="token operator">+</span> keycode <span class="token operator">+</span> <span class="token string">" å­—ç¬¦: "</span> <span class="token operator">+</span> realkey<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    document<span class="token punctuation">.</span>onkeydown <span class="token operator">=</span> keyDown<span class="token punctuation">;</span></code></pre><h3 id="2-3-IEçš„å®ç°æ–¹æ³•"><a href="#2-3-IEçš„å®ç°æ–¹æ³•" class="headerlink" title="2.3 IEçš„å®ç°æ–¹æ³•"></a>2.3 IEçš„å®ç°æ–¹æ³•</h3><p>IEçš„ç¨‹åºä¸éœ€è¦eå˜é‡ï¼Œç”¨<code>window.event.keyCode</code>æ¥ä»£æ›¿<code>e.which</code>ï¼ŒæŠŠé”®çš„ç´¢å¼•å€¼è½¬åŒ–ä¸ºçœŸå®é”®å€¼æ–¹æ³•ç±»ä¼¼ï¼š<code>String.fromCharCode(event.keyCode)</code>ï¼Œç¨‹åºå¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">function</span> <span class="token function">keyDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">var</span> keycode <span class="token operator">=</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>          <span class="token keyword">var</span> realkey <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æŒ‰é”®ç : "</span> <span class="token operator">+</span> keycode <span class="token operator">+</span> <span class="token string">" å­—ç¬¦: "</span> <span class="token operator">+</span> realkey<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      document<span class="token punctuation">.</span>onkeydown <span class="token operator">=</span> keyDown<span class="token punctuation">;</span></code></pre><h3 id="2-4-åˆ¤æ–­æµè§ˆå™¨ç±»å‹"><a href="#2-4-åˆ¤æ–­æµè§ˆå™¨ç±»å‹" class="headerlink" title="2.4 åˆ¤æ–­æµè§ˆå™¨ç±»å‹"></a>2.4 åˆ¤æ–­æµè§ˆå™¨ç±»å‹</h3><p>ä¸Šé¢äº†è§£äº†åœ¨å„ç§æµè§ˆå™¨é‡Œæ˜¯å¦‚ä½•å®ç°è·å–æŒ‰é”®äº‹ä»¶å¯¹è±¡çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¸‹é¢éœ€è¦åˆ¤æ–­æµè§ˆå™¨ç±»å‹ï¼Œè¿™ä¸ªæ–¹æ³•å¾ˆå¤šï¼Œæœ‰æ¯”è¾ƒæ–¹ä¾¿ç†è§£çš„ï¼Œä¹Ÿæœ‰å¾ˆå·§å¦™çš„åŠæ³•ï¼Œå…ˆè¯´ä¸€èˆ¬çš„æ–¹æ³•ï¼šå°±æ˜¯åˆ©ç”¨<code>navigator</code>å¯¹è±¡çš„<code>appNameå±æ€§</code>ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨<code>userAgent</code>å±æ€§ï¼Œè¿™é‡Œç”¨<code>appName</code>æ¥å®ç°åˆ¤æ–­æµè§ˆå™¨ç±»å‹ï¼ŒIEå’ŒMaxthonçš„appNameæ˜¯â€œMicrosoft Internet Explorerâ€ ,è€ŒFireFoxå’ŒOperaçš„appNameæ˜¯â€œNetscapeâ€ï¼Œæ‰€ä»¥ä¸€ä¸ªåŠŸèƒ½æ¯”è¾ƒç®€å•çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">function</span> <span class="token function">keyUp</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>appName <span class="token operator">==</span> <span class="token string">"Microsoft Internet Explorer"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">var</span> keycode <span class="token operator">=</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>              <span class="token keyword">var</span> realkey <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">var</span> keycode <span class="token operator">=</span> e<span class="token punctuation">.</span>which<span class="token punctuation">;</span>              <span class="token keyword">var</span> realkey <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>which<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æŒ‰é”®ç : "</span> <span class="token operator">+</span> keycode <span class="token operator">+</span> <span class="token string">" å­—ç¬¦: "</span> <span class="token operator">+</span> realkey<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    document<span class="token punctuation">.</span>onkeyup <span class="token operator">=</span> keyUp<span class="token punctuation">;</span></code></pre><p>æ¯”è¾ƒç®€æ´çš„æ–¹æ³•æ˜¯ï¼š</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">function</span> <span class="token function">keyUp</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> currKey<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> e<span class="token operator">=</span>e<span class="token operator">||</span>event<span class="token punctuation">;</span>        currKey<span class="token operator">=</span>e<span class="token punctuation">.</span>keyCode<span class="token operator">||</span>e<span class="token punctuation">.</span>which<span class="token operator">||</span>e<span class="token punctuation">.</span>charCode<span class="token punctuation">;</span>        <span class="token keyword">var</span> keyName <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>currKey<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æŒ‰é”®ç : "</span> <span class="token operator">+</span> currKey <span class="token operator">+</span> <span class="token string">" å­—ç¬¦: "</span> <span class="token operator">+</span> keyName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    document<span class="token punctuation">.</span>onkeyup <span class="token operator">=</span> keyUp<span class="token punctuation">;</span></code></pre><p>ä¸Šé¢è¿™ç§æ–¹æ³•æ¯”è¾ƒå·§å¦™ï¼Œç®€å•åœ°è§£é‡Šä¸€ä¸‹ï¼š</p><blockquote><p>é¦–å…ˆï¼Œe=e||event;è¿™å¥ä»£ç æ˜¯ä¸ºäº†è¿›è¡Œæµè§ˆå™¨äº‹ä»¶å¯¹è±¡è·å–çš„å…¼å®¹ã€‚jsä¸­è¿™å¥ä»£ç çš„æ„æ€æ˜¯ï¼Œå¦‚æœåœ¨FireFoxæˆ–Operaä¸­ï¼Œéšè—çš„å˜é‡eæ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆe||eventè¿”å›eï¼Œå¦‚æœåœ¨IEä¸­ï¼Œéšè—å˜é‡eæ˜¯ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›eventã€‚<br>å…¶æ¬¡ï¼Œ<code>currKey=e.keyCode||e.which||e.charCode</code>;è¿™å¥æ˜¯ä¸ºäº†å…¼å®¹æµè§ˆå™¨æŒ‰é”®äº‹ä»¶å¯¹è±¡çš„æŒ‰é”®ç å±æ€§ï¼ˆè¯¦è§ç¬¬ä¸‰éƒ¨åˆ†ï¼‰ï¼Œå¦‚IEä¸­ï¼Œåªæœ‰keyCodeå±æ€§ï¼Œè€ŒFireFoxä¸­æœ‰whichå’ŒcharCodeå±æ€§ï¼ŒOperaä¸­æœ‰keyCodeå’Œwhichå±æ€§ç­‰ã€‚<br>ä¸Šè¿°ä»£ç åªæ˜¯å…¼å®¹äº†æµè§ˆå™¨ï¼Œè·å–äº†keyupäº‹ä»¶å¯¹è±¡ï¼Œç®€å•çš„å¼¹å‡ºäº†æŒ‰é”®ç å’ŒæŒ‰é”®çš„å­—ç¬¦ï¼Œä½†æ˜¯é—®é¢˜å‡ºç°äº†ï¼Œå½“ä½ æŒ‰é”®æ—¶ï¼Œå­—ç¬¦é”®éƒ½æ˜¯å¤§å†™çš„ï¼Œè€ŒæŒ‰shifté”®æ—¶ï¼Œæ˜¾ç¤ºçš„å­—ç¬¦å¾ˆå¥‡æ€ªï¼Œæ‰€ä»¥å°±éœ€è¦ä¼˜åŒ–ä¸€ä¸‹ä»£ç äº†ã€‚</p></blockquote><h2 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç å®ç°å’Œä¼˜åŒ–"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç å®ç°å’Œä¼˜åŒ–" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç å®ç°å’Œä¼˜åŒ–"></a>ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç å®ç°å’Œä¼˜åŒ–</h2><h3 id="3-1-æŒ‰é”®äº‹ä»¶çš„æŒ‰é”®ç å’Œå­—ç¬¦ç "><a href="#3-1-æŒ‰é”®äº‹ä»¶çš„æŒ‰é”®ç å’Œå­—ç¬¦ç " class="headerlink" title="3.1 æŒ‰é”®äº‹ä»¶çš„æŒ‰é”®ç å’Œå­—ç¬¦ç "></a>3.1 æŒ‰é”®äº‹ä»¶çš„æŒ‰é”®ç å’Œå­—ç¬¦ç </h3><p>åœ¨IEä¸­ï¼Œåªæœ‰ä¸€ä¸ª<code>keyCode</code>å±æ€§ï¼Œå¹¶ä¸”å®ƒçš„è§£é‡Šå–å†³äºäº‹ä»¶ç±»å‹ã€‚å¯¹äº<code>keydown</code>æ¥è¯´ï¼Œ<code>keyCode</code>å­˜å‚¨çš„æ˜¯æŒ‰é”®ç ï¼Œå¯¹äº <code>keypress</code>äº‹ä»¶æ¥è¯´ï¼Œ<code>keyCode</code>å­˜å‚¨çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ç ã€‚è€ŒIEä¸­æ²¡æœ‰<code>which</code>å’Œ<code>charCode</code>å±æ€§ï¼Œæ‰€ä»¥<code>whichå’ŒcharCode</code>å±æ€§å§‹ç»ˆä¸º<code>undefined</code>ã€‚</p><p>FireFoxä¸­keyCodeå§‹ç»ˆä¸º0ï¼Œæ—¶é—´<code>keydown</code>/<code>keyup</code>æ—¶ï¼Œ<code>charCode</code>=0ï¼Œwhichä¸ºæŒ‰é”®ç ã€‚äº‹ä»¶<code>keypress</code>æ—¶ï¼Œwhichå’ŒcharCodeäºŒè€…çš„å€¼ç›¸åŒï¼Œå­˜å‚¨äº†å­—ç¬¦ç ã€‚</p><p>åœ¨Operaä¸­ï¼Œ<code>keyCode</code>å’Œ<code>which</code>äºŒè€…çš„å€¼å§‹ç»ˆç›¸åŒï¼Œåœ¨<code>keydown/keyup</code>äº‹ä»¶ä¸­ï¼Œå®ƒä»¬å­˜å‚¨æŒ‰é”®ç ï¼Œåœ¨<code>keypress</code>æ—¶é—´ä¸­ï¼Œå®ƒä»¬å­˜å‚¨å­—ç¬¦ç ï¼Œè€ŒcharCodeæ²¡æœ‰å®šä¹‰ï¼Œå§‹ç»ˆæ˜¯undefinedã€‚</p><h3 id="3-2-ç”¨keydown-keyupè¿˜æ˜¯keypress"><a href="#3-2-ç”¨keydown-keyupè¿˜æ˜¯keypress" class="headerlink" title="3.2 ç”¨keydown/keyupè¿˜æ˜¯keypress"></a>3.2 ç”¨keydown/keyupè¿˜æ˜¯keypress</h3><p>ç¬¬ä¸€éƒ¨åˆ†å·²ç»ä»‹ç»äº†<code>keydown/keyup</code>å’Œ<code>keypress</code>çš„åŒºåˆ«ï¼Œæœ‰ä¸€æ¡æ¯”è¾ƒé€šç”¨çš„è§„åˆ™ï¼Œ<code>keydown</code>äº‹ä»¶å¯¹äºåŠŸèƒ½æŒ‰é”®æ¥è¯´æ˜¯æœ€æœ‰ç”¨çš„ï¼Œè€Œ<code>keypress</code>äº‹ä»¶å¯¹äºå¯æ‰“å°æŒ‰é”®æ¥è¯´æ˜¯æœ€æœ‰ç”¨çš„ã€‚</p><p>é”®ç›˜è®°å½•ä¸»è¦æ˜¯é’ˆå¯¹äºå¯æ‰“å°å­—ç¬¦å’Œéƒ¨åˆ†åŠŸèƒ½æŒ‰é”®ï¼Œæ‰€ä»¥<code>keypress</code>æ˜¯é¦–é€‰ï¼Œç„¶è€Œæ­£å¦‚ç¬¬ä¸€éƒ¨åˆ†æåˆ°çš„ï¼ŒIEä¸­<code>keypress</code>ä¸æ”¯æŒåŠŸèƒ½æŒ‰é”®ï¼Œæ‰€ä»¥åº”è¯¥ç”¨<code>keydown/keyup</code>äº‹ä»¶æ¥è¿›è¡Œè¡¥å……ã€‚</p><h3 id="3-3-ä»£ç çš„å®ç°"><a href="#3-3-ä»£ç çš„å®ç°" class="headerlink" title="3.3 ä»£ç çš„å®ç°"></a>3.3 ä»£ç çš„å®ç°</h3><p>æ€»ä½“æ€è·¯ï¼Œç”¨keypressäº‹ä»¶å¯¹è±¡è·å–æŒ‰é”®å­—ç¬¦ï¼Œç”¨keydownäº‹ä»¶è·å–åŠŸèƒ½å­—ç¬¦ï¼Œå¦‚<code>Enter</code>ï¼Œ<code>Backspace</code>ç­‰ã€‚</p><p>ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤º</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">!</span>DOCTYPE HTML PUBLIC <span class="token string">"-//W3C//DTD HTML 4.0Transitional//EN"</span><span class="token operator">></span><span class="token operator">&lt;</span>html<span class="token operator">></span><span class="token operator">&lt;</span>head<span class="token operator">></span>    <span class="token operator">&lt;</span>title<span class="token operator">></span>js æŒ‰é”®è®°å½•<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"Generator"</span> CONTENT<span class="token operator">=</span><span class="token string">"EditPlus"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"Author"</span> CONTENT<span class="token operator">=</span><span class="token string">"Duke"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"Keywords"</span> CONTENT<span class="token operator">=</span><span class="token string">"js æŒ‰é”®è®°å½•"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"Description"</span> CONTENT<span class="token operator">=</span><span class="token string">"js æŒ‰é”® è®°å½•"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>    <span class="token keyword">var</span> keystring <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è®°å½•æŒ‰é”®çš„å­—ç¬¦ä¸²</span>    <span class="token keyword">function</span> <span class="token function">$</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">getElementByIdx_x</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">?</span>document<span class="token punctuation">.</span><span class="token function">getElementByIdx_x</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>s<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">keypress</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">var</span> currKey<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>CapsLock<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>e<span class="token operator">=</span>e<span class="token operator">||</span>event<span class="token punctuation">;</span>ã€€      currKey<span class="token operator">=</span>e<span class="token punctuation">.</span>keyCode<span class="token operator">||</span>e<span class="token punctuation">.</span>which<span class="token operator">||</span>e<span class="token punctuation">.</span>charCode<span class="token punctuation">;</span>ã€€      CapsLock<span class="token operator">=</span>currKey<span class="token operator">>=</span><span class="token number">65</span><span class="token operator">&amp;&amp;</span>currKey<span class="token operator">&lt;=</span><span class="token number">90</span><span class="token punctuation">;</span>ã€€      ã€€      <span class="token keyword">switch</span><span class="token punctuation">(</span>currKey<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//å±è”½äº†é€€æ ¼ã€åˆ¶è¡¨ã€å›è½¦ã€ç©ºæ ¼ã€æ–¹å‘é”®ã€åˆ é™¤é”®</span>            <span class="token keyword">case</span> <span class="token number">8</span><span class="token punctuation">:</span>             <span class="token keyword">case</span> <span class="token number">9</span><span class="token punctuation">:</span>             <span class="token keyword">case</span> <span class="token number">13</span><span class="token punctuation">:</span>             <span class="token keyword">case</span> <span class="token number">32</span><span class="token punctuation">:</span>             <span class="token keyword">case</span> <span class="token number">37</span><span class="token punctuation">:</span>             <span class="token keyword">case</span> <span class="token number">38</span><span class="token punctuation">:</span>             <span class="token keyword">case</span> <span class="token number">39</span><span class="token punctuation">:</span>             <span class="token keyword">case</span> <span class="token number">40</span><span class="token punctuation">:</span>             <span class="token keyword">case</span> <span class="token number">46</span><span class="token punctuation">:</span>                keyName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">default</span><span class="token punctuation">:</span>                keyName <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>currKey<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        keystring <span class="token operator">+</span><span class="token operator">=</span> keyName<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">keydown</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">var</span> e<span class="token operator">=</span>e<span class="token operator">||</span>event<span class="token punctuation">;</span>        <span class="token keyword">var</span> currKey<span class="token operator">=</span>e<span class="token punctuation">.</span>keyCode<span class="token operator">||</span>e<span class="token punctuation">.</span>which<span class="token operator">||</span>e<span class="token punctuation">.</span>charCode<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>currKey<span class="token operator">></span><span class="token number">7</span><span class="token operator">&amp;&amp;</span>currKey<span class="token operator">&lt;</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>currKey<span class="token operator">></span><span class="token number">31</span><span class="token operator">&amp;&amp;</span>currKey<span class="token operator">&lt;</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">switch</span><span class="token punctuation">(</span>currKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token number">8</span><span class="token punctuation">:</span> keyName <span class="token operator">=</span> <span class="token string">"[é€€æ ¼]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">9</span><span class="token punctuation">:</span> keyName <span class="token operator">=</span> <span class="token string">"[åˆ¶è¡¨]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">13</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[å›è½¦]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">32</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[ç©ºæ ¼]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">33</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[PageUp]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">34</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[PageDown]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">35</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[End]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">36</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[Home]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">37</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[æ–¹å‘é”®å·¦]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">38</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[æ–¹å‘é”®ä¸Š]"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">39</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[æ–¹å‘é”®å³]"</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">40</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[æ–¹å‘é”®ä¸‹]"</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">46</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">"[åˆ é™¤]"</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">default</span><span class="token punctuation">:</span>keyName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            keystring <span class="token operator">+</span><span class="token operator">=</span> keyName<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>keystring<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">keyup</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>keystring<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    document<span class="token punctuation">.</span>onkeypress<span class="token operator">=</span>keypress<span class="token punctuation">;</span>    document<span class="token punctuation">.</span>onkeydown <span class="token operator">=</span>keydown<span class="token punctuation">;</span>    document<span class="token punctuation">.</span>onkeyup <span class="token operator">=</span>keyup<span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>body<span class="token operator">></span>    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"button"</span> value<span class="token operator">=</span><span class="token string">"æ¸…ç©ºè®°å½•"</span> onclick<span class="token operator">=</span><span class="token string">"$('content').innerHTML = '';keystring = '';"</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>è¯·æŒ‰ä¸‹ä»»æ„é”®æŸ¥çœ‹é”®ç›˜å“åº”é”®å€¼ï¼š<span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p>ä»£ç åˆ†æï¼š<br><code>$()</code>ï¼šæ ¹æ®IDè·å–dom<br><code>keypress(e)</code>ï¼šå®ç°å¯¹å­—ç¬¦ç çš„æˆªè·ï¼Œç”±äºåŠŸèƒ½æŒ‰é”®è¦ç”¨keydownè·å–ï¼Œæ‰€ä»¥åœ¨keypressä¸­å±è”½äº†è¿™äº›åŠŸèƒ½æŒ‰é”®ã€‚<br><code>keydown(e)</code>ï¼šä¸»è¦æ˜¯å®ç°äº†å¯¹åŠŸèƒ½æŒ‰é”®çš„è·å–ã€‚<br><code>keyup(e)</code>ï¼šå±•ç¤ºæˆªè·çš„å­—ç¬¦ä¸²ã€‚</p><p>ä»£ç åŸºæœ¬ä¸Šå°±ç®—å®ç°å®Œæˆäº†ï¼å‘µå‘µ</p><h2 id="ç¬¬å››éƒ¨åˆ†ï¼šæ€»ç»“"><a href="#ç¬¬å››éƒ¨åˆ†ï¼šæ€»ç»“" class="headerlink" title="ç¬¬å››éƒ¨åˆ†ï¼šæ€»ç»“"></a>ç¬¬å››éƒ¨åˆ†ï¼šæ€»ç»“</h2><p>1.H5ç«¯é”®ç›˜keyCodeæœ‰éƒ¨åˆ†ç¼ºå¤±ï¼Œä½¿ç”¨æ˜¯è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹<br>2.ç¼–å†™ä»£ç çš„æœ€åˆç›®çš„æ˜¯èƒ½å¤Ÿé€šè¿‡jsè®°å½•æŒ‰é”®ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>ä¸Šè¿°ä»£ç åªæ˜¯ç”¨jså®ç°äº†åŸºæœ¬çš„è‹±æ–‡æŒ‰é”®è®°å½•ï¼Œå¯¹äºæ±‰å­—æ˜¯æ— èƒ½ä¸ºåŠ›ï¼Œè®°å½•æ±‰å­—ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„åŠæ³•ï¼Œå½“ç„¶æ˜¯ç”¨jsï¼Œæ˜¯ç”¨keydownå’Œkeyupè®°å½•åº•å±‚æŒ‰é”®äº‹ä»¶ï¼Œæ±‰å­—è§£æå½“ç„¶æ— èƒ½ä¸ºåŠ›ã€‚å½“ç„¶ä½ å¯ä»¥ç”¨DOMçš„æ–¹å¼ç›´æ¥è·å–inputä¸­çš„æ±‰å­—ï¼Œä½†è¿™å·²ç»ç¦»å¼€äº†æœ¬æ–‡è®¨è®ºçš„ç”¨æŒ‰é”®äº‹ä»¶å®ç°æŒ‰é”®è®°å½•çš„æœ¬æ„ã€‚</p><p>æœ¬æ–‡demoï¼š <a href="https://github.com/duanweiqiang/atPerson" title="gitHub">gitHubåœ°å€</a></p><blockquote><p>ä¸Šè¿°ä»£ç è¿˜å¯ä»¥å®ç°æ·»åŠ å‰ªåˆ‡æ¿çš„åŠŸèƒ½ï¼Œç›‘æ§åˆ é™¤çš„åŠŸèƒ½ç­‰ç­‰ã€‚ã€‚ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> keyEvent </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swig ä½¿ç”¨æŒ‡å—</title>
      <link href="2020/03/22/swig/"/>
      <url>2020/03/22/swig/</url>
      
        <content type="html"><![CDATA[<p>nodeJSæ¨¡ç‰ˆæ¸²æŸ“å¼•æ“</p><h3 id="Swig-ä½¿ç”¨æŒ‡å—"><a href="#Swig-ä½¿ç”¨æŒ‡å—" class="headerlink" title="Swig ä½¿ç”¨æŒ‡å—"></a>Swig ä½¿ç”¨æŒ‡å—</h3><p>1.æ ¹æ®è·¯åŠ²æ¸²æŸ“é¡µé¢<br>2.é¢å‘å¯¹è±¡çš„æ¨¡æ¿ç»§æ‰¿ï¼Œé¡µé¢å¤ç”¨åŠ¨æ€é¡µé¢å¿«é€Ÿä¸Šæ‰‹åŠŸèƒ½å¼ºå¤§ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><p>API</p><pre class=" language-javascript"><code class="language-javascript">    swig<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      allowErrors<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>         autoescape<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      encoding<span class="token punctuation">:</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span>      filters<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      root<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>      tags<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      extensions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      tzOffset<span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="options"><a href="#options" class="headerlink" title="options:"></a>options:</h3><p><strong>allowErrors:</strong> </p><p>é»˜è®¤å€¼ä¸º <code>false</code>ã€‚</p><p>å°†æ‰€æœ‰æ¨¡æ¿è§£æå’Œç¼–è¯‘é”™è¯¯ç›´æ¥è¾“å‡ºåˆ°æ¨¡æ¿ã€‚</p><p>å¦‚æœä¸º <code>true</code>ï¼Œåˆ™å°†å¼•å‘é”™è¯¯ï¼ŒæŠ›å‡ºåˆ°<code>Node.js</code> è¿›ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå´©æºƒã€‚</p><p><strong>autoescape:</strong> </p><p>é»˜è®¤trueï¼Œå¼ºçƒˆå»ºè®®ä¿æŒã€‚</p><p>å­—ç¬¦è½¬æ¢è¡¨è¯·å‚é˜…è½¬ä¹‰è¿‡æ»¤å™¨ã€‚</p><p>true: HTMLå®‰å…¨è½¬ä¹‰ </p><p>false: ä¸è½¬ä¹‰ï¼Œé™¤éä½¿ç”¨è½¬ä¹‰è¿‡æ»¤å™¨æˆ–è€…è½¬ä¹‰æ ‡ç­¾</p><p><strong>js:</strong> </p><p><code>js</code>å®‰å…¨è½¬ä¹‰</p><p><strong>cache:</strong> </p><p>æ›´æ”¹ä¸º false å°†é‡æ–°ç¼–è¯‘æ¯ä¸ªè¯·æ±‚çš„æ¨¡æ¿çš„æ–‡ä»¶ã€‚æ­£å¼ç¯å¢ƒå»ºè®®ä¿æŒtrueã€‚</p><p><strong>encoding:</strong> </p><p>æ¨¡æ¿æ–‡ä»¶ç¼–ç </p><p><strong>root:</strong> </p><p>éœ€è¦æœç´¢æ¨¡æ¿çš„ç›®å½•ã€‚å¦‚æœæ¨¡æ¿ä¼ é€’ç»™ swig.compileFile ç»å¯¹è·¯å¾„(ä»¥/å¼€å¤´)ï¼ŒSwigä¸ä¼šåœ¨æ¨¡æ¿rootä¸­æœç´¢ã€‚å¦‚æœä¼ é€’ä¸€ä¸ªæ•°ç»„ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„æ•°ç»„é¡¹ã€‚</p><p><strong>tzOffset:</strong> </p><p>è®¾ç½®é»˜è®¤æ—¶åŒºåç§»é‡ã€‚æ­¤è®¾ç½®ä¼šä½¿è½¬æ¢æ—¥æœŸè¿‡æ»¤å™¨ä¼šè‡ªåŠ¨çš„ä¿®æ­£ç›¸åº”æ—¶åŒºåç§»é‡ã€‚</p><p><strong>filters:</strong> </p><p>è‡ªå®šä¹‰è¿‡æ»¤å™¨æˆ–è€…é‡å†™é»˜è®¤è¿‡æ»¤å™¨ï¼Œå‚è§è‡ªå®šä¹‰è¿‡æ»¤å™¨æŒ‡å—ã€‚</p><p><strong>tags</strong> </p><p>è‡ªå®šä¹‰æ ‡ç­¾æˆ–è€…é‡å†™é»˜è®¤æ ‡ç­¾ï¼Œå‚è§è‡ªå®šä¹‰æ ‡ç­¾æŒ‡å—ã€‚</p><p><strong>extensions</strong></p><p>æ·»åŠ ç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æ¨¡æ¿æ—¶ä½¿ç”¨ï¼Œå‚è§å‚è§è‡ªå®šä¹‰æ ‡ç­¾æŒ‡å—ã€‚</p><h3 id="nodejsç”¨æ³•"><a href="#nodejsç”¨æ³•" class="headerlink" title="nodejsç”¨æ³•"></a>nodejsç”¨æ³•</h3><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">var</span> tpl <span class="token operator">=</span> swig<span class="token punctuation">.</span><span class="token function">compileFile</span><span class="token punctuation">(</span><span class="token string">"path/to/template/file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> renderedHtml <span class="token operator">=</span> tpl<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span> vars<span class="token punctuation">:</span> <span class="token string">'to be inserted in template'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>or</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token keyword">var</span> tpl <span class="token operator">=</span> swig<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"Template string here"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> renderedHtml <span class="token operator">=</span> <span class="token function">tpl</span><span class="token punctuation">(</span><span class="token punctuation">{</span> vars<span class="token punctuation">:</span> <span class="token string">'to be inserted in template'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="ç»“åˆExpress"><a href="#ç»“åˆExpress" class="headerlink" title="ç»“åˆExpress"></a>ç»“åˆExpress</h3><pre class=" language-javascript"><code class="language-javascript">    npm install express    npm install consolidate</code></pre><p>ç„¶å</p><pre class=" language-javascript"><code class="language-javascript">    app<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">'.html'</span><span class="token punctuation">,</span> cons<span class="token punctuation">.</span>swig<span class="token punctuation">)</span><span class="token punctuation">;</span>    app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h3><p>Swigæµè§ˆå™¨ç‰ˆæœ¬çš„apiåŸºæœ¬ä¸nodejsç‰ˆç›¸åŒï¼Œä¸åŒç‚¹å¦‚ä¸‹ï¼š</p><p>ä¸èƒ½ä½¿ç”¨swig.compileFileï¼Œæµè§ˆå™¨æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿ</p><p>ä½ å¿…é¡»æå‰ä½¿ç”¨swig.compileç¼–è¯‘å¥½æ¨¡æ¿</p><p>æŒ‰é¡ºåºä½¿ç”¨<code>extends</code>, <code>import</code>, and <code>include</code>ï¼ŒåŒæ—¶åœ¨<code>swig.compile</code>é‡Œä½¿ç”¨å‚æ•°<code>templateKey</code>æ¥æŸ¥æ‰¾æ¨¡æ¿</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> template <span class="token operator">=</span> swig<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">'&lt;p>{% block content %}{% endblock %}&lt;/p>'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> filename<span class="token punctuation">:</span> <span class="token string">'main'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> mypage <span class="token operator">=</span> swig<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">'{% extends "main" %}{% block content %}Oh hey there!{% endblock %}'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> filename<span class="token punctuation">:</span> <span class="token string">'mypage'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><h3 id="swigçš„å˜é‡"><a href="#swigçš„å˜é‡" class="headerlink" title="swigçš„å˜é‡:"></a>swigçš„å˜é‡:</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span><span class="token punctuation">{</span> foo<span class="token punctuation">.</span>bar <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å¦‚æœå˜é‡æœªå®šä¹‰ï¼Œè¾“å‡ºç©ºå­—ç¬¦ã€‚</span></code></pre><p>æˆ–</p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span><span class="token punctuation">{</span> foo<span class="token punctuation">[</span><span class="token string">'bar'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//å¦‚æœå˜é‡æœªå®šä¹‰ï¼Œè¾“å‡ºç©ºå­—ç¬¦ã€‚</span></code></pre><h3 id="swigçš„æ ‡ç­¾ï¼š"><a href="#swigçš„æ ‡ç­¾ï¼š" class="headerlink" title="swigçš„æ ‡ç­¾ï¼š"></a>swigçš„æ ‡ç­¾ï¼š</h3><h4 id="extendsï¼š"><a href="#extendsï¼š" class="headerlink" title="extendsï¼š"></a>extendsï¼š</h4><ul><li>ä½¿å½“å‰æ¨¡æ¿ç»§æ‰¿çˆ¶æ¨¡æ¿ï¼Œå¿…é¡»åœ¨æ–‡ä»¶æœ€å‰</li><li>å‚æ•°ï¼š fileçˆ¶æ¨¡æ¿ç›¸å¯¹æ¨¡æ¿rootçš„ç›¸å¯¹è·¯å¾„ï¼Œå°†åœ¨åé¢ä»‹ç»å¦‚ä½•å®ç°æ¨¡æ¿ç»§æ‰¿ã€‚</li></ul><h4 id="blockï¼š"><a href="#blockï¼š" class="headerlink" title="blockï¼š"></a>blockï¼š</h4><ul><li>å®šä¹‰ä¸€ä¸ªå—ï¼Œä½¿ä¹‹å¯ä»¥è¢«ç»§æ‰¿çš„æ¨¡æ¿é‡å†™ï¼Œæˆ–è€…é‡å†™çˆ¶æ¨¡æ¿çš„åŒåå—ï¼Œåœ¨ç»§æ‰¿<code>block</code>å—æ—¶å¯ä»¥ä½¿ç”¨çˆ¶æ¨¡æ¿ä¸­å·²å®šä¹‰çš„éƒ¨åˆ† </li><li>å‚æ•°ï¼š nameå—çš„åå­—ï¼Œå¿…é¡»ä»¥å­—æ¯æ•°å­—ä¸‹åˆ’çº¿å¼€å¤´</li></ul><h4 id="parentï¼š"><a href="#parentï¼š" class="headerlink" title="parentï¼š"></a>parentï¼š</h4><ul><li><p>å°†çˆ¶æ¨¡æ¿ä¸­åŒåå—æ³¨å…¥å½“å‰å—ä¸­</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> block head <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span><span class="token operator">%</span> parent <span class="token operator">%</span><span class="token punctuation">}</span>       <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"custom.css"</span><span class="token operator">></span>    <span class="token punctuation">{</span><span class="token operator">%</span> endblock <span class="token operator">%</span><span class="token punctuation">}</span> </code></pre></li></ul><h4 id="includeï¼š"><a href="#includeï¼š" class="headerlink" title="includeï¼š"></a>includeï¼š</h4><ul><li><p>åŒ…å«ä¸€ä¸ªæ¨¡æ¿åˆ°å½“å‰ä½ç½®ï¼Œè¿™ä¸ªæ¨¡æ¿å°†ä½¿ç”¨å½“å‰ä¸Šä¸‹æ–‡ </p></li><li><p>å‚æ•°ï¼š fileåŒ…å«æ¨¡æ¿ç›¸å¯¹æ¨¡æ¿ root çš„ç›¸å¯¹è·¯å¾„ </p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"a.html"</span> <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"template.js"</span> <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//å°†å¼•å…¥çš„æ–‡ä»¶å†…å®¹æ”¾åˆ°è¢«å¼•ç”¨çš„åœ°æ–¹</span></code></pre><h4 id="rawï¼š"><a href="#rawï¼š" class="headerlink" title="rawï¼š"></a>rawï¼š</h4></li><li><p>åœæ­¢è§£ææ ‡è®°ä¸­ä»»ä½•å†…å®¹ï¼Œæ‰€æœ‰å†…å®¹éƒ½å°†è¾“å‡º</p></li><li><p>å‚æ•°ï¼š fileçˆ¶æ¨¡æ¿ç›¸å¯¹æ¨¡æ¿ root çš„ç›¸å¯¹è·¯å¾„</p></li></ul><h4 id="forï¼š"><a href="#forï¼š" class="headerlink" title="forï¼š"></a>forï¼š</h4><ul><li><p>éå†å¯¹è±¡å’Œæ•°ç»„</p></li><li><p>å‚æ•°ï¼š</p><p>  xï¼šå½“å‰å¾ªç¯è¿­ä»£åï¼›</p><p>  in:è¯­æ³•æ ‡è®°ï¼›</p><p>  y:å¯è¿­ä»£å¯¹è±¡ã€‚</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> y <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span><span class="token punctuation">{</span> x <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span></code></pre></li><li><p>ç‰¹æ®Šå¾ªç¯å˜é‡ </p><p>  <code>loop.index</code>ï¼šå½“å‰å¾ªç¯çš„ç´¢å¼•ï¼ˆ1å¼€å§‹ï¼‰ </p><p>  <code>loop.index0</code>ï¼šå½“å‰å¾ªç¯çš„ç´¢å¼•ï¼ˆ0å¼€å§‹ï¼‰ </p><p>  <code>loop.revindex</code>ï¼šå½“å‰å¾ªç¯ä»ç»“å°¾å¼€å§‹çš„ç´¢å¼•ï¼ˆ1å¼€å§‹ï¼‰</p><p>  <code>loop.revindex0</code>ï¼šå½“å‰å¾ªç¯ä»ç»“å°¾å¼€å§‹çš„ç´¢å¼•ï¼ˆ0å¼€å§‹ï¼‰ </p><p>  <code>loop.key</code>ï¼šå¦‚æœè¿­ä»£æ˜¯å¯¹è±¡ï¼Œæ˜¯å½“å‰å¾ªç¯çš„é”®ï¼Œå¦åˆ™åŒ loop.index </p><p>  <code>loop.first</code>ï¼šå¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå€¼è¿”å› true </p><p>  <code>loop.last</code>ï¼šå¦‚æœæ˜¯æœ€åä¸€ä¸ªå€¼è¿”å› true </p><p>  <code>loop.cycle</code>ï¼šä¸€ä¸ªå¸®åŠ©å‡½æ•°ï¼Œä»¥æŒ‡å®šçš„å‚æ•°ä½œä¸ºå‘¨æœŸ</p></li></ul><h5 id="exampleï¼š"><a href="#exampleï¼š" class="headerlink" title="exampleï¼š"></a>exampleï¼š</h5><ul><li><p>eg1â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> y <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> loop<span class="token punctuation">.</span>first <span class="token operator">%</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> loop<span class="token punctuation">.</span>index <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> loop<span class="token punctuation">.</span>key <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> x <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>        <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> loop<span class="token punctuation">.</span>last <span class="token operator">%</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span></code></pre></li><li><p>eg2 â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> items <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"{{ loop.cycle('odd', 'even') }}"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> item <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span></code></pre></li><li><p>eg3â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“</p></li></ul><h5 id="åœ¨-for-æ ‡ç­¾é‡Œä½¿ç”¨-else"><a href="#åœ¨-for-æ ‡ç­¾é‡Œä½¿ç”¨-else" class="headerlink" title="åœ¨ for æ ‡ç­¾é‡Œä½¿ç”¨ else"></a>åœ¨ for æ ‡ç­¾é‡Œä½¿ç”¨ else</h5><ul><li><p>egâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€“</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> person <span class="token keyword">in</span> people <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span><span class="token punctuation">{</span> person <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">else</span> <span class="token operator">%</span><span class="token punctuation">}</span>        There are no people yet<span class="token operator">!</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span></code></pre><h4 id="ifï¼šæ¡ä»¶è¯­å¥"><a href="#ifï¼šæ¡ä»¶è¯­å¥" class="headerlink" title="ifï¼šæ¡ä»¶è¯­å¥"></a>ifï¼šæ¡ä»¶è¯­å¥</h4></li><li><p>å‚æ•°ï¼šæ¥å—ä»»ä½•æœ‰æ•ˆçš„JavaScriptæ¡ä»¶è¯­å¥</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x <span class="token operator">%</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token operator">!</span>x <span class="token operator">%</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> not x <span class="token operator">%</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x and y <span class="token operator">%</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x <span class="token operator">&amp;&amp;</span> y <span class="token operator">%</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x or y <span class="token operator">%</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x <span class="token operator">||</span> y <span class="token operator">%</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x <span class="token operator">||</span> <span class="token punctuation">(</span>y <span class="token operator">&amp;&amp;</span> z<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span></code></pre><h5 id="exampleï¼š-1"><a href="#exampleï¼š-1" class="headerlink" title="exampleï¼š"></a>exampleï¼š</h5></li></ul><ul><li><p>if else å’Œ else if</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> foo <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//Some content.</span>    <span class="token punctuation">{</span><span class="token operator">%</span> elseif <span class="token string">"foo"</span> <span class="token keyword">in</span> bar <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//Content if the array `bar` has "foo" in it.</span>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">else</span> <span class="token operator">%</span><span class="token punctuation">}</span>        Fallback content<span class="token punctuation">.</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x <span class="token punctuation">[</span>operator<span class="token punctuation">]</span> y <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//Operators: ==, !=, &lt;, &lt;=, >, >=, ===, !==</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">'five'</span> <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//The operands can be also be string or number literals</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x<span class="token operator">|</span>length <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//You can use filters on any operand in the statement.</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> x <span class="token keyword">in</span> y <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//If x is a value that is present in y, this will return true.</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span></code></pre><h4 id="autoescapeï¼š"><a href="#autoescapeï¼š" class="headerlink" title="autoescapeï¼š"></a>autoescapeï¼š</h4></li><li><p>æ”¹å˜å½“å‰å˜é‡çš„è‡ªåŠ¨è½¬ä¹‰è¡Œä¸º </p></li><li><p>å‚æ•°ï¼š </p><p>  onï¼šå½“å‰å†…å®¹æ˜¯å¦è½¬ä¹‰</p><p>  type: è½¬ä¹‰ç±»å‹ï¼Œjs æˆ–è€… htmlï¼Œé»˜è®¤ html</p></li><li><p>example:</p><pre class=" language-javascript"><code class="language-javascript">  input <span class="token operator">=</span> <span class="token string">'&lt;p>Hello "you" &amp; /'</span>them<span class="token operator">/</span><span class="token string">'&lt;/p>'</span><span class="token punctuation">;</span>  <span class="token punctuation">{</span><span class="token operator">%</span> autoescape <span class="token boolean">false</span> <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span><span class="token punctuation">{</span> input <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endautoescape <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// &lt;p>Hello "you" &amp; 'them'&lt;/p></span>  <span class="token punctuation">{</span><span class="token operator">%</span> autoescape <span class="token boolean">true</span> <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span><span class="token punctuation">{</span> input <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endautoescape <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//&lt;p>Hello "you" &amp; 'them' &lt;/p></span>  <span class="token punctuation">{</span><span class="token operator">%</span> autoescape <span class="token boolean">true</span> <span class="token string">"js"</span> <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span><span class="token punctuation">{</span> input <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endautoescape <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// /u003Cp/u003EHello /u0022you/u0022 &amp; /u0027them/u0027/u003C/u005Cp/u003E </span></code></pre></li></ul><h4 id="set"><a href="#set" class="headerlink" title="set:"></a>set:</h4><ul><li><p>è®¾ç½®ä¸€ä¸ªå˜é‡ï¼Œåœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­å¤ç”¨</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> foo <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">%</span><span class="token punctuation">}</span>   <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> num <span class="token keyword">in</span> foo <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> num <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>     <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span> </code></pre></li></ul><h4 id="filter"><a href="#filter" class="headerlink" title="filter:"></a>filter:</h4><ul><li><p>å¯¹æ•´ä¸ªå—åº”ç”¨è¿‡æ»¤å™¨</p></li><li><p>å‚æ•°ï¼š</p></li><li><p>  filter_name: è¿‡æ»¤å™¨åå­— </p><p>  è‹¥å¹²ä¼ ç»™è¿‡æ»¤å™¨çš„å‚æ•° çˆ¶æ¨¡æ¿ç›¸å¯¹æ¨¡æ¿ root çš„ç›¸å¯¹è·¯å¾„</p></li><li><p>example:</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> filter uppercase <span class="token operator">%</span><span class="token punctuation">}</span>oh hi<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token operator">%</span> endfilter <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> filter replace <span class="token string">"."</span> <span class="token string">"!"</span> <span class="token string">"g"</span> <span class="token operator">%</span><span class="token punctuation">}</span>Hi<span class="token punctuation">.</span> My name is Paul<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> endfilter <span class="token operator">%</span><span class="token punctuation">}</span>  è¾“å‡º  OH HI<span class="token punctuation">,</span> PAUL  Hi<span class="token operator">!</span> My name is Paul<span class="token operator">!</span></code></pre><h4 id="spaceless"><a href="#spaceless" class="headerlink" title="spaceless:"></a>spaceless:</h4></li><li><p>å°è¯•ç§»é™¤htmlæ ‡ç­¾é—´çš„ç©ºæ ¼</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> spaceless <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> num <span class="token keyword">in</span> foo <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> loop<span class="token punctuation">.</span>index <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endspaceless <span class="token operator">%</span><span class="token punctuation">}</span>  è¾“å‡º  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></code></pre><h4 id="import"><a href="#import" class="headerlink" title="import:"></a>import:</h4></li><li><p>å…è®¸å¼•å…¥å¦ä¸€ä¸ªæ¨¡æ¿çš„å®è¿›å…¥å½“å‰ä¸Šä¸‹æ–‡</p></li><li><p>å‚æ•°ï¼š</p><p>  file: å¼•å…¥æ¨¡æ¿ç›¸å¯¹æ¨¡æ¿ root çš„ç›¸å¯¹è·¯å¾„ </p><p>  as: è¯­æ³•æ ‡è®° var: åˆ†é…ç»™å®çš„å¯è®¿é—®ä¸Šä¸‹æ–‡å¯¹è±¡</p></li><li><p>expample:</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">import</span> <span class="token string">'formmacros.html'</span> <span class="token keyword">as</span> form <span class="token operator">%</span><span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//{ this will run the input macro }</span>  <span class="token punctuation">{</span><span class="token punctuation">{</span> form<span class="token punctuation">.</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//{ this, however, will NOT output anything because the macro is scoped to the "form" object: }</span>  <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ul><h4 id="macro"><a href="#macro" class="headerlink" title="macro:"></a>macro:</h4><ul><li><p>åˆ›å»ºè‡ªå®šä¹‰å¯æœç”¨çš„ä»£ç æ®µ</p></li><li><p>å‚æ•°ï¼šâ€¦</p></li><li><p>ç”¨æˆ·å®šä¹‰</p></li><li><p>example:</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token punctuation">{</span><span class="token operator">%</span> macro input type name id label value error <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{{ name }}"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> label <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"{{ type }}"</span> name<span class="token operator">=</span><span class="token string">"{{ name }}"</span> id<span class="token operator">=</span><span class="token string">"{{ id }}"</span> value<span class="token operator">=</span><span class="token string">"{{ value }}"</span><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> error <span class="token operator">%</span><span class="token punctuation">}</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"error"</span><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span><span class="token operator">></span>    <span class="token punctuation">{</span><span class="token operator">%</span> endmacro <span class="token operator">%</span><span class="token punctuation">}</span></code></pre></li><li><p>ç„¶ååƒä¸‹é¢ä½¿ç”¨</p><pre class=" language-javascript"><code class="language-javascript">  <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>      <span class="token punctuation">{</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"fname"</span><span class="token punctuation">,</span> <span class="token string">"fname"</span><span class="token punctuation">,</span> <span class="token string">"First Name"</span><span class="token punctuation">,</span> fname<span class="token punctuation">.</span>value<span class="token punctuation">,</span> fname<span class="token punctuation">.</span>errors<span class="token punctuation">)</span> <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>      <span class="token punctuation">{</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"lname"</span><span class="token punctuation">,</span> <span class="token string">"lname"</span><span class="token punctuation">,</span> <span class="token string">"Last Name"</span><span class="token punctuation">,</span> lname<span class="token punctuation">.</span>value<span class="token punctuation">,</span> lname<span class="token punctuation">.</span>errors<span class="token punctuation">)</span> <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre></li></ul><p>è¾“å‡ºå¦‚ä¸‹</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"fname"</span><span class="token operator">></span>First Name<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"fname"</span> id<span class="token operator">=</span><span class="token string">"fname"</span> value<span class="token operator">=</span><span class="token string">"Paul"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"lname"</span><span class="token operator">></span>Last Name<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"lname"</span> id<span class="token operator">=</span><span class="token string">"lname"</span> value<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"error"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre><h2 id="å˜é‡è¿‡æ»¤å™¨"><a href="#å˜é‡è¿‡æ»¤å™¨" class="headerlink" title="å˜é‡è¿‡æ»¤å™¨"></a>å˜é‡è¿‡æ»¤å™¨</h2><ul><li><p>ç”¨äºä¿®æ”¹å˜é‡ã€‚å˜é‡åç§°åç”¨ | å­—ç¬¦åˆ†éš”æ·»åŠ è¿‡æ»¤å™¨ã€‚æ‚¨å¯ä»¥æ·»åŠ å¤šä¸ªè¿‡æ»¤å™¨ã€‚</p></li><li><p>example</p></li></ul><pre class=" language-javascript"><code class="language-javascript">    <span class="token punctuation">{</span><span class="token punctuation">{</span> name<span class="token operator">|</span>title <span class="token punctuation">}</span><span class="token punctuation">}</span> was born on <span class="token punctuation">{</span><span class="token punctuation">{</span> birthday<span class="token operator">|</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token string">'F jS, Y'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> and has <span class="token punctuation">{</span><span class="token punctuation">{</span> bikes<span class="token operator">|</span>length<span class="token operator">|</span><span class="token keyword">default</span><span class="token punctuation">(</span><span class="token string">"zero"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> bikes<span class="token punctuation">.</span></code></pre><ul><li>ä¹Ÿå¯ä»¥ä½¿ç”¨ filter æ ‡ç­¾æ¥ä¸ºå—å†…å®¹æ·»åŠ è¿‡æ»¤å™¨</li></ul><pre class=" language-javascript"><code class="language-javascript">    <span class="token punctuation">{</span><span class="token operator">%</span> filter upper <span class="token operator">%</span><span class="token punctuation">}</span>    oh hi<span class="token punctuation">,</span> paul    <span class="token punctuation">{</span><span class="token operator">%</span> endfilter <span class="token operator">%</span><span class="token punctuation">}</span></code></pre><h3 id="å†…ç½®è¿‡æ»¤å™¨"><a href="#å†…ç½®è¿‡æ»¤å™¨" class="headerlink" title="å†…ç½®è¿‡æ»¤å™¨"></a>å†…ç½®è¿‡æ»¤å™¨</h3><p><strong>add(value)</strong></p><p>ä½¿å˜é‡ä¸<code>value</code>ç›¸åŠ ï¼Œå¯ä»¥è½¬æ¢ä¸ºæ•°å€¼å­—ç¬¦ä¸²ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºæ•°å€¼ã€‚</p><p><strong>addslashes</strong> </p><p>ç”¨ <code>\</code> è½¬ä¹‰å­—ç¬¦ä¸²</p><p><strong>capitalize</strong> </p><p>å¤§å†™é¦–å­—æ¯</p><p><strong>date(format[, tzOffset])</strong> </p><ul><li><p>è½¬æ¢æ—¥æœŸä¸ºæŒ‡å®šæ ¼å¼</p><pre class=" language-javascript"><code class="language-javascript">  formatï¼š æ ¼å¼   tzOffsetï¼š æ—¶åŒº</code></pre></li></ul><p><strong>default(value)</strong> </p><p>é»˜è®¤å€¼ï¼ˆå¦‚æœå˜é‡ä¸º<code>undefined</code>ï¼Œ<code>nul</code>lï¼Œ<code>false</code>ï¼‰</p><p><strong>e</strong></p><p>åŒ<code>escape</code></p><p><strong>escape([type])</strong> </p><pre class=" language-javascript"><code class="language-javascript">    è½¬ä¹‰å­—ç¬¦    é»˜è®¤ï¼š <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token punctuation">,</span> <span class="token operator">></span><span class="token punctuation">,</span> "<span class="token punctuation">,</span> '     js<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token punctuation">,</span> <span class="token operator">></span><span class="token punctuation">,</span> "<span class="token punctuation">,</span> '<span class="token punctuation">,</span> <span class="token operator">=</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token punctuation">,</span> <span class="token punctuation">;</span></code></pre><p><strong>first</strong> </p><p>è¿”å›æ•°ç»„ç¬¬ä¸€ä¸ªå€¼</p><p><strong>join(glue)</strong> </p><p>åŒ<code>[].join</code></p><p><strong>json_encode([indent])</strong> </p><p>ç±»ä¼¼<code>JSON.stringify</code>, <code>indent</code>ä¸ºç¼©è¿›ç©ºæ ¼æ•°</p><p><strong>last</strong> </p><p>è¿”å›æ•°ç»„æœ€åä¸€ä¸ªå€¼</p><p><strong>length</strong> </p><p>è¿”å›å˜é‡çš„<code>length</code>ï¼Œå¦‚æœæ˜¯<code>object</code>ï¼Œè¿”å›<code>key</code>çš„æ•°é‡</p><p><strong>lower</strong> </p><p>åŒ<code>xxx.toLowerCase()</code></p><p><strong>raw</strong> </p><p>æŒ‡å®šè¾“å…¥ä¸ä¼šè¢«è½¬ä¹‰</p><p><strong>replace(search, replace[, flags])</strong> </p><p>åŒ<code>**xxx.replacexxx</code></p><p><strong>reverse</strong> </p><p>ç¿»è½¬æ•°ç»„</p><p><strong>striptags</strong> </p><p>å»é™¤<code>html/xm</code>læ ‡ç­¾</p><p><strong>title</strong> </p><p>å¤§å†™é¦–å­—æ¯</p><p><strong>uniq</strong> </p><p>æ•°ç»„å»é‡</p><p><strong>upper</strong> </p><p>åŒ<code>xxx.toUpperCase</code></p><p><strong>url_encode</strong> </p><p>åŒ<code>encodeURIComponent</code></p><p><strong>url_decode</strong> </p><p>åŒ<code>decodeURIComponemt</code></p><h3 id="è‡ªå®šä¹‰è¿‡æ»¤å™¨"><a href="#è‡ªå®šä¹‰è¿‡æ»¤å™¨" class="headerlink" title="è‡ªå®šä¹‰è¿‡æ»¤å™¨"></a>è‡ªå®šä¹‰è¿‡æ»¤å™¨</h3><p>åˆ›å»ºä¸€ä¸ª myfilter.js ç„¶åå¼•å…¥åˆ° Swigçš„åˆå§‹åŒ–å‡½æ•°ä¸­</p><pre class=" language-javascript"><code class="language-javascript">    swig<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>        <span class="token punctuation">{</span> filters<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'myfilters'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>åœ¨ myfilter.js é‡Œï¼Œæ¯ä¸€ä¸ª<code>filter</code>æ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªç®€å•çš„ jsæ–¹æ³•ï¼Œä¸‹ä¾‹æ˜¯ä¸€ä¸ªç¿»è½¬å­—ç¬¦ä¸²çš„ <code>filter</code>ï¼š</p><pre class=" language-javascript"><code class="language-javascript">    exports<span class="token punctuation">.</span>myfilter <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> input<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sphelit</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>ä½ çš„ <code>filter</code> ä¸€æ—¦è¢«å¼•å…¥ï¼Œä½ å°±å¯ä»¥å‘ä¸‹é¢ä¸€æ ·ä½¿ç”¨ï¼š</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token punctuation">{</span><span class="token punctuation">{</span> name<span class="token operator">|</span>myfilter <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> filter myfilter <span class="token operator">%</span><span class="token punctuation">}</span>        I shall be filtered    <span class="token punctuation">{</span><span class="token operator">%</span> endfilter <span class="token operator">%</span><span class="token punctuation">}</span></code></pre><p>ä½ ä¹Ÿå¯ä»¥åƒä¸‹é¢ä¸€æ ·ç»™ <code>filter</code> ä¼ å‚æ•°ï¼š</p><pre class=" language-javascript"><code class="language-javascript">    exports<span class="token punctuation">.</span>prefix <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> prefix<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> prefix<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> input<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">{</span><span class="token punctuation">{</span> name<span class="token operator">|</span><span class="token function">prefix</span><span class="token punctuation">(</span><span class="token string">'my prefix'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> filter prefix <span class="token string">'my prefix'</span> <span class="token operator">%</span><span class="token punctuation">}</span>        I will be prefixed <span class="token keyword">with</span> <span class="token string">"my prefix"</span><span class="token punctuation">.</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endfilter <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> filter prefix foo <span class="token operator">%</span><span class="token punctuation">}</span>        I will be prefixed <span class="token keyword">with</span> the value stored to <span class="token template-string"><span class="token string">`foo`</span></span><span class="token punctuation">.</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endfilter <span class="token operator">%</span><span class="token punctuation">}</span></code></pre><h3 id="æ¨¡æ¿ç»§æ‰¿"><a href="#æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="æ¨¡æ¿ç»§æ‰¿:"></a>æ¨¡æ¿ç»§æ‰¿:</h3><h4 id="Swig-ä½¿ç”¨-extends-å’Œ-block-æ¥å®ç°æ¨¡æ¿ç»§æ‰¿"><a href="#Swig-ä½¿ç”¨-extends-å’Œ-block-æ¥å®ç°æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="Swig ä½¿ç”¨ extends å’Œ block æ¥å®ç°æ¨¡æ¿ç»§æ‰¿"></a>Swig ä½¿ç”¨ extends å’Œ block æ¥å®ç°æ¨¡æ¿ç»§æ‰¿</h4><ul><li>example:</li></ul><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//layout.html</span>    <span class="token operator">&lt;</span><span class="token operator">!</span>doctype html<span class="token operator">></span>    <span class="token operator">&lt;</span>html<span class="token operator">></span>        <span class="token operator">&lt;</span>head<span class="token operator">></span>            <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>title<span class="token operator">></span>                <span class="token punctuation">{</span><span class="token operator">%</span> block title <span class="token operator">%</span><span class="token punctuation">}</span>                    My Site                <span class="token punctuation">{</span><span class="token operator">%</span> endblock <span class="token operator">%</span><span class="token punctuation">}</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>            <span class="token punctuation">{</span><span class="token operator">%</span> block head <span class="token operator">%</span><span class="token punctuation">}</span>            <span class="token punctuation">{</span><span class="token operator">%</span> endblock <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>        <span class="token operator">&lt;</span>body<span class="token operator">></span>            <span class="token punctuation">{</span><span class="token operator">%</span> block content <span class="token operator">%</span><span class="token punctuation">}</span>            <span class="token punctuation">{</span><span class="token operator">%</span> endblock <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span> </code></pre><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//index.html</span>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">extends</span> <span class="token string">'./layout.html'</span> <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> block title <span class="token operator">%</span><span class="token punctuation">}</span>        My Page    <span class="token punctuation">{</span><span class="token operator">%</span> endblock <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> block head <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token punctuation">{</span><span class="token operator">%</span> parent <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> endblock <span class="token operator">%</span><span class="token punctuation">}</span>    <span class="token punctuation">{</span><span class="token operator">%</span> block content <span class="token operator">%</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span>p<span class="token operator">></span>This is just an awesome page<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>        <span class="token operator">&lt;</span>h1<span class="token operator">></span>hello<span class="token punctuation">,</span>lego<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>        <span class="token operator">&lt;</span>script<span class="token operator">></span>            <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'pages/index/main'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>    <span class="token punctuation">{</span><span class="token operator">%</span> endblock <span class="token operator">%</span><span class="token punctuation">}</span></code></pre><h4 id="swigæ¨¡æ¿ç»è¿‡ç¼–è¯‘åï¼š"><a href="#swigæ¨¡æ¿ç»è¿‡ç¼–è¯‘åï¼š" class="headerlink" title="swigæ¨¡æ¿ç»è¿‡ç¼–è¯‘åï¼š"></a>swigæ¨¡æ¿ç»è¿‡ç¼–è¯‘åï¼š</h4><pre class=" language-javascript"><code class="language-javascript">    <span class="token operator">&lt;</span><span class="token operator">!</span>doctype html<span class="token operator">></span>    <span class="token operator">&lt;</span>html<span class="token operator">></span>        <span class="token operator">&lt;</span>head<span class="token operator">></span>            <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>title<span class="token operator">></span>My Page<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>        <span class="token operator">&lt;</span>body<span class="token operator">></span>            <span class="token operator">&lt;</span>p<span class="token operator">></span>This is just an awesome page<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>            <span class="token operator">&lt;</span>h1<span class="token operator">></span>hello<span class="token punctuation">,</span>lego<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>            <span class="token operator">&lt;</span>p<span class="token operator">></span>test<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>            <span class="token operator">&lt;</span>script<span class="token operator">></span>                <span class="token comment" spellcheck="true">//require('pages/index/main');</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><h3 id="swigæ¨¡æ¿åœ¨fis3ä¸­çš„åº”ç”¨"><a href="#swigæ¨¡æ¿åœ¨fis3ä¸­çš„åº”ç”¨" class="headerlink" title="swigæ¨¡æ¿åœ¨fis3ä¸­çš„åº”ç”¨"></a>swigæ¨¡æ¿åœ¨fis3ä¸­çš„åº”ç”¨</h3><ul><li><p>swigçš„æ¨¡æ¿ç»§æ‰¿å¯ä»¥æ›´å¥½çš„å¸®æˆ‘ä»¬ç»„ç»‡ä»£ç ç»“æ„ï¼Œæ›´å¥½çš„å¤ç”¨ä»£ç ã€‚ç±»ä¼¼jelloæ‰©å±•çš„velocityæ ‡ç­¾ã€‚</p></li><li><p>å¦‚ä¸Šä¸ªä¾‹å­ï¼Œå¯ä»¥å°†å…¬ç”¨ä»£ç å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä½œä¸ºæ¯ç‰ˆé¡µï¼Œéœ€è¦çš„é¡µé¢å°±ç»§æ‰¿è¿™ä¸ªé¡µé¢ï¼Œè€Œä¸”é¡µé¢ä¸­çš„blockåˆå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬è‡ªå®šä¹‰éœ€è¦çš„å†…å®¹ã€‚<br>åœ¨fis3æ„å»ºä¸­ä½¿ç”¨æ—¶ï¼Œè°ƒç”¨swigç¼–è¯‘æ’ä»¶ï¼Œå°†swigæ ‡ç­¾è§£ææˆæ­£å¸¸çš„htmlæ–‡ä»¶å³å¯ã€‚</p></li><li><p>gitHubDemo:<a href="https://github.com/duanweiqiang/web">https://github.com/duanweiqiang/web</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å…¨ç«™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nodeJS </tag>
            
            <tag> express </tag>
            
            <tag> swig </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git å¸¸ç”¨å‘½ä»¤</title>
      <link href="2020/02/12/git-use/"/>
      <url>2020/02/12/git-use/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> å‘½ä»¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo é…ç½®æ•™ç¨‹</title>
      <link href="2020/02/12/hello-world/"/>
      <url>2020/02/12/hello-world/</url>
      
        <content type="html"><![CDATA[<p>åŸåšå®¢å‡ºå¤„ï¼š<a href="https://segmentfault.com/a/1190000017986794">https://segmentfault.com/a/1190000017986794</a><br>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åšå®¢æœ‰ç¬¬ä¸‰æ–¹å¹³å°ï¼Œä¹Ÿå¯ä»¥è‡ªå»ºï¼Œæ¯”è¾ƒæ—©çš„æœ‰åšå®¢å›­ã€CSDNï¼Œè¿‘å‡ å¹´æ–°å…´çš„ä¹Ÿæ¯”è¾ƒå¤šè¯¸å¦‚ï¼šWordPressã€segmentFaultã€ç®€ä¹¦ã€æ˜é‡‘ã€çŸ¥ä¹ä¸“æ ã€Github Page ç­‰ç­‰ã€‚</p><p>è¿™æ¬¡æˆ‘è¦è¯´çš„å°±æ˜¯ Github Page + Hexo æ­å»ºä¸ªäººåšå®¢çš„æ–¹å¼ï¼Github Page æ˜¯ Github æä¾›çš„ä¸€ç§å…è´¹çš„é™æ€ç½‘é¡µæ‰˜ç®¡æœåŠ¡ï¼ˆæ‰€ä»¥æƒ³æƒ³å…è´¹çš„ç©ºé—´ä¸ç”¨ä¹ŸæŒºæµªè´¹çš„å“ˆå“ˆå“ˆï¼‰ï¼Œå¯ä»¥ç”¨æ¥æ‰˜ç®¡åšå®¢ã€é¡¹ç›®å®˜ç½‘ç­‰é™æ€ç½‘é¡µã€‚æ”¯æŒ Jekyllã€Hugoã€Hexo ç¼–è¯‘é™æ€èµ„æºï¼Œè¿™æ¬¡æˆ‘ä»¬çš„ä¸»è§’å°±æ˜¯ Hexo äº†ï¼Œå…·ä½“çš„å†…å®¹ä¸‹é¢åœ¨æ–‡ç« å†…ä»‹ç»ã€‚</p><h2 id="å‡†å¤‡ç¯å¢ƒ"><a href="#å‡†å¤‡ç¯å¢ƒ" class="headerlink" title="å‡†å¤‡ç¯å¢ƒ"></a>å‡†å¤‡ç¯å¢ƒ</h2><p>å‡†å¤‡ node å’Œ git ç¯å¢ƒï¼Œ<br>é¦–å…ˆï¼Œå®‰è£… NodeJSï¼Œå› ä¸º Hexo æ˜¯åŸºäº Node.js é©±åŠ¨çš„ä¸€æ¬¾åšå®¢æ¡†æ¶ï¼Œç›¸æ¯”èµ·å‰é¢æåˆ°è¿‡çš„ Jekyll æ¡†æ¶æ›´å¿«æ›´ç®€æ´ï¼Œå› ä¸ºå¤©*æœç½‘ç»œè¢«å¢™çš„åŸå› å°è¯•è¿‡å®‰è£… Jekyll å¤±è´¥è€Œæ”¾å¼ƒäº†ã€‚<br>ç„¶åï¼Œå®‰è£… gitï¼Œä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºé¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶ç®¡ç†ï¼Œä½œè€…æ˜¯ Linux ä¹‹çˆ¶ã€‚å¦‚æœ Git è¿˜ä¸ç†Ÿæ‚‰å¯ä»¥å‚è€ƒå»–é›ªå³°å¤§ç¥çš„ Git æ•™ç¨‹ã€‚</p><p>ä¸¤ä¸ªå·¥å…·ä¸åŒçš„å¹³å°å®‰è£…æ–¹æ³•æœ‰æ‰€ä¸ä¸€æ ·ï¼Œå¯è‡ªè¡Œäº†è§£æŒ‰æ­¥éª¤å®‰è£…ï¼Œè¿™é‡Œä¸è¯¦è¿°äº†ã€‚å®‰è£…æˆåŠŸåæ‰“å¼€git bashï¼ˆWindownsï¼‰æˆ–è€…ç»ˆç«¯ï¼ˆMacï¼‰ï¼Œä¸‹æ–¹ä¸­å°†ç»Ÿä¸€ç§°ä¸ºå‘½ä»¤è¡Œã€‚<br>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ç›¸åº”å‘½ä»¤éªŒè¯æ˜¯å¦æˆåŠŸï¼Œå¦‚æœæˆåŠŸä¼šæœ‰ç›¸åº”çš„ç‰ˆæœ¬å·ã€‚</p><pre><code>git versionnode -vnpm -v</code></pre><h3 id="å®‰è£…-Hexo"><a href="#å®‰è£…-Hexo" class="headerlink" title="å®‰è£… Hexo"></a>å®‰è£… Hexo</h3><p>å¦‚æœä»¥ä¸Šç¯å¢ƒå‡†å¤‡å¥½äº†å°±å¯ä»¥ä½¿ç”¨ npm å¼€å§‹å®‰è£… Hexo äº†ã€‚ä¹Ÿå¯æŸ¥çœ‹ Hexo çš„è¯¦ç»†æ–‡æ¡£ã€‚<br>åœ¨å‘½ä»¤è¡Œè¾“å…¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><pre><code>npm install -g hexo-cli</code></pre><p>å®‰è£… Hexo å®Œæˆåï¼Œå†æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚</p><pre><code>hexo init myBlog//æ–‡ä»¶å¤¹åï¼Œå¯è‡ªå®šä¹‰cd myBlognpm install</code></pre><p>æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š</p><pre><code>.â”œâ”€â”€ _config.yml # ç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚ â”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffolds # æ¨¡ç‰ˆæ–‡ä»¶å¤¹â”œâ”€â”€ source  # èµ„æºæ–‡ä»¶å¤¹ï¼Œé™¤ _posts æ–‡ä»¶ï¼Œå…¶ä»–ä»¥ä¸‹åˆ’çº¿_å¼€å¤´çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ä¸ä¼šè¢«ç¼–è¯‘æ‰“åŒ…åˆ°publicæ–‡ä»¶å¤¹|   â”œâ”€â”€ _drafts # è‰ç¨¿æ–‡ä»¶|   â””â”€â”€ _posts # æ–‡ç« Markdowmæ–‡ä»¶ â””â”€â”€ themes  # ä¸»é¢˜æ–‡ä»¶å¤¹</code></pre><p>å¥½äº†ï¼Œå¦‚æœä¸Šé¢çš„å‘½ä»¤éƒ½æ²¡æŠ¥é”™çš„è¯ï¼Œå°±æ­å–œäº†ï¼Œè¿è¡Œ hexo s å‘½ä»¤ï¼Œå…¶ä¸­ s æ˜¯ server çš„ç¼©å†™ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://localhost:4000">http://localhost:4000</a> å›è½¦å°±å¯ä»¥é¢„è§ˆæ•ˆæœäº†ã€‚</p><pre><code>hexo sæˆ–è€… hexo server</code></pre><p>è‡³æ­¤ï¼Œä½ æœ¬åœ°çš„åšå®¢å°±å·²ç»æ­å»ºæˆåŠŸï¼Œæ¥ä¸‹æ¥å°±æ˜¯éƒ¨ç½²åˆ° Github Page äº†ã€‚</p><h2 id="æ³¨å†Œ-Github"><a href="#æ³¨å†Œ-Github" class="headerlink" title="æ³¨å†Œ Github"></a>æ³¨å†Œ Github</h2><p>ï¼ˆè‡ªè¡Œbaiduã€googleï¼‰</p><h2 id="æ–°å»ºä»“åº“"><a href="#æ–°å»ºä»“åº“" class="headerlink" title="æ–°å»ºä»“åº“"></a>æ–°å»ºä»“åº“</h2><p>ç‚¹å‡» Start project æˆ–è€…ä¸‹é¢çš„ new repository åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“</p><ul><li>æ³¨æ„ç‚¹æ¥äº†ï¼ŒGithub ä»…èƒ½ä½¿ç”¨ä¸€ä¸ªåŒåä»“åº“çš„ä»£ç æ‰˜ç®¡ä¸€ä¸ªé™æ€ç«™ç‚¹ï¼Œè¿™ä¸ªç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹æ²¡è¯´åˆ°çš„ã€‚</li><li>è¿™é‡Œæœ‰ä¸ªç¡¬æ€§è¦æ±‚ï¼šrepositoryçš„åç§°å¿…é¡»è¦â€ç”¨æˆ·å.github.ioâ€</li></ul><h2 id="é…ç½®-SSH-key"><a href="#é…ç½®-SSH-key" class="headerlink" title="é…ç½® SSH key"></a>é…ç½® SSH key</h2><p>è¦ä½¿ç”¨ git å·¥å…·é¦–å…ˆè¦é…ç½®ä¸€ä¸‹SSH keyï¼Œä¸ºéƒ¨ç½²æœ¬åœ°åšå®¢åˆ° Github åšå‡†å¤‡ã€‚</p><p>æ‰“å¼€å‘½ä»¤è¡Œè¾“å…¥ cd ~/.ssh å¦‚æœæ²¡æŠ¥é”™æˆ–è€…æç¤ºä»€ä¹ˆçš„è¯´æ˜å°±æ˜¯ä»¥å‰ç”Ÿæˆè¿‡çš„ï¼Œç›´æ¥ä½¿ç”¨ cat ~/.ssh/id_rsa.pub å‘½ä»¤å°±æ˜¯å¯ä»¥æŸ¥çœ‹æœ¬æœºä¸Šçš„ SSH key äº†ã€‚</p><pre><code>cat ~/.ssh/id_rsa.pub</code></pre><h3 id="å¦‚æœä¹‹å‰æ²¡æœ‰åˆ›å»ºï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…¨å±€é…ç½®ä¸€ä¸‹æœ¬åœ°è´¦æˆ·ï¼š"><a href="#å¦‚æœä¹‹å‰æ²¡æœ‰åˆ›å»ºï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…¨å±€é…ç½®ä¸€ä¸‹æœ¬åœ°è´¦æˆ·ï¼š" class="headerlink" title="å¦‚æœä¹‹å‰æ²¡æœ‰åˆ›å»ºï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…¨å±€é…ç½®ä¸€ä¸‹æœ¬åœ°è´¦æˆ·ï¼š"></a>å¦‚æœä¹‹å‰æ²¡æœ‰åˆ›å»ºï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…¨å±€é…ç½®ä¸€ä¸‹æœ¬åœ°è´¦æˆ·ï¼š</h3><pre><code>git config --global user.name &quot;ç”¨æˆ·å&quot;git config --global user.email &quot;é‚®ç®±åœ°å€&quot;</code></pre><p>ç„¶åå¼€å§‹ç”Ÿæˆå¯†é’¥ SSH key</p><pre><code>ssh-keygen -t rsa -C &#39;ä¸Šé¢çš„é‚®ç®±&#39;</code></pre><p>æŒ‰ç…§æç¤ºå®Œæˆä¸‰æ¬¡å›è½¦ï¼Œå³å¯ç”Ÿæˆ ssh keyã€‚é€šè¿‡æŸ¥çœ‹ ~/.ssh/id_rsa.pub æ–‡ä»¶å†…å®¹ï¼Œè·å–åˆ°ä½ çš„ SSH key</p><p>-é¦–æ¬¡ä½¿ç”¨è¿˜éœ€è¦ç¡®è®¤å¹¶æ·»åŠ ä¸»æœºåˆ°æœ¬æœºSSHå¯ä¿¡åˆ—è¡¨ã€‚è‹¥è¿”å› Hi xxx! Youâ€™ve successfully authenticated, but GitHub does not provide shell access. å†…å®¹ï¼Œåˆ™è¯æ˜æ·»åŠ æˆåŠŸã€‚</p><pre><code>ssh -T git@github.com</code></pre><p>åˆ°è¿™è¿˜æ²¡å®Œï¼Œè¿˜è¦ç™»å½• Github ä¸Šæ·»åŠ åˆšåˆšç”Ÿæˆçš„SSH key(è‡ªè¡Œbaiduã€google)ï¼›</p><h2 id="éƒ¨ç½²åˆ°-Github"><a href="#éƒ¨ç½²åˆ°-Github" class="headerlink" title="éƒ¨ç½²åˆ° Github"></a>éƒ¨ç½²åˆ° Github</h2><p>æ­¤æ—¶ï¼Œæœ¬åœ°å’ŒGithubçš„å·¥ä½œåšå¾—å·®ä¸äº†ï¼Œæ˜¯æ—¶å€™æŠŠå®ƒä»¬ä¸¤ä¸ªè¿æ¥èµ·æ¥äº†ã€‚ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹å®˜ç½‘çš„éƒ¨ç½²æ•™ç¨‹ã€‚<br>å…ˆä¸ç€æ€¥ï¼Œéƒ¨ç½²ä¹‹å‰è¿˜éœ€è¦ä¿®æ”¹é…ç½®å’Œå®‰è£…éƒ¨ç½²æ’ä»¶ã€‚</p><p>ç¬¬ä¸€ï¼šæ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ _config.yml é…ç½®æ–‡ä»¶é…ç½®å‚æ•°ã€‚æ‹‰åˆ°æ–‡ä»¶æœ«å°¾ï¼Œå¡«ä¸Šå¦‚ä¸‹é…ç½®ï¼ˆä¹Ÿå¯åŒæ—¶éƒ¨ç½²åˆ°å¤šä¸ªä»“åº“ï¼Œåé¢å†è¯´ï¼‰ï¼š</p><pre><code>deploy:  type: git  repo:     github: https://github.com/duanweiqiang/duanweiqiang.github.io.git  branch: master</code></pre><p>ç¬¬äºŒï¼šè¦å®‰è£…ä¸€ä¸ªéƒ¨ç½²æ’ä»¶ hexo-deployer-gitã€‚</p><pre><code>npm install hexo-deployer-git --save</code></pre><p>æœ€åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥éƒ¨ç½²ä¸Šä¼ å•¦ï¼Œä»¥ä¸‹ g æ˜¯ generate ç¼©å†™ï¼Œd æ˜¯ deploy ç¼©å†™ï¼š</p><pre><code>hexo g -d//ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶éƒ¨ç½²åˆ°GitHub</code></pre><p>ç¨ç­‰ä¸€ä¼šï¼Œåœ¨æµè§ˆå™¨è®¿é—®ç½‘å€ï¼š https://ä½ çš„ç”¨æˆ·å.github.io å°±ä¼šçœ‹åˆ°ä½ çš„åšå®¢å•¦ï¼ï¼</p><h2 id="å†™åšå®¢"><a href="#å†™åšå®¢" class="headerlink" title="å†™åšå®¢"></a>å†™åšå®¢</h2><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span>//åšå®¢åæ–‡ä»¶å¤¹</code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="ä½¿ç”¨-Generate-å‘½ä»¤ç”Ÿæˆ-static-files"><a href="#ä½¿ç”¨-Generate-å‘½ä»¤ç”Ÿæˆ-static-files" class="headerlink" title="ä½¿ç”¨ Generate å‘½ä»¤ç”Ÿæˆ static files"></a>ä½¿ç”¨ Generate å‘½ä»¤ç”Ÿæˆ static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate/hexo g</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="å°†æœ¬åœ°å‘½ä»¤æ¨é€åˆ°gitä»“åº“"><a href="#å°†æœ¬åœ°å‘½ä»¤æ¨é€åˆ°gitä»“åº“" class="headerlink" title="å°†æœ¬åœ°å‘½ä»¤æ¨é€åˆ°gitä»“åº“"></a>å°†æœ¬åœ°å‘½ä»¤æ¨é€åˆ°gitä»“åº“</h3><pre class=" language-bash"><code class="language-bash">$ hexo clean$ hexo deploy/hexo g -d</code></pre><p>éƒ¨ç½²å‰æœ€å¥½èƒ½å…ˆæ‰§è¡Œä¸€ä¸‹ hexo clean å‘½ä»¤ï¼Œæ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœä½ çš„æ–‡ç« æš‚æ—¶ä¸å‘å¸ƒå¯ä»¥å…ˆä¿å­˜åœ¨è‰ç¨¿é‡Œé¢ã€‚ç”Ÿæˆè‰ç¨¿çš„æ–¹æ³•å’Œæ–‡ç« å·®ä¸å¤š hexo new draft â€œæ–‡ç« æ ‡é¢˜â€ï¼Œç”Ÿæˆåä¼šåœ¨ /source/_drafts é‡Œçœ‹åˆ°ä½ çš„è‰ç¨¿æ–‡ç« ã€‚å½“ä½ æƒ³å‘å¸ƒæ—¶åªè¦æ‰§è¡Œ publish å‘½ä»¤å³å¯å‘å¸ƒåˆ°åšå®¢ã€‚</p><pre><code>$ hexo publish [layout] &lt;filename&gt;</code></pre><h2 id="é™æ€å›¾åºŠ"><a href="#é™æ€å›¾åºŠ" class="headerlink" title="é™æ€å›¾åºŠ"></a>é™æ€å›¾åºŠ</h2><p>æ–‡ç« é‡Œç”¨çš„ä¸€äº›å›¾ç‰‡æ”¾å“ªé‡Œæ¯”è¾ƒå¥½å‘¢ï¼Ÿæ¯”å¯¹äº†å‡ ä¸ªå…è´¹çš„å›¾åºŠä¸ƒç‰›ã€sm.mså’Œå¾®åšå›¾åºŠï¼Œæœ€åæˆ‘å†³å®šé€‰ç”¨å¾®åšçš„ï¼Œä¸ƒç‰›çš„å¥½åƒæœ€è¿‘æ˜¯æµ‹è¯•åŸŸåä¸èƒ½ç”¨äº†ï¼Œè™½ç„¶æœ‰è§£å†³æ–¹æ¡ˆï¼Œä½†æ€•ä»¥åè¿˜ä¼šæœ‰å…¶ä»–é—®é¢˜ï¼Œæ‰€ä»¥æ”¾å¼ƒå•¦ï¼Œæ¯•ç«Ÿå…è´¹çš„ä¸œè¥¿æ‰æ˜¯æœ€è´µçš„ï¼Œç‰¹åˆ«åƒäº‘å‚¨å­˜è¿™ç§ä¸œè¥¿ï¼Œæ„Ÿè§‰éƒ½æ˜¯é’±é’±é’±ï¼Œå“ˆå“ˆå“ˆï¼Œä¸‡ä¸€æœ‰ä¸€å¤©ä¸è®©ç”¨å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œå¦å¤–sm.msè¿™ä¸ªå£ç¢‘ä¹Ÿä¸é”™ï¼Œå¥½åƒæ˜¯ä¸ªäººå¼€å‘çš„ï¼Œå…è´¹å¥½å‡ å¹´äº†ï¼Œæœ‰åŒæ ·çš„æ‹…å¿ƒå°±æ”¾å¼ƒäº†ï¼Œæœ€å¥½æŠ±äº†æ–°æµªçš„å¤§è…¿ï¼Œæ„Ÿè§‰æ–°æµªåº”è¯¥ä¼šé è°±ä¸€ç‚¹å§ï¼Œå”¯ä¸€çš„é—®é¢˜å°±æ˜¯å¦‚æœæœ‰ä¸€å¤©æ–°æµªç¦æ­¢å¤–é“¾çš„è¯å°±ä¸è¡Œäº†ï¼Œå†çœ‹å§ã€‚</p><p>å¯ä»¥å»chromeç½‘ä¸Šåº”ç”¨å•†åº—ä¸‹è½½ä¸€ä¸ªå«å¾®åšå›¾åºŠçš„chromeæ’ä»¶ï¼Œä¸‹å›¾æ˜¯æ’ä»¶çš„ç•Œé¢ï¼Œæ“ä½œç®€å•æ–¹ä¾¿ï¼Œå…·ä½“ä½¿ç”¨çœ‹è¯´æ˜å°±å¯ä»¥å•¦ï¼Œæ¯”è¾ƒç®€å•ï¼Œè¿™æ ·å›¾åºŠçš„é—®é¢˜å°±è§£å†³äº†ã€‚</p><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é­”æ–¹è¿˜åŸæ–¹æ³•</title>
      <link href="2020/01/13/moFang/"/>
      <url>2020/01/13/moFang/</url>
      
        <content type="html"><![CDATA[<h2 id="é­”æ–¹è¿˜åŸ"><a href="#é­”æ–¹è¿˜åŸ" class="headerlink" title="é­”æ–¹è¿˜åŸ"></a>é­”æ–¹è¿˜åŸ</h2><p>ä¸‰é˜¶é­”æ–¹è¿˜åŸçš„åŸåˆ™æ˜¯ï¼Œåˆ†å±‚è¿˜åŸå‘ï¼Œå³å…ˆè¿˜åŸç¬¬ä¸€å±‚ï¼Œå†ç¬¬äºŒå±‚ç¬¬ä¸‰å±‚çš„åŸåˆ™ã€‚<br>ä¸‹é¢æˆ‘ä»¬è¯¦ç»†ä»‹ç»å„å±‚çš„è¿˜åŸæ–¹æ³•</p><h3 id="ç¬¬ä¸€å±‚è¿˜åŸ"><a href="#ç¬¬ä¸€å±‚è¿˜åŸ" class="headerlink" title="ç¬¬ä¸€å±‚è¿˜åŸ"></a>ç¬¬ä¸€å±‚è¿˜åŸ</h3><ul><li><p>ç¬¬ä¸€å±‚è¿˜åŸæ˜¯æœ€ç®€å•çš„ï¼Œç½‘ä¸Šçš„æ–¹æ³•ä¹Ÿæ˜¯æœ‰å¾ˆå¤šç§ï¼Œä¸ç”¨æ–¹æ³•è‡ªå·±ä¹Ÿå¯ä»¥å®ç°ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸åšè®²è§£</p></li><li><p>è¿™é‡Œç»™å¤§å®¶æ¨ä»‹å‡ ä¸ªé“¾æ¥ï¼Œæœ‰å¿…è¦å°±è‡ªè¡ŒæŸ¥è€ƒ</p><p>  1.<a href="https://baijiahao.baidu.com/s?id=1586020045673476817&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1586020045673476817&amp;wfr=spider&amp;for=pc</a><br>  2.<a href="https://www.bilibili.com/video/av45061142">https://www.bilibili.com/video/av45061142</a></p></li></ul><h3 id="ç¬¬äºŒå±‚è¿˜åŸ"><a href="#ç¬¬äºŒå±‚è¿˜åŸ" class="headerlink" title="ç¬¬äºŒå±‚è¿˜åŸ"></a>ç¬¬äºŒå±‚è¿˜åŸ</h3><ul><li>ç¬¬äºŒå±‚çš„åŸåˆ™æ˜¯å€’Tå­—å‹æ–¹æ³•</li></ul><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1geavh81reuj208a08h74p.jpg" alt="ç¤ºä¾‹.png"></p><blockquote><p><strong><em>å…ˆé€¼é€¼ä¸€ä¸‹å£è¯€é‡Œçš„è§„åˆ™ï¼š</em></strong><br>Uï¼šä»£è¡¨ up é¡ºæ—¶é’ˆè½¬ 90åº¦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uâ€™ï¼šä»£è¡¨up é€†æ—¶é’ˆè½¬ 90åº¦&nbsp;&nbsp;&nbsp;&nbsp;U2ï¼šä»£è¡¨up é¡ºæ—¶é’ˆè½¬ 180åº¦<br>Rï¼šä»£è¡¨ right é¡ºæ—¶é’ˆè½¬ 90åº¦&nbsp;&nbsp;Râ€™ï¼šä»£è¡¨ right é€†æ—¶é’ˆè½¬ 90åº¦<br>Lï¼šä»£è¡¨ left é¡ºæ—¶é’ˆè½¬ 90åº¦&nbsp;&nbsp;&nbsp;&nbsp;Lâ€™ï¼šä»£è¡¨ left é€†æ—¶é’ˆè½¬ 90åº¦<br>Fï¼šä»£è¡¨ face é¡ºæ—¶é’ˆè½¬ 90åº¦&nbsp;&nbsp;&nbsp;Fâ€™ï¼šä»£è¡¨ face é€†æ—¶é’ˆè½¬ 90åº¦</p></blockquote><p>é€šè¿‡ä»¥ä¸‹ä¸¤ç§å°±å¯ä»¥å®ç°ç¬¬äºŒå±‚</p><h4 id="1-æƒ…å†µä¸€"><a href="#1-æƒ…å†µä¸€" class="headerlink" title="(1)æƒ…å†µä¸€"></a>(1)æƒ…å†µä¸€</h4><blockquote><p>å£è¯€ï¼šU -&gt; R -&gt; Uâ€™ -&gt; Râ€™ -&gt; Uâ€™ -&gt; Fâ€™ -&gt; U -&gt; F</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1geavamcwvyj208o08jaaf.jpg" alt="ç¬¬äºŒå±‚è¿˜åŸ 1.png"></p><h4 id="2-æƒ…å†µäºŒ"><a href="#2-æƒ…å†µäºŒ" class="headerlink" title="(2)æƒ…å†µäºŒ"></a>(2)æƒ…å†µäºŒ</h4><blockquote><p>å£è¯€ï¼šUâ€™  Fâ€™  U  F  U  R  Uâ€™  Râ€™</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1geav9buapsj208a08h3yx.jpg" alt="ç¬¬äºŒå±‚è¿˜åŸ 2.png"></p><h4 id="ç¬¬äºŒå±‚æˆå“"><a href="#ç¬¬äºŒå±‚æˆå“" class="headerlink" title="ç¬¬äºŒå±‚æˆå“"></a>ç¬¬äºŒå±‚æˆå“</h4><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1geavqtrpo6j206y081aae.jpg" alt="ç¬¬äºŒå±‚æˆå“ 3.png"></p><h3 id="ç¬¬ä¸‰å±‚è¿˜åŸ"><a href="#ç¬¬ä¸‰å±‚è¿˜åŸ" class="headerlink" title="ç¬¬ä¸‰å±‚è¿˜åŸ"></a>ç¬¬ä¸‰å±‚è¿˜åŸ</h3><p>ç¬¬ä¸‰å±‚ä¸€å…±åˆ†4ä¸ªæ­¥éª¤æ¥è¿˜åŸ</p><h4 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h4><blockquote><p>è¯¥æ­¥éª¤æ˜¯å®ç°é¡¶éƒ¨å‡ºç°â€œ+â€æ ¼å­ï¼Œå…¶ä»–è‰²å—ä¸è€ƒè™‘<br>å£è¯€ï¼šF -&gt; U -&gt; R -&gt; Uâ€™ -&gt; Râ€™ -&gt; Fâ€™</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1gebkyytazvj20zy0ceafg.jpg" alt="åå­—.jpg"></p><h4 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h4><blockquote><p>è¯¥æ­¥éª¤æ˜¯å®ç°é¡¶éƒ¨é¢åŒè‰²ï¼Œå…¶ä»–ä¾§é¢è‰²å—ä¸è€ƒè™‘<br>å£è¯€ï¼šRâ€™ -&gt; Uâ€™ -&gt; R -&gt; Uâ€™ -&gt; Râ€™ -&gt; U2 -&gt; R<br>è¯¥æ­¥éª¤éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½†ä½¿ç”¨ä¸Šé¢æ­¥éª¤å‡ºç°é¡¶éƒ¨é¢æ˜¯â€œå°é±¼â€çš„æƒ…å†µåï¼Œå†ä»¥ä¸‹å›¾ä¸­çš„æ–¹ä½ç»§ç»­è¿›è¡Œä¸Šé¢çš„å…¬å¼ç›´åˆ°é¡¶éƒ¨é¢ä¸ºåŒæ ·çš„è‰²</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1geaw0pin1gj21140cuwlc.jpg" alt="é¡¶éƒ¨é¢.png"></p><h4 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h4><blockquote><p>è¯¥æ­¥éª¤æ˜¯å®ç°é­”æ–¹çš„é¡¶è§’äº’æ¢ï¼Œå…¶ä»–ä¾§é¢è‰²å—ä¸è€ƒè™‘<br>å£è¯€ï¼šR -&gt; U2 -&gt; Râ€™ -&gt; Uâ€™ -&gt; R -&gt; U2 -&gt; Lâ€™ -&gt; U -&gt; Râ€™ -&gt; Uâ€™ -&gt; L</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1geaw5q1g09j206y07iq3a.jpg" alt="é¡¶è§’äº’æ¢.png"></p><h4 id="ç¬¬å››æ­¥"><a href="#ç¬¬å››æ­¥" class="headerlink" title="ç¬¬å››æ­¥"></a>ç¬¬å››æ­¥</h4><blockquote><p>è¯¥æ­¥éª¤æ˜¯å®ç°é­”æ–¹çš„æ£±äº’æ¢ï¼Œå…¶ä»–ä¾§é¢è‰²å—ä¸è€ƒè™‘<br>æœ¬ä¸èµ°ä¸‹å›¾æœ‰ç‚¹é—®é¢˜ã€‚faceé¢æœ‰å˜åŒ–<br>å£è¯€ï¼šF2 -&gt; U -&gt; L -&gt; Râ€™ -&gt; F2 -&gt; Lâ€™ -&gt; R -&gt; U -&gt; F2</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1gebl80p7k0j206z07ldga.jpg" alt="æ£±äº’æ¢.png"></p><ul><li>ç»¼åˆä¸Šæ­¥å°±å¯ä»¥å®ç°é­”æ–¹è¿˜åŸäº†ã€‚å°ä¼™ä¼´ä»¬è¿˜ä¸å¿«è¯•ä¸€ä¸‹ğŸ’ªğŸ’ªğŸ’ªã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> äººæ–‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¸¸è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¦ç‰Œç¼–å·è§„åˆ™</title>
      <link href="2019/03/14/prvoceCode/"/>
      <url>2019/03/14/prvoceCode/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸­å›½è½¦ç‰Œå·ç è§„åˆ™"><a href="#ä¸­å›½è½¦ç‰Œå·ç è§„åˆ™" class="headerlink" title="ä¸­å›½è½¦ç‰Œå·ç è§„åˆ™"></a>ä¸­å›½è½¦ç‰Œå·ç è§„åˆ™</h2><h3 id="ä¸€ã€è½¦ç‰Œå·ç è§„åˆ™"><a href="#ä¸€ã€è½¦ç‰Œå·ç è§„åˆ™" class="headerlink" title="ä¸€ã€è½¦ç‰Œå·ç è§„åˆ™"></a>ä¸€ã€è½¦ç‰Œå·ç è§„åˆ™</h3><h4 id="1-1-æ°‘ç”¨è½¦ç‰Œè§„åˆ™"><a href="#1-1-æ°‘ç”¨è½¦ç‰Œè§„åˆ™" class="headerlink" title="1.1 æ°‘ç”¨è½¦ç‰Œè§„åˆ™"></a>1.1 æ°‘ç”¨è½¦ç‰Œè§„åˆ™</h4><h3 id="æ™®é€šè½¦ç‰Œï¼ˆè“ç‰Œã€é»„ç‰Œï¼‰"><a href="#æ™®é€šè½¦ç‰Œï¼ˆè“ç‰Œã€é»„ç‰Œï¼‰" class="headerlink" title="æ™®é€šè½¦ç‰Œï¼ˆè“ç‰Œã€é»„ç‰Œï¼‰"></a>æ™®é€šè½¦ç‰Œï¼ˆè“ç‰Œã€é»„ç‰Œï¼‰</h3><p>è½¦ç‰Œå·ç é•¿åº¦ï¼š7 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">çœä»½ç®€ç§°</td><td align="center">å‘è¯æœºå…³ä»£ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td></tr></tbody></table><ul><li>é»‘åº•ç™½å­—æ˜¯å¤–èµ„ä¼ä¸šçš„è½¦</li></ul><p>çœä»½ç®€ç§°ï¼š<br>äº¬ æ´¥ æ™‹ å†€ è’™ è¾½ å‰ é»‘ æ²ª è‹ æµ™ çš– é—½ èµ£ é² è±« é„‚ æ¹˜ ç²¤ æ¡‚ ç¼ æ¸ å· è´µ äº‘ è— é™• ç”˜ é’ å® æ–°</p><p>å‘è¯æœºå…³ä»£ç ï¼š</p><p>ABCDEFGH JKLMN PQRSTUVWXY </p><ul><li>è¯´æ˜ï¼šæ—  I, O , Z ä¸‰ä¸ªå­—æ¯ã€‚å…¶ä¸­Oå’ŒZå±äºç‰¹æ®Šè½¦ç‰Œç±»å‹ï¼Œè§å…¶å®ƒç±»å‹è¯´æ˜ã€‚</li></ul><p>è½¦ç‰Œå·ç ï¼š</p><p>æ•°å­—ï¼š0123456789</p><p>å­—æ¯ï¼šABCDEFGH JKLNM PQRSTUVWXY</p><p>è¯´æ˜ï¼šæ—  I, O å­—æ¯ï¼›</p><h3 id="æ–°èƒ½æºè½¦ç‰Œ"><a href="#æ–°èƒ½æºè½¦ç‰Œ" class="headerlink" title="æ–°èƒ½æºè½¦ç‰Œ"></a>æ–°èƒ½æºè½¦ç‰Œ</h3><p>è½¦ç‰Œå·ç é•¿åº¦ï¼š8 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th><th align="center">ç¬¬8ä½</th></tr></thead><tbody><tr><td align="center">çœä»½</td><td align="center">å‘è¯æœºå…³</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td></tr></tbody></table><p>æ–°èƒ½æºè½¦ç‰Œç°é˜¶æ®µå·ç é•¿åº¦ä¸º8ä½ï¼ŒæŒ‰ç…§ç°è¡Œæ–°èƒ½æºè½¦ç‰Œå·ç è§„åˆ™ï¼š</p><p>ç¬¬3ä½ï¼š1-9DF</p><p>ç¬¬4ä½ï¼š1-9A-Zï¼Œæ— Iã€Oå­—æ¯ï¼›</p><p>ç¬¬5-7ä½ï¼š0-9</p><p>ç¬¬8ä½ï¼š1-9DF</p><p>ä¸¥æ ¼æ ¡éªŒæ–°èƒ½æºè½¦ç‰Œå·ç çš„çº¦æŸè§„åˆ™ï¼š</p><p>å½“ç¬¬3ä½ä¸ºD/Fæ—¶ï¼Œç¬¬4ä½å¯å­—æ¯å’Œæ•°å­—ï¼Œç¬¬5-8ä½å¿…é¡»çº¯æ•°å­—ï¼›</p><p>å½“ç¬¬8ä½ä¸ºD/Fæ—¶ï¼Œç¬¬3-7ä½å¿…é¡»çº¯æ•°å­—ï¼›</p><h3 id="1-2-æ°‘ç”¨ç‰¹æ®Šè½¦ç‰Œè§„åˆ™"><a href="#1-2-æ°‘ç”¨ç‰¹æ®Šè½¦ç‰Œè§„åˆ™" class="headerlink" title="1.2 æ°‘ç”¨ç‰¹æ®Šè½¦ç‰Œè§„åˆ™"></a>1.2 æ°‘ç”¨ç‰¹æ®Šè½¦ç‰Œè§„åˆ™</h3><p><strong>æ¸¯æ¾³è½¦ç‰Œ</strong><br>è½¦ç‰Œå·ç é•¿åº¦ï¼š7 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">ç²¤</td><td align="center">Z</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">[æ¸¯æ¾³]</td></tr></tbody></table><p>ç¬¬1ã€2ä½åˆ†åˆ«æ˜¯â€œç²¤Zâ€ï¼Œç¬¬7ä½ä¸ºâ€œæ¸¯æ¾³â€ã€‚</p><p><strong>æ•™ç»ƒè½¦ - å­¦</strong><br>æ•™ç»ƒè½¦å·ç‰Œçš„ç¬¬7ä½å›ºå®šä¸ºâ€œå­¦â€å­—ï¼Œå…¶å®ƒå·ç ä¸æ™®é€šæ°‘ç”¨è½¦ç‰Œä¸€è‡´ï¼›</p><p><strong>æ‹–æŒ‚è½¦ - æŒ‚</strong><br>æ‹–æŒ‚è½¦çš„è½¦å¢ï¼Œå…¶å·ç‰Œçš„ç¬¬7ä½å›ºå®šä¸ºâ€œæŒ‚â€å­—ï¼Œå…¶å®ƒå·ç ä¸æ™®é€šæ°‘ç”¨è½¦ç‰Œä¸€è‡´ï¼›</p><p><strong>å…¶å®ƒå¯èƒ½å‡ºç°çš„å­—ç¬¦ï¼šé¢†è¯•è¶…ç»ƒ</strong><br>å…¶å·ç‰Œçš„ç¬¬7ä½å›ºå®šä¸ºâ€œé¢†è¯•è¶…ç»ƒâ€æŸä¸ªå­—ï¼Œå…¶å®ƒå·ç ä¸æ™®é€šæ°‘ç”¨è½¦ç‰Œä¸€è‡´ï¼›</p><p><strong>æ°‘èˆªå†…éƒ¨è½¦ç‰Œ</strong><br>è½¦ç‰Œå·ç é•¿åº¦ï¼š7 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">æ°‘</td><td align="center">èˆª</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td></tr></tbody></table><p><strong>ä½¿é¦†è½¦ç‰Œ</strong><br>è½¦ç‰Œå·ç é•¿åº¦ï¼š7 ä½</p><ul><li>æ–°å¼ä½¿é¦†è½¦ç‰Œå·ç æ ¼å¼ï¼š</li></ul><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">[1-3]</td><td align="center">æ•°å­—</td><td align="center">æ•°å­—</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">ä½¿</td></tr></tbody></table><ul><li>æ—§å¼ä½¿é¦†è½¦ç‰Œå·ç æ ¼å¼ï¼š</li></ul><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">ä½¿</td><td align="center">[1-3]</td><td align="center">æ•°å­—</td><td align="center">æ•°å­—</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td></tr></tbody></table><p>è¿™ä¸ªç±»å‹çš„è½¦ç‰Œäº2017å¹´5æœˆå·¦å³å–æ¶ˆï¼Œæ›´æ¢æˆæ–°å¼ä½¿é¦†è½¦ç‰Œã€‚å‚è§æ–°é—»é“¾æ¥:<a href="http://society.cnr.cn/js/20170214/t20170214_523597660.html">http://society.cnr.cn/js/20170214/t20170214_523597660.html</a></p><h3 id="1-3-è­¦é˜Ÿè½¦ç‰Œè§„åˆ™"><a href="#1-3-è­¦é˜Ÿè½¦ç‰Œè§„åˆ™" class="headerlink" title="1.3 è­¦é˜Ÿè½¦ç‰Œè§„åˆ™"></a>1.3 è­¦é˜Ÿè½¦ç‰Œè§„åˆ™</h3><p>è­¦é˜Ÿè½¦ç‰ŒåŒ…æ‹¬å››ç§è½¦ç‰Œï¼š</p><p>åœ°æ–¹æ­¦è­¦è½¦ç‰Œï¼›</p><p>æ­¦è­¦æ€»é˜Ÿè½¦ç‰Œï¼›</p><p>æ™®é€šè­¦å¯Ÿè½¦ç‰Œï¼›</p><p>Oå­—è­¦å¯Ÿè½¦ç‰Œï¼›</p><p><strong>åœ°æ–¹æ­¦è­¦è½¦ç‰Œ</strong><br>è½¦ç‰Œå·ç é•¿åº¦ï¼š8 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th><th align="center">ç¬¬8ä½</th></tr></thead><tbody><tr><td align="center">W</td><td align="center">J</td><td align="center">çœä»½ç®€ç§°</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td></tr></tbody></table><ul><li>å…¶ä¸­å·ç å­—æ®µï¼Œä¿æŒä¸æ™®é€šè½¦ç‰Œå·ç ä¸€è‡´ã€‚</li></ul><p>å‚è€ƒèµ„æ–™ï¼šæ­¦è­¦éƒ¨é˜Ÿäº6æœˆ1æ—¥æ­£å¼å¯ç”¨æ–°å¼è½¦è¾†ç‰Œè¯</p><p>ä¾‹å¦‚ï¼š</p><ul><li>WJäº¬12345 </li><li>WJç²¤12345</li></ul><p><strong>æ­¦è­¦æ€»é˜Ÿè½¦ç‰Œ</strong><br>è½¦ç‰Œå·ç é•¿åº¦ï¼š7 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">W</td><td align="center">J</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td></tr></tbody></table><ul><li>å…¶ä¸­å·ç å­—æ®µï¼Œä¿æŒä¸æ™®é€šè½¦ç‰Œå·ç ä¸€è‡´ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><ul><li>WJ1234J</li><li>WJ95001</li></ul><p><strong>æ™®é€šè­¦å¯Ÿè½¦ç‰Œ</strong><br>è½¦ç‰Œå·ç é•¿åº¦ï¼š7 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">çœä»½</td><td align="center">å‘è¯æœºå…³</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">è­¦</td></tr></tbody></table><ul><li>å…¶ä¸­ç¬¬7ä½å›ºå®šä¸ºâ€œè­¦â€å­—ï¼Œå…¶å®ƒä½ç½®ä¸æ™®é€šè½¦ç‰Œå·ç ä¸€è‡´ï¼›</li></ul><p><strong>Oå­—è½¦ç‰Œ</strong><br>è½¦ç‰Œå·ç é•¿åº¦ï¼š7 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">çœä»½</td><td align="center">O</td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td></tr></tbody></table><ul><li>å…¶ä¸­ç¬¬1ä½å›ºå®šä¸ºå­—æ¯â€œOâ€ï¼Œå…¶å®ƒä½ç½®ä¸æ™®é€šè½¦ç‰Œå·ç ä¸€è‡´ã€‚</li></ul><p>æ³¨ï¼šæ­¤ç±»ä¼¼è½¦ç‰Œå·²åŸºæœ¬åœ¨å…¨å›½èŒƒå›´å†…å–æ¶ˆï¼Œä½†éƒ¨åˆ†åœ°åŒºä»æœ‰ä½¿ç”¨æƒ…å†µã€‚</p><h3 id="1-4-å†›é˜Ÿè½¦ç‰Œè§„åˆ™"><a href="#1-4-å†›é˜Ÿè½¦ç‰Œè§„åˆ™" class="headerlink" title="1.4 å†›é˜Ÿè½¦ç‰Œè§„åˆ™"></a>1.4 å†›é˜Ÿè½¦ç‰Œè§„åˆ™</h3><p>è½¦ç‰Œå·ç é•¿åº¦ï¼š7 ä½</p><p>è½¦ç‰Œå·ç æ ¼å¼ï¼š</p><table><thead><tr><th align="center">ç¬¬1ä½</th><th align="center">ç¬¬2ä½</th><th align="center">ç¬¬3ä½</th><th align="center">ç¬¬4ä½</th><th align="center">ç¬¬5ä½</th><th align="center">ç¬¬6ä½</th><th align="center">ç¬¬7ä½</th></tr></thead><tbody><tr><td align="center">å†›åŒºå†›ç§ä»£ç </td><td align="center">å•ä½ä»£ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td><td align="center">å·ç </td></tr></tbody></table><p>å†›åŒºä»£ç ï¼š</p><p>QVKHBSLJNGCEZ</p><p>ä»£è¡¨å„å¤§å†›åŒºã€æ€»éƒ¨ã€å†›ç§ï¼š</p><p>Q æˆ˜åŒºé¦–å­—æ¯ï¼ˆæ–°å¼ï¼‰</p><p>VKHBSLJNGCEZ æ—§å¼å†›åŒºè½¦ç‰Œå‰ç¼€ã€‚åæœŸæ ¹æ®å†›é˜Ÿè½¦ç‰Œæƒ…å†µå¯èƒ½åªä¿å­˜â€œQâ€å­—æ¯ã€‚</p><p>å•ä½ä»£ç ï¼š</p><p>ä¸æ™®é€šæ°‘ç”¨è½¦ç‰Œå‘è¯æœºå…³ä»£ç çš„å­—æ¯ä¸€è‡´ï¼Œæœªåšä¸¥æ ¼é™åˆ¶ã€‚</p><h2 id="äºŒã€ç»Ÿè®¡è¡¨"><a href="#äºŒã€ç»Ÿè®¡è¡¨" class="headerlink" title="äºŒã€ç»Ÿè®¡è¡¨"></a>äºŒã€ç»Ÿè®¡è¡¨</h2><p><img src="http://ww1.sinaimg.cn/large/987eaf20ly1ge50m1n52rj21390o1gsf.jpg" alt="IMG_3445.JPG"></p>]]></content>
      
      
      <categories>
          
          <category> äººæ–‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
            <tag> å¸¸è¯† </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
